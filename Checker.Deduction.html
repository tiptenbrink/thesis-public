<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="./coqdocjs/resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="./coqdocjs/resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="./coqdocjs/resources/config.js"></script>
<script type="text/javascript" src="./coqdocjs/resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://redirect.tipten.nl/checker-project/">Project Page</a>
      <a href="./index.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Checker.Deduction</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.ZArith.html#"><span class="id" title="library">Coq.ZArith.ZArith</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Strings.String.html#"><span class="id" title="library">String</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#"><span class="id" title="library">Coq.Lists.List</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Arith.PeanoNat.html#"><span class="id" title="library">Arith.PeanoNat</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Bool.Bool.html#"><span class="id" title="library">Bool</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.micromega.Lia.html#"><span class="id" title="library">Lia</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Checker.Utility.html#"><span class="id" title="library">Checker.Utility</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Checker.Utility.html#ListEx"><span class="id" title="module">Utility.ListEx</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Checker.Utility.html#ListInd"><span class="id" title="module">Utility.ListInd</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Checker.Utility.html#Maps"><span class="id" title="module">Utility.Maps</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Checker.Utility.html#Tactics"><span class="id" title="module">Utility.Tactics</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Checker.Utility.html#Sets"><span class="id" title="module">Utility.Sets</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Checker.Domain.html#"><span class="id" title="library">Checker.Domain</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Checker.DomainVar.html#"><span class="id" title="library">Checker.DomainVar</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Checker.Spec.html#"><span class="id" title="library">Checker.Spec</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Checker.Spec.html#ProofFacts"><span class="id" title="module">Spec.ProofFacts</span></a>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Domain_scope</span>.<br/>
</div>

<div class="doc">
This file represents the process of verifying a deduction step, although it does not actually mention the deduction itself so there is still some freedom to implement it. Given a number of valid inferences and premises we assume to hold, if the checker returns true we know we have a contradiction (hence of the premises must have been incorrect). 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="negate_bound_atomic" class="idref" href="#negate_bound_atomic"><span class="id" title="definition">negate_bound_atomic</span></a> (<a id="atomic:1" class="idref" href="#atomic:1"><span class="id" title="binder">atomic</span></a> : <a class="idref" href="Checker.Spec.html#ProofFacts.BoundAtomic"><span class="id" title="definition">BoundAtomic</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.Deduction.html#atomic:1"><span class="id" title="variable">atomic</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">atomic</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Checker.Domain.html#negate_atomic"><span class="id" title="definition">negate_atomic</span></a> <a class="idref" href="Checker.Deduction.html#atomic:1"><span class="id" title="variable">atomic</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Check whether a premise holds. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="check_premise" class="idref" href="#check_premise"><span class="id" title="definition">check_premise</span></a> (<a id="domains:3" class="idref" href="#domains:3"><span class="id" title="binder">domains</span></a> : <a class="idref" href="Checker.DomainVar.html#Domains"><span class="id" title="definition">Domains</span></a>) (<a id="premise:4" class="idref" href="#premise:4"><span class="id" title="binder">premise</span></a> : <a class="idref" href="Checker.Spec.html#ProofFacts.BoundAtomic"><span class="id" title="definition">BoundAtomic</span></a>) := <br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.Deduction.html#premise:4"><span class="id" title="variable">premise</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.Utility.html#Maps.smap.find"><span class="id" title="definition">smap.find</span></a> <span class="id" title="var">x</span> <a class="idref" href="Checker.Deduction.html#domains:3"><span class="id" title="variable">domains</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">dom</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#check_holds"><span class="id" title="definition">check_holds</span></a> <span class="id" title="var">a</span> <span class="id" title="var">dom</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
We either reject if not all the premises hold, apply the consequent or indicate it is valid because we derived a conflict. Note that we use add_apply without any condition on the variables (vs = None) since here we want to consider all variables. 
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a id="DeductStep" class="idref" href="#DeductStep"><span class="id" title="definition, inductive"><span id="DeductStep_rect" class="id"><span id="DeductStep_ind" class="id"><span id="DeductStep_rec" class="id"><span id="DeductStep_sind" class="id">DeductStep</span></span></span></span></span></a> :=<br/>
| <a id="deduct_domains" class="idref" href="#deduct_domains"><span class="id" title="constructor">deduct_domains</span></a> (<a id="domains:8" class="idref" href="#domains:8"><span class="id" title="binder">domains</span></a> : <a class="idref" href="Checker.Utility.html#Maps.smap.t"><span class="id" title="definition">smap.t</span></a> <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a>)<br/>
| <a id="deduct_valid" class="idref" href="#deduct_valid"><span class="id" title="constructor">deduct_valid</span></a><br/>
| <a id="deduct_reject" class="idref" href="#deduct_reject"><span class="id" title="constructor">deduct_reject</span></a> (<a id="missing_premises:9" class="idref" href="#missing_premises:9"><span class="id" title="binder">missing_premises</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.BoundAtomic"><span class="id" title="definition">BoundAtomic</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="step_inference" class="idref" href="#step_inference"><span class="id" title="definition">step_inference</span></a> (<a id="fact:10" class="idref" href="#fact:10"><span class="id" title="binder">fact</span></a> : <a class="idref" href="Checker.Spec.html#ProofFacts.ProofFact"><span class="id" title="record">ProofFact</span></a>) (<a id="domains:11" class="idref" href="#domains:11"><span class="id" title="binder">domains</span></a> : <a class="idref" href="Checker.DomainVar.html#Domains"><span class="id" title="definition">Domains</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="missing_premises:13" class="idref" href="#missing_premises:13"><span class="id" title="binder">missing_premises</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> (<span class="id" title="keyword">fun</span> <a id="x:12" class="idref" href="#x:12"><span class="id" title="binder">x</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="Checker.Deduction.html#check_premise"><span class="id" title="definition">check_premise</span></a> <a class="idref" href="Checker.Deduction.html#domains:11"><span class="id" title="variable">domains</span></a> <a class="idref" href="Checker.Deduction.html#x:12"><span class="id" title="variable">x</span></a>)) <a class="idref" href="Checker.Deduction.html#fact:10"><span class="id" title="variable">fact</span></a>.(<a class="idref" href="Checker.Spec.html#ProofFacts.i_premises"><span class="id" title="projection">i_premises</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.Deduction.html#missing_premises:13"><span class="id" title="variable">missing_premises</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> =&gt; <span class="id" title="keyword">match</span> <a class="idref" href="Checker.Deduction.html#fact:10"><span class="id" title="variable">fact</span></a>.(<a class="idref" href="Checker.Spec.html#ProofFacts.i_consequent"><span class="id" title="projection">i_consequent</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="Checker.Deduction.html#deduct_valid"><span class="id" title="constructor">deduct_valid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">consequent</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.DomainVar.html#doms_apply_tighten"><span class="id" title="definition">doms_apply_tighten</span></a> <a class="idref" href="Checker.Deduction.html#domains:11"><span class="id" title="variable">domains</span></a> <span class="id" title="var">consequent</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="Checker.Deduction.html#deduct_valid"><span class="id" title="constructor">deduct_valid</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">domains</span> =&gt; <a class="idref" href="Checker.Deduction.html#deduct_domains"><span class="id" title="constructor">deduct_domains</span></a> <a class="idref" href="Checker.Deduction.html#domains:11"><span class="id" title="variable">domains</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="Checker.Deduction.html#deduct_reject"><span class="id" title="constructor">deduct_reject</span></a> <a class="idref" href="Checker.Deduction.html#missing_premises:13"><span class="id" title="variable">missing_premises</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Record</span> <a id="FailedInference" class="idref" href="#FailedInference"><span class="id" title="record">FailedInference</span></a> := {<br/>
&nbsp;&nbsp;<a id="fact" class="idref" href="#fact"><span class="id" title="projection">fact</span></a> : <a class="idref" href="Checker.Spec.html#ProofFacts.ProofFact"><span class="id" title="record">ProofFact</span></a>;<br/>
&nbsp;&nbsp;<a id="missing_premises" class="idref" href="#missing_premises"><span class="id" title="projection">missing_premises</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.BoundAtomic"><span class="id" title="definition">BoundAtomic</span></a>;<br/>
}.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="CheckDeductResult" class="idref" href="#CheckDeductResult"><span class="id" title="definition, inductive"><span id="CheckDeductResult_rect" class="id"><span id="CheckDeductResult_ind" class="id"><span id="CheckDeductResult_rec" class="id"><span id="CheckDeductResult_sind" class="id">CheckDeductResult</span></span></span></span></span></a> :=<br/>
&nbsp;&nbsp;| <a id="deduced" class="idref" href="#deduced"><span class="id" title="constructor">deduced</span></a><br/>
&nbsp;&nbsp;| <a id="inconsistent_premises" class="idref" href="#inconsistent_premises"><span class="id" title="constructor">inconsistent_premises</span></a><br/>
&nbsp;&nbsp;| <a id="failed" class="idref" href="#failed"><span class="id" title="constructor">failed</span></a> (<a id="inferences:20" class="idref" href="#inferences:20"><span class="id" title="binder">inferences</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Checker.Deduction.html#FailedInference"><span class="id" title="record">FailedInference</span></a>).<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="deduct_check_inferences" class="idref" href="#deduct_check_inferences"><span class="id" title="definition">deduct_check_inferences</span></a> (<a id="facts:21" class="idref" href="#facts:21"><span class="id" title="binder">facts</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.ProofFact"><span class="id" title="record">ProofFact</span></a>) (<a id="domains:22" class="idref" href="#domains:22"><span class="id" title="binder">domains</span></a> : <a class="idref" href="Checker.DomainVar.html#Domains"><span class="id" title="definition">Domains</span></a>) : <a class="idref" href="Checker.Deduction.html#CheckDeductResult"><span class="id" title="inductive">CheckDeductResult</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.Deduction.html#facts:21"><span class="id" title="variable">facts</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> =&gt; <a class="idref" href="Checker.Deduction.html#failed"><span class="id" title="constructor">failed</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">fact</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">facts'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.Deduction.html#step_inference"><span class="id" title="definition">step_inference</span></a> <span class="id" title="var">fact</span> <a class="idref" href="Checker.Deduction.html#domains:22"><span class="id" title="variable">domains</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Checker.Deduction.html#deduct_domains"><span class="id" title="constructor">deduct_domains</span></a> <span class="id" title="var">domains'</span> =&gt; <a class="idref" href="Checker.Deduction.html#deduct_check_inferences:23"><span class="id" title="definition">deduct_check_inferences</span></a> <span class="id" title="var">facts'</span> <span class="id" title="var">domains'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Checker.Deduction.html#deduct_valid"><span class="id" title="constructor">deduct_valid</span></a> =&gt; <a class="idref" href="Checker.Deduction.html#deduced"><span class="id" title="constructor">deduced</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Checker.Deduction.html#deduct_reject"><span class="id" title="constructor">deduct_reject</span></a> <span class="id" title="var">missing_premises</span> =&gt; <a class="idref" href="Checker.Deduction.html#failed"><span class="id" title="constructor">failed</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">{|</span></a> <a class="idref" href="Checker.Deduction.html#fact"><span class="id" title="projection">fact</span></a> := <span class="id" title="var">fact</span>; <a class="idref" href="Checker.Deduction.html#missing_premises"><span class="id" title="projection">missing_premises</span></a> := <span class="id" title="var">missing_premises</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">|}</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="check_deduct" class="idref" href="#check_deduct"><span class="id" title="definition">check_deduct</span></a> (<a id="premises:25" class="idref" href="#premises:25"><span class="id" title="binder">premises</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.BoundAtomic"><span class="id" title="definition">BoundAtomic</span></a>) (<a id="steps:26" class="idref" href="#steps:26"><span class="id" title="binder">steps</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.ProofFact"><span class="id" title="record">ProofFact</span></a>) : <a class="idref" href="Checker.Deduction.html#CheckDeductResult"><span class="id" title="inductive">CheckDeductResult</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="doms:27" class="idref" href="#doms:27"><span class="id" title="binder">doms</span></a> := <a class="idref" href="Checker.DomainVar.html#domains_from_atomics"><span class="id" title="definition">domains_from_atomics</span></a> <a class="idref" href="Checker.Deduction.html#premises:25"><span class="id" title="variable">premises</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="doms_tight:28" class="idref" href="#doms_tight:28"><span class="id" title="binder">doms_tight</span></a> := <a class="idref" href="Checker.DomainVar.html#tighten_doms"><span class="id" title="definition">tighten_doms</span></a> <a class="idref" href="Checker.Deduction.html#doms:27"><span class="id" title="variable">doms</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="Checker.DomainVar.html#check_domains_consistent"><span class="id" title="definition">check_domains_consistent</span></a> <a class="idref" href="Checker.Deduction.html#doms:27"><span class="id" title="variable">doms</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="Checker.Deduction.html#deduct_check_inferences"><span class="id" title="definition">deduct_check_inferences</span></a> <a class="idref" href="Checker.Deduction.html#steps:26"><span class="id" title="variable">steps</span></a> <a class="idref" href="Checker.Deduction.html#doms_tight:28"><span class="id" title="variable">doms_tight</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="Checker.Deduction.html#inconsistent_premises"><span class="id" title="constructor">inconsistent_premises</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="inference_valid_neg_rhs" class="idref" href="#inference_valid_neg_rhs"><span class="id" title="lemma">inference_valid_neg_rhs</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="sol:29" class="idref" href="#sol:29"><span class="id" title="binder">sol</span></a> <a id="premises:30" class="idref" href="#premises:30"><span class="id" title="binder">premises</span></a> <a id="consequent:31" class="idref" href="#consequent:31"><span class="id" title="binder">consequent</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Spec.html#ProofFacts.fact_valid"><span class="id" title="definition">fact_valid</span></a> <a class="idref" href="Checker.Deduction.html#sol:29"><span class="id" title="variable">sol</span></a> (<a class="idref" href="Checker.Spec.html#ProofFacts.mkFact"><span class="id" title="constructor">mkFact</span></a> <a class="idref" href="Checker.Deduction.html#premises:30"><span class="id" title="variable">premises</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Checker.Deduction.html#consequent:31"><span class="id" title="variable">consequent</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Spec.html#ProofFacts.fact_valid"><span class="id" title="definition">fact_valid</span></a> <a class="idref" href="Checker.Deduction.html#sol:29"><span class="id" title="variable">sol</span></a> (<a class="idref" href="Checker.Spec.html#ProofFacts.mkFact"><span class="id" title="constructor">mkFact</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Checker.Deduction.html#negate_bound_atomic"><span class="id" title="definition">negate_bound_atomic</span></a> <a class="idref" href="Checker.Deduction.html#consequent:31"><span class="id" title="variable">consequent</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="Checker.Deduction.html#premises:30"><span class="id" title="variable">premises</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">sol</span> <span class="id" title="var">premises</span> <span class="id" title="var">consq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Spec.html#ProofFacts.fact_valid"><span class="id" title="definition">fact_valid</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">consq</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> <span class="id" title="var">consqa</span>]; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hvalid</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<a class="idref" href="Checker.Spec.html#ProofFacts.valid_atoms"><span class="id" title="definition">valid_atoms</span></a> <span class="id" title="var">sol</span> <span class="id" title="var">premises</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hpremises</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Spec.html#ProofFacts.valid_atoms"><span class="id" title="definition">valid_atoms</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">x'</span> <span class="id" title="var">a'</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">right</span>; <span class="id" title="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hvalid</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpremises</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#negate_atomic_not"><span class="id" title="lemma">negate_atomic_not</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hpremises</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hpremises</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Domain.html#negate_atomic_not"><span class="id" title="lemma">negate_atomic_not</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hneg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x'</span> <span class="id" title="var">a'</span> [<span class="id" title="var">Hisx</span> | <span class="id" title="var">Hinpremises</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hisx</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hisx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hneg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hinpremises</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="forall_premises" class="idref" href="#forall_premises"><span class="id" title="lemma">forall_premises</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="doms:32" class="idref" href="#doms:32"><span class="id" title="binder">doms</span></a> <a id="assignment:33" class="idref" href="#assignment:33"><span class="id" title="binder">assignment</span></a> <a id="atoms:34" class="idref" href="#atoms:34"><span class="id" title="binder">atoms</span></a> <a id="premises:35" class="idref" href="#premises:35"><span class="id" title="binder">premises</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="x:36" class="idref" href="#x:36"><span class="id" title="binder">x</span></a> : <a class="idref" href="Checker.Spec.html#ProofFacts.BoundAtomic"><span class="id" title="definition">BoundAtomic</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="Checker.Deduction.html#check_premise"><span class="id" title="definition">check_premise</span></a> <a class="idref" href="Checker.Deduction.html#doms:32"><span class="id" title="variable">doms</span></a> <a class="idref" href="Checker.Deduction.html#x:36"><span class="id" title="variable">x</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Deduction.html#premises:35"><span class="id" title="variable">premises</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Spec.html#ProofFacts.valid_atoms"><span class="id" title="definition">valid_atoms</span></a> <a class="idref" href="Checker.Deduction.html#assignment:33"><span class="id" title="variable">assignment</span></a> <a class="idref" href="Checker.Deduction.html#atoms:34"><span class="id" title="variable">atoms</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Checker.DomainVar.html#valid_domains"><span class="id" title="definition">valid_domains</span></a> <a class="idref" href="Checker.Deduction.html#doms:32"><span class="id" title="variable">doms</span></a> <a class="idref" href="Checker.Deduction.html#atoms:34"><span class="id" title="variable">atoms</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Spec.html#ProofFacts.valid_atoms"><span class="id" title="definition">valid_atoms</span></a> <a class="idref" href="Checker.Deduction.html#assignment:33"><span class="id" title="variable">assignment</span></a> <a class="idref" href="Checker.Deduction.html#premises:35"><span class="id" title="variable">premises</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">doms</span> <span class="id" title="var">assignment</span> <span class="id" title="var">atoms</span> <span class="id" title="var">premises</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hforall</span> <span class="id" title="var">Hvalid</span> <span class="id" title="var">Hequiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Spec.html#ProofFacts.valid_atoms"><span class="id" title="definition">valid_atoms</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">a</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#check_holds_implies"><span class="id" title="lemma">check_holds_implies</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">dom</span> := <span class="id" title="var">doms</span> <a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">d</span></a><a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">Hequiv</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.DomainVar.html#applied_dom"><span class="id" title="definition">applied_dom</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Domain.html#dom_effect_atomics"><span class="id" title="lemma">dom_effect_atomics</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a'</span> <span class="id" title="var">Hin'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Utility.html#Maps.filter_pair_on_key_spec"><span class="id" title="lemma">filter_pair_on_key_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hin'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hforall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hforall</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hforall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Deduction.html#check_premise"><span class="id" title="definition">check_premise</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Utility.html#Maps.smap.find"><span class="id" title="definition">smap.find</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">Hfind</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Utility.html#Maps.smap.find_spec"><span class="id" title="lemma">smap.find_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Utility.html#Maps.smap_in_spec"><span class="id" title="lemma">smap_in_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.DomainVar.html#dom_from_domains_if_in"><span class="id" title="lemma">dom_from_domains_if_in</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfind</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Bool.Bool.html#negb_false_iff"><span class="id" title="lemma">negb_false_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="filter_eq_nil" class="idref" href="#filter_eq_nil"><span class="id" title="lemma">filter_eq_nil</span></a> : <span class="id" title="keyword">forall</span> [<a id="A:37" class="idref" href="#A:37"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>] (<a id="f:38" class="idref" href="#f:38"><span class="id" title="binder">f</span></a> : <a class="idref" href="Checker.Deduction.html#A:37"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) (<a id="l:39" class="idref" href="#l:39"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a>  <a class="idref" href="Checker.Deduction.html#A:37"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> <a class="idref" href="Checker.Deduction.html#f:38"><span class="id" title="variable">f</span></a> <a class="idref" href="Checker.Deduction.html#l:39"><span class="id" title="variable">l</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="x:40" class="idref" href="#x:40"><span class="id" title="binder">x</span></a> =&gt; <a class="idref" href="Checker.Deduction.html#f:38"><span class="id" title="variable">f</span></a> <a class="idref" href="Checker.Deduction.html#x:40"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>) <a class="idref" href="Checker.Deduction.html#l:39"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span> <span class="id" title="var">Hfilter_nil</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> ; <span class="id" title="tactic">simpl</span> ; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfilter_nil</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Ea</span> ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hfilter_nil</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl</span> ; <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
This is the main inductive proof. Separating it out is important so that we can put domains_equiv_atoms as a hypothesis so that we have enough information in our induction hypothesis. Note that the valid_atoms assignment atoms -&gt; False is just the assignment satisfying the nogood, which is what we aim to prove. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="deduct_check_inferences_correct" class="idref" href="#deduct_check_inferences_correct"><span class="id" title="lemma">deduct_check_inferences_correct</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="assignment:41" class="idref" href="#assignment:41"><span class="id" title="binder">assignment</span></a> <a id="steps:42" class="idref" href="#steps:42"><span class="id" title="binder">steps</span></a> <a id="domains:43" class="idref" href="#domains:43"><span class="id" title="binder">domains</span></a> <a id="premises:44" class="idref" href="#premises:44"><span class="id" title="binder">premises</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.DomainVar.html#valid_domains"><span class="id" title="definition">valid_domains</span></a> <a class="idref" href="Checker.Deduction.html#domains:43"><span class="id" title="variable">domains</span></a> <a class="idref" href="Checker.Deduction.html#premises:44"><span class="id" title="variable">premises</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="fact:45" class="idref" href="#fact:45"><span class="id" title="binder">fact</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Checker.Deduction.html#fact:45"><span class="id" title="variable">fact</span></a> <a class="idref" href="Checker.Deduction.html#steps:42"><span class="id" title="variable">steps</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.fact_valid"><span class="id" title="definition">fact_valid</span></a> <a class="idref" href="Checker.Deduction.html#assignment:41"><span class="id" title="variable">assignment</span></a> <a class="idref" href="Checker.Deduction.html#fact:45"><span class="id" title="variable">fact</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Deduction.html#deduct_check_inferences"><span class="id" title="definition">deduct_check_inferences</span></a> <a class="idref" href="Checker.Deduction.html#steps:42"><span class="id" title="variable">steps</span></a> <a class="idref" href="Checker.Deduction.html#domains:43"><span class="id" title="variable">domains</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Checker.Deduction.html#deduced"><span class="id" title="constructor">deduced</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Spec.html#ProofFacts.fact_valid"><span class="id" title="definition">fact_valid</span></a> <a class="idref" href="Checker.Deduction.html#assignment:41"><span class="id" title="variable">assignment</span></a> (<a class="idref" href="Checker.Spec.html#ProofFacts.mkFact"><span class="id" title="constructor">mkFact</span></a> <a class="idref" href="Checker.Deduction.html#premises:44"><span class="id" title="variable">premises</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">assignment</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">steps</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">step</span> <span class="id" title="var">steps</span> <span class="id" title="var">IH</span>].<br/>
&nbsp;&nbsp;{ <span class="id" title="var">easy</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">doms</span> <span class="id" title="var">premises</span> <span class="id" title="var">Hdoms</span> <span class="id" title="var">Hinfs</span> <span class="id" title="var">Hdeduct</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdeduct</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="keyword">forall</span> <a id="fact:46" class="idref" href="#fact:46"><span class="id" title="binder"><span id="fact:47" class="id">fact</span></span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Checker.Deduction.html#fact:46"><span class="id" title="variable">fact</span></a> <span class="id" title="var">steps</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.fact_valid"><span class="id" title="definition">fact_valid</span></a> <span class="id" title="var">assignment</span> <a class="idref" href="Checker.Deduction.html#fact:46"><span class="id" title="variable">fact</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hprev</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">fact</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hinfs</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">right</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Checker.Spec.html#ProofFacts.fact_valid"><span class="id" title="definition">fact_valid</span></a> <span class="id" title="var">assignment</span> <span class="id" title="var">step</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hstep</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">Hinfs</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hinfs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Deduction.html#step_inference"><span class="id" title="definition">step_inference</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">doms'</span> | |] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hinf</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Deduction.html#step_inference"><span class="id" title="definition">step_inference</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> <span class="id" title="var">_</span> (<a class="idref" href="Checker.Spec.html#ProofFacts.i_premises"><span class="id" title="projection">i_premises</span></a> <span class="id" title="var">step</span>)) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hforall</span> ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hinf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Deduction.html#filter_eq_nil"><span class="id" title="lemma">filter_eq_nil</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hforall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Spec.html#ProofFacts.fact_valid"><span class="id" title="definition">fact_valid</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Spec.html#ProofFacts.i_consequent"><span class="id" title="projection">i_consequent</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">conseq</span>|];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span> <span class="id" title="var">Hinf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Spec.html#ProofFacts.fact_valid"><span class="id" title="definition">fact_valid</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hsatatoms</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Deduction.html#forall_premises"><span class="id" title="lemma">forall_premises</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">assignment</span> := <span class="id" title="var">assignment</span>) (<span class="id" title="var">atoms</span> := <span class="id" title="var">premises</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hforall</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hstep</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hforall</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hconseq</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hstep</span> <span class="id" title="var">Hforall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IH</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">domains</span> := <span class="id" title="var">doms'</span>) (<span class="id" title="var">premises</span> := <span class="id" title="var">conseq</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">premises</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: { <span class="id" title="tactic">apply</span> <span class="id" title="var">Hprev</span>. }  <br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: { <span class="id" title="tactic">apply</span> <span class="id" title="var">Hdeduct</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Spec.html#ProofFacts.valid_atoms"><span class="id" title="definition">valid_atoms</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hconseqxa</span> | <span class="id" title="var">Hprevatoms</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span> <span class="id" title="var">conseq</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hconseq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">Hsatatoms</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hprevatoms</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">conseq</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> <span class="id" title="var">a</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hprev</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="Checker.DomainVar.html#doms_apply_tighten_step"><span class="id" title="lemma">doms_apply_tighten_step</span></a> <span class="id" title="var">doms</span> <span class="id" title="var">premises</span> <span class="id" title="var">Hdoms</span> <span class="id" title="var">x</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Happly_spec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.DomainVar.html#doms_apply_tighten"><span class="id" title="definition">doms_apply_tighten</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">doms_apply</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Happly</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span> <span class="id" title="var">Hinf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hinf</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">doms_apply</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hinf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Happly_spec</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Deduction.html#step_inference"><span class="id" title="definition">step_inference</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hinf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> <span class="id" title="var">_</span> (<a class="idref" href="Checker.Spec.html#ProofFacts.i_premises"><span class="id" title="projection">i_premises</span></a> <span class="id" title="var">step</span>)) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hforall</span> ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hinf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Deduction.html#filter_eq_nil"><span class="id" title="lemma">filter_eq_nil</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hforall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span> <span class="id" title="var">Hinf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Spec.html#ProofFacts.fact_valid"><span class="id" title="definition">fact_valid</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Spec.html#ProofFacts.i_consequent"><span class="id" title="projection">i_consequent</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">conseq</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">conseq</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> <span class="id" title="var">a</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="Checker.DomainVar.html#doms_apply_tighten_step"><span class="id" title="lemma">doms_apply_tighten_step</span></a> <span class="id" title="var">doms</span> <span class="id" title="var">premises</span> <span class="id" title="var">Hdoms</span> <span class="id" title="var">x</span> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Happly_spec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.DomainVar.html#doms_apply_tighten"><span class="id" title="definition">doms_apply_tighten</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">Happly</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span> <span class="id" title="var">Hinf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hsatatoms</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Happly_spec</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Happly_spec</span> <span class="id" title="var">Happly</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.DomainVar.html#dom_consistent_if_valid_atoms"><span class="id" title="lemma">dom_consistent_if_valid_atoms</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">sol</span> := <span class="id" title="var">assignment</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Spec.html#ProofFacts.valid_atoms"><span class="id" title="definition">valid_atoms</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x'</span> <span class="id" title="var">a'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hxx'</span> | <span class="id" title="var">Hin</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hxx'</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Deduction.html#forall_premises"><span class="id" title="lemma">forall_premises</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">doms</span> := <span class="id" title="var">doms</span>) (<span class="id" title="var">atoms</span> := <span class="id" title="var">premises</span>); <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">Hsatatoms</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">Hsatatoms</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hstep</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Deduction.html#forall_premises"><span class="id" title="lemma">forall_premises</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">doms</span> := <span class="id" title="var">doms</span>) (<span class="id" title="var">atoms</span> := <span class="id" title="var">premises</span>); <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">easy</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
This is the main correctness proof that factors out the use of the domain map. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="check_deduct_correct" class="idref" href="#check_deduct_correct"><span class="id" title="lemma">check_deduct_correct</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="assignment:48" class="idref" href="#assignment:48"><span class="id" title="binder">assignment</span></a> <a id="premises:49" class="idref" href="#premises:49"><span class="id" title="binder">premises</span></a> <a id="steps:50" class="idref" href="#steps:50"><span class="id" title="binder">steps</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="inf:51" class="idref" href="#inf:51"><span class="id" title="binder">inf</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Checker.Deduction.html#inf:51"><span class="id" title="variable">inf</span></a> <a class="idref" href="Checker.Deduction.html#steps:50"><span class="id" title="variable">steps</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.fact_valid"><span class="id" title="definition">fact_valid</span></a> <a class="idref" href="Checker.Deduction.html#assignment:48"><span class="id" title="variable">assignment</span></a> <a class="idref" href="Checker.Deduction.html#inf:51"><span class="id" title="variable">inf</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Deduction.html#check_deduct"><span class="id" title="definition">check_deduct</span></a> <a class="idref" href="Checker.Deduction.html#premises:49"><span class="id" title="variable">premises</span></a> <a class="idref" href="Checker.Deduction.html#steps:50"><span class="id" title="variable">steps</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Checker.Deduction.html#deduced"><span class="id" title="constructor">deduced</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Spec.html#ProofFacts.fact_valid"><span class="id" title="definition">fact_valid</span></a> <a class="idref" href="Checker.Deduction.html#assignment:48"><span class="id" title="variable">assignment</span></a> (<a class="idref" href="Checker.Spec.html#ProofFacts.mkFact"><span class="id" title="constructor">mkFact</span></a> <a class="idref" href="Checker.Deduction.html#premises:49"><span class="id" title="variable">premises</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">assignment</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">premises</span> <span class="id" title="var">steps</span> <span class="id" title="var">Hinfs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> <a class="idref" href="Checker.DomainVar.html#domains_from_atomics_correct"><span class="id" title="lemma">domains_from_atomics_correct</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">atoms</span> := <span class="id" title="var">premises</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hdomains</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Deduction.html#check_deduct"><span class="id" title="definition">check_deduct</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.DomainVar.html#check_domains_consistent"><span class="id" title="definition">check_domains_consistent</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Deduction.html#deduct_check_inferences_correct"><span class="id" title="lemma">deduct_check_inferences_correct</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">assignment</span> := <span class="id" title="var">assignment</span>) (<span class="id" title="var">premises</span> := <span class="id" title="var">premises</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.DomainVar.html#valid_domains"><span class="id" title="definition">valid_domains</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.DomainVar.html#tighten_doms_equiv"><span class="id" title="definition">tighten_doms_equiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hdomains</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">Hinfs</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="check_in_vs" class="idref" href="#check_in_vs"><span class="id" title="definition">check_in_vs</span></a> (<a id="vs:52" class="idref" href="#vs:52"><span class="id" title="binder">vs</span></a> : <a class="idref" href="Checker.Utility.html#Sets.sstr.t"><span class="id" title="definition">sstr.t</span></a>) (<a id="a:53" class="idref" href="#a:53"><span class="id" title="binder">a</span></a> : <a class="idref" href="Checker.Spec.html#ProofFacts.BoundAtomic"><span class="id" title="definition">BoundAtomic</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.Deduction.html#a:53"><span class="id" title="variable">a</span></a> <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">atom</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <a class="idref" href="Checker.Utility.html#Sets.sstr.mem"><span class="id" title="definition">sstr.mem</span></a> <span class="id" title="var">x</span> <a class="idref" href="Checker.Deduction.html#vs:52"><span class="id" title="variable">vs</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="atomics_from_fact" class="idref" href="#atomics_from_fact"><span class="id" title="definition">atomics_from_fact</span></a> (<a id="fact:55" class="idref" href="#fact:55"><span class="id" title="binder">fact</span></a> : <a class="idref" href="Checker.Spec.html#ProofFacts.ProofFact"><span class="id" title="record">ProofFact</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.Deduction.html#fact:55"><span class="id" title="variable">fact</span></a>.(<a class="idref" href="Checker.Spec.html#ProofFacts.i_consequent"><span class="id" title="projection">i_consequent</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Checker.Deduction.html#fact:55"><span class="id" title="variable">fact</span></a>.(<a class="idref" href="Checker.Spec.html#ProofFacts.i_premises"><span class="id" title="projection">i_premises</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">consq</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Checker.Deduction.html#negate_bound_atomic"><span class="id" title="definition">negate_bound_atomic</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">consq</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="Checker.Deduction.html#fact:55"><span class="id" title="variable">fact</span></a>.(<a class="idref" href="Checker.Spec.html#ProofFacts.i_premises"><span class="id" title="projection">i_premises</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="infer_domains" class="idref" href="#infer_domains"><span class="id" title="definition">infer_domains</span></a> (<a id="fact:56" class="idref" href="#fact:56"><span class="id" title="binder">fact</span></a> : <a class="idref" href="Checker.Spec.html#ProofFacts.ProofFact"><span class="id" title="record">ProofFact</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="x:57" class="idref" href="#x:57"><span class="id" title="binder">x</span></a>, <a id="atomics:58" class="idref" href="#atomics:58"><span class="id" title="binder">atomics</span></a>) := <a class="idref" href="Checker.Deduction.html#atomics_from_fact"><span class="id" title="definition">atomics_from_fact</span></a> <a class="idref" href="Checker.Deduction.html#fact:56"><span class="id" title="variable">fact</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="doms:59" class="idref" href="#doms:59"><span class="id" title="binder">doms</span></a> := <a class="idref" href="Checker.DomainVar.html#domains_from_atomics"><span class="id" title="definition">domains_from_atomics</span></a> <a class="idref" href="Checker.Deduction.html#atomics:58"><span class="id" title="variable">atomics</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="doms_tight:60" class="idref" href="#doms_tight:60"><span class="id" title="binder">doms_tight</span></a> := <a class="idref" href="Checker.DomainVar.html#tighten_doms"><span class="id" title="definition">tighten_doms</span></a> <a class="idref" href="Checker.Deduction.html#doms:59"><span class="id" title="variable">doms</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="Checker.DomainVar.html#check_domains_consistent"><span class="id" title="definition">check_domains_consistent</span></a> <a class="idref" href="Checker.Deduction.html#doms_tight:60"><span class="id" title="variable">doms_tight</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Checker.Deduction.html#doms_tight:60"><span class="id" title="variable">doms_tight</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Checker.Deduction.html#x:57"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="infer_domains_valid_as_nogood" class="idref" href="#infer_domains_valid_as_nogood"><span class="id" title="lemma">infer_domains_valid_as_nogood</span></a> <a id="fact:61" class="idref" href="#fact:61"><span class="id" title="binder">fact</span></a> <a id="doms:62" class="idref" href="#doms:62"><span class="id" title="binder">doms</span></a> <a id="xconsq:63" class="idref" href="#xconsq:63"><span class="id" title="binder">xconsq</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="sol:64" class="idref" href="#sol:64"><span class="id" title="binder">sol</span></a>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Deduction.html#infer_domains"><span class="id" title="definition">infer_domains</span></a> <a class="idref" href="Checker.Deduction.html#fact:61"><span class="id" title="variable">fact</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Checker.Deduction.html#doms:62"><span class="id" title="variable">doms</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Checker.Deduction.html#xconsq:63"><span class="id" title="variable">xconsq</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="atoms:65" class="idref" href="#atoms:65"><span class="id" title="binder">atoms</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.DomainVar.html#valid_domains"><span class="id" title="definition">valid_domains</span></a> <a class="idref" href="Checker.Deduction.html#doms:62"><span class="id" title="variable">doms</span></a> <a class="idref" href="Checker.Deduction.html#atoms:65"><span class="id" title="variable">atoms</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="Checker.Spec.html#ProofFacts.fact_valid"><span class="id" title="definition">fact_valid</span></a> <a class="idref" href="Checker.Deduction.html#sol:64"><span class="id" title="variable">sol</span></a> (<a class="idref" href="Checker.Spec.html#ProofFacts.mkFact"><span class="id" title="constructor">mkFact</span></a> <a class="idref" href="Checker.Deduction.html#atoms:65"><span class="id" title="variable">atoms</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.fact_valid"><span class="id" title="definition">fact_valid</span></a> <a class="idref" href="Checker.Deduction.html#sol:64"><span class="id" title="variable">sol</span></a> <a class="idref" href="Checker.Deduction.html#fact:61"><span class="id" title="variable">fact</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">sol</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Deduction.html#infer_domains"><span class="id" title="definition">infer_domains</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Deduction.html#atomics_from_fact"><span class="id" title="definition">atomics_from_fact</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">x</span> <span class="id" title="var">atomics'</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hatomics'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.DomainVar.html#check_domains_consistent"><span class="id" title="definition">check_domains_consistent</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Deduction.html#atomics_from_fact"><span class="id" title="definition">atomics_from_fact</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hatomics'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Spec.html#ProofFacts.i_consequent"><span class="id" title="projection">i_consequent</span></a> <span class="id" title="keyword">as</span> [(<span class="id" title="var">x</span> &amp; <span class="id" title="var">consq</span>)|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hconsq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hatomics'</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hatomics'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Checker.Domain.html#negate_atomic"><span class="id" title="definition">negate_atomic</span></a> <span class="id" title="var">consq</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.i_premises"><span class="id" title="projection">i_premises</span></a> <span class="id" title="var">fact</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">fact</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">premises</span> [[<span class="id" title="var">x'</span> <span class="id" title="var">consq'</span>] | ]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: { <span class="id" title="tactic">discriminate</span> <span class="id" title="var">Hconsq</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hconsq</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">x'</span> <span class="id" title="var">consq'</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hconsq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Checker.Domain.html#negate_atomic"><span class="id" title="definition">negate_atomic</span></a> <span class="id" title="var">consq</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">premises</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">atoms</span>; <span class="id" title="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.DomainVar.html#tighten_doms_equiv"><span class="id" title="definition">tighten_doms_equiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.DomainVar.html#domains_from_atomics_correct"><span class="id" title="lemma">domains_from_atomics_correct</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Deduction.html#inference_valid_neg_rhs"><span class="id" title="lemma">inference_valid_neg_rhs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exists</span> (<a class="idref" href="Checker.Spec.html#ProofFacts.i_premises"><span class="id" title="projection">i_premises</span></a> <span class="id" title="var">fact</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hatomics'</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">fact</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">premises</span> [<span class="id" title="var">xconsq</span> | ]]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.DomainVar.html#tighten_doms_equiv"><span class="id" title="definition">tighten_doms_equiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.DomainVar.html#domains_from_atomics_correct"><span class="id" title="lemma">domains_from_atomics_correct</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
This lemma is primarily useful for inference checkers. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="infer_domains_correct" class="idref" href="#infer_domains_correct"><span class="id" title="lemma">infer_domains_correct</span></a> <a id="fact:66" class="idref" href="#fact:66"><span class="id" title="binder">fact</span></a> <a id="doms:67" class="idref" href="#doms:67"><span class="id" title="binder">doms</span></a> <a id="xconsq:68" class="idref" href="#xconsq:68"><span class="id" title="binder">xconsq</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="sol:69" class="idref" href="#sol:69"><span class="id" title="binder">sol</span></a>, <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Deduction.html#infer_domains"><span class="id" title="definition">infer_domains</span></a> <a class="idref" href="Checker.Deduction.html#fact:66"><span class="id" title="variable">fact</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Checker.Deduction.html#doms:67"><span class="id" title="variable">doms</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Checker.Deduction.html#xconsq:68"><span class="id" title="variable">xconsq</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="Checker.DomainVar.html#sol_in_doms"><span class="id" title="definition">sol_in_doms</span></a> <a class="idref" href="Checker.Deduction.html#sol:69"><span class="id" title="variable">sol</span></a> <a class="idref" href="Checker.Deduction.html#doms:67"><span class="id" title="variable">doms</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Spec.html#ProofFacts.fact_valid"><span class="id" title="definition">fact_valid</span></a> <a class="idref" href="Checker.Deduction.html#sol:69"><span class="id" title="variable">sol</span></a> <a class="idref" href="Checker.Deduction.html#fact:66"><span class="id" title="variable">fact</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">sol</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hinfer</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Deduction.html#infer_domains_valid_as_nogood"><span class="id" title="lemma">infer_domains_valid_as_nogood</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">sol</span> := <span class="id" title="var">sol</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hinfer</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hinfer</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">atoms</span> &amp; <span class="id" title="var">Hvalid</span> &amp; <span class="id" title="var">Hinf_valid_atoms</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hinf_valid_atoms</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hinf_valid_atoms</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Spec.html#ProofFacts.fact_valid"><span class="id" title="definition">fact_valid</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.DomainVar.html#valid_domains_sol_in_doms_iff_valid_atoms"><span class="id" title="lemma">valid_domains_sol_in_doms_iff_valid_atoms</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">atoms</span> := <span class="id" title="var">atoms</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="subset_is_in_dom" class="idref" href="#subset_is_in_dom"><span class="id" title="lemma">subset_is_in_dom</span></a> : <span class="id" title="keyword">forall</span> <a id="a:70" class="idref" href="#a:70"><span class="id" title="binder">a</span></a> <a id="b:71" class="idref" href="#b:71"><span class="id" title="binder">b</span></a> <a id="x:72" class="idref" href="#x:72"><span class="id" title="binder">x</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#is_subset"><span class="id" title="definition">is_subset</span></a> <a class="idref" href="Checker.Deduction.html#a:70"><span class="id" title="variable">a</span></a> <a class="idref" href="Checker.Deduction.html#b:71"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a> <a class="idref" href="Checker.Deduction.html#x:72"><span class="id" title="variable">x</span></a> <a class="idref" href="Checker.Deduction.html#a:70"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a> <a class="idref" href="Checker.Deduction.html#x:72"><span class="id" title="variable">x</span></a> <a class="idref" href="Checker.Deduction.html#b:71"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#is_subset"><span class="id" title="definition">is_subset</span></a>, <a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">x</span> <span class="id" title="var">Hsub</span> <span class="id" title="var">Ha</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ha</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Halb</span> [<span class="id" title="var">Haub</span> <span class="id" title="var">Hah</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#andb_prop"><span class="id" title="lemma">andb_prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsub</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hsub</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hsub</span> <span class="id" title="var">Hholes</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Utility.html#Sets.sint.subset_spec"><span class="id" title="lemma">sint.subset_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hholes</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#andb_prop"><span class="id" title="lemma">andb_prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsub</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hsub</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hlb</span> <span class="id" title="var">Hub</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Zext.html#Zext.leb_le"><span class="id" title="lemma">Zext.Zext.leb_le</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlb</span>, <span class="id" title="var">Hub</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">transitivity</span> (<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a> <span class="id" title="var">a</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">transitivity</span> (<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a> <span class="id" title="var">a</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hholesb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Zext.html#Zext.leb"><span class="id" title="definition">Zext.Zext.leb</span></a> (<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a> <span class="id" title="var">a</span>) (<a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">Zext.zz</span></a> <span class="id" title="var">x</span>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="Checker.Zext.html#Zext.leb"><span class="id" title="definition">Zext.Zext.leb</span></a> (<a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">Zext.zz</span></a> <span class="id" title="var">x</span>) (<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a> <span class="id" title="var">a</span>)) <span class="id" title="var">eqn</span>:<span class="id" title="var">Ebounds</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">Hah</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Utility.html#Sets.sint_prps.in_subset"><span class="id" title="lemma">sint_prps.in_subset</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">s1</span> := (<a class="idref" href="Checker.Utility.html#Sets.sint.filter"><span class="id" title="definition">sint.filter</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="h:73" class="idref" href="#h:73"><span class="id" title="binder"><span id="h:74" class="id">h</span></span></a> : <a class="idref" href="Checker.Utility.html#Sets.sint.elt"><span class="id" title="definition">sint.elt</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Zext.html#Zext.leb"><span class="id" title="definition">Zext.Zext.leb</span></a> (<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a> <span class="id" title="var">a</span>) (<a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">Zext.zz</span></a> <a class="idref" href="Checker.Deduction.html#h:73"><span class="id" title="variable">h</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Zext.html#Zext.leb"><span class="id" title="definition">Zext.Zext.leb</span></a> (<a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">Zext.zz</span></a> <a class="idref" href="Checker.Deduction.html#h:73"><span class="id" title="variable">h</span></a>) (<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a> <span class="id" title="var">a</span>)) (<a class="idref" href="Checker.Domain.html#d_holes"><span class="id" title="projection">d_holes</span></a> <span class="id" title="var">b</span>))) ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Utility.html#Sets.sint_prps.FM.filter_3"><span class="id" title="lemma">sint_prps.FM.filter_3</span></a> ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Morphisms.Proper</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Classes.Morphisms.html#respectful"><span class="id" title="definition">Morphisms.respectful</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Bool.Bool.html#negb_true_iff"><span class="id" title="lemma">negb_true_iff</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Bool.Bool.html#negb_andb"><span class="id" title="lemma">negb_andb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ebounds</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Bool.Bool.html#orb_prop"><span class="id" title="lemma">orb_prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ebounds</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Ebounds</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Elb</span> | <span class="id" title="var">Eub</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Bool.Bool.html#negb_true_iff"><span class="id" title="lemma">negb_true_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Elb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a> <span class="id" title="var">a</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Ea</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Zext.html#Zext.le"><span class="id" title="definition">Zext.Zext.le</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Halb</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Halb</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Zext.html#Zext.leb"><span class="id" title="definition">Zext.Zext.leb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Elb</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Elb</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">easy</span> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">z</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#1718f1bc306f7edd524650b393f464a3"><span class="id" title="notation">?=</span></a> <span class="id" title="var">x</span>) ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Bool.Bool.html#negb_true_iff"><span class="id" title="lemma">negb_true_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Eub</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a> <span class="id" title="var">a</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Ea</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Zext.html#Zext.le"><span class="id" title="definition">Zext.Zext.le</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Haub</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Haub</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Zext.html#Zext.leb"><span class="id" title="definition">Zext.Zext.leb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Eub</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Eub</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">easy</span> .<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#1718f1bc306f7edd524650b393f464a3"><span class="id" title="notation">?=</span></a> <span class="id" title="var">z</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Exz</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">easy</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="subset_domains" class="idref" href="#subset_domains"><span class="id" title="lemma">subset_domains</span></a> (<a id="sol:75" class="idref" href="#sol:75"><span class="id" title="binder">sol</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="doms:76" class="idref" href="#doms:76"><span class="id" title="binder">doms</span></a> <a id="doms':77" class="idref" href="#doms':77"><span class="id" title="binder">doms'</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Utility.html#Maps.smap.Equivb"><span class="id" title="definition">smap.Equivb</span></a> <a class="idref" href="Checker.Domain.html#is_subset"><span class="id" title="definition">Domain.is_subset</span></a> <a class="idref" href="Checker.Deduction.html#doms:76"><span class="id" title="variable">doms</span></a> <a class="idref" href="Checker.Deduction.html#doms':77"><span class="id" title="variable">doms'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Checker.DomainVar.html#sol_in_doms"><span class="id" title="definition">sol_in_doms</span></a> <a class="idref" href="Checker.Deduction.html#sol:75"><span class="id" title="variable">sol</span></a> <a class="idref" href="Checker.Deduction.html#doms:76"><span class="id" title="variable">doms</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Checker.DomainVar.html#sol_in_doms"><span class="id" title="definition">sol_in_doms</span></a> <a class="idref" href="Checker.Deduction.html#sol:75"><span class="id" title="variable">sol</span></a> <a class="idref" href="Checker.Deduction.html#doms':77"><span class="id" title="variable">doms'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">doms</span> <span class="id" title="var">doms'</span> <span class="id" title="var">His_subset</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Utility.html#Maps.smap.Equivb"><span class="id" title="definition">smap.Equivb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">His_subset</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">His_subset</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Heqvars</span> <span class="id" title="var">Hsubset_domains</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">Raw.Cmp</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsubset_domains</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Utility.html#Maps.smap.Eqdom"><span class="id" title="definition">smap.Eqdom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqvars</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.DomainVar.html#sol_in_doms"><span class="id" title="definition">sol_in_doms</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">His_in_dom</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">His_in_dom</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">doms</span> <a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">d</span></a><a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">x</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">dx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">doms'</span> <a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">d</span></a><a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">x</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">d'x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hsubset_domains</span> <span class="id" title="var">x</span> <span class="id" title="var">dx</span> <span class="id" title="var">d'x</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.DomainVar.html#dom_from_domains"><span class="id" title="definition">dom_from_domains</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqdx</span>, <span class="id" title="var">Heqd'x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Utility.html#Maps.smap.find"><span class="id" title="definition">smap.find</span></a> <span class="id" title="var">x</span> <span class="id" title="var">doms</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Ex</span> ;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Utility.html#Maps.smap.find"><span class="id" title="definition">smap.find</span></a> <span class="id" title="var">x</span> <span class="id" title="var">doms'</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Ey</span> ;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Heqvars</span> <span class="id" title="var">x</span>) ;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqdx</span> ;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqd'x</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqdx</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ex</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqd'x</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ey</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Utility.html#Maps.smap_prps.find_2"><span class="id" title="lemma">smap_prps.find_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ex</span>, <span class="id" title="var">Ey</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hsubset_domains</span> <span class="id" title="var">Ex</span> <span class="id" title="var">Ey</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Heqdx</span> <span class="id" title="var">Heqd'x</span> <span class="id" title="var">d</span> <span class="id" title="var">d0</span> <span class="id" title="var">Ex</span> <span class="id" title="var">Ey</span> <span class="id" title="var">Heqvars</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">sol</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Heqz</span> <span class="id" title="var">sol</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Deduction.html#subset_is_in_dom"><span class="id" title="lemma">subset_is_in_dom</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">a</span> := <span class="id" title="var">dx</span>) ; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Utility.html#Maps.smap_prps.find_2"><span class="id" title="lemma">smap_prps.find_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ex</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Utility.html#Maps.smap_prps.not_in_find"><span class="id" title="lemma">smap_prps.not_in_find</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ey</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Ey</span>, <span class="id" title="var">Heqvars</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Utility.html#Maps.smap.In"><span class="id" title="definition">smap.In</span></a>, <a class="idref" href="Checker.Utility.html#Maps.smap.Raw.In"><span class="id" title="definition">smap.Raw.In</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Utility.html#Maps.smap.MapsTo"><span class="id" title="definition">smap.MapsTo</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ex</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Utility.html#Maps.smap_prps.find_2"><span class="id" title="lemma">smap_prps.find_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ey</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Utility.html#Maps.smap_prps.not_in_find"><span class="id" title="lemma">smap_prps.not_in_find</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ex</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Ex</span>, <span class="id" title="var">Heqvars</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Utility.html#Maps.smap.In"><span class="id" title="definition">smap.In</span></a>, <a class="idref" href="Checker.Utility.html#Maps.smap.Raw.In"><span class="id" title="definition">smap.Raw.In</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Utility.html#Maps.smap.MapsTo"><span class="id" title="definition">smap.MapsTo</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ex</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqd'x</span>, &lt;- <span class="id" title="var">Heqdx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="equiv_domains" class="idref" href="#equiv_domains"><span class="id" title="lemma">equiv_domains</span></a> (<a id="sol:78" class="idref" href="#sol:78"><span class="id" title="binder">sol</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="doms:79" class="idref" href="#doms:79"><span class="id" title="binder">doms</span></a> <a id="doms':80" class="idref" href="#doms':80"><span class="id" title="binder">doms'</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Utility.html#Maps.smap.Equivb"><span class="id" title="definition">smap.Equivb</span></a> <a class="idref" href="Checker.Domain.html#eqb"><span class="id" title="definition">Domain.eqb</span></a> <a class="idref" href="Checker.Deduction.html#doms:79"><span class="id" title="variable">doms</span></a> <a class="idref" href="Checker.Deduction.html#doms':80"><span class="id" title="variable">doms'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Checker.DomainVar.html#sol_in_doms"><span class="id" title="definition">sol_in_doms</span></a> <a class="idref" href="Checker.Deduction.html#sol:78"><span class="id" title="variable">sol</span></a> <a class="idref" href="Checker.Deduction.html#doms:79"><span class="id" title="variable">doms</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Checker.DomainVar.html#sol_in_doms"><span class="id" title="definition">sol_in_doms</span></a> <a class="idref" href="Checker.Deduction.html#sol:78"><span class="id" title="variable">sol</span></a> <a class="idref" href="Checker.Deduction.html#doms':80"><span class="id" title="variable">doms'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">doms</span> <span class="id" title="var">doms'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hequiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Utility.html#Maps.smap.Equivb"><span class="id" title="definition">smap.Equivb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hequiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hequiv</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Heqdoms</span> <span class="id" title="var">Heqmaps</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Utility.html#Maps.smap.Eqdom"><span class="id" title="definition">smap.Eqdom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqdoms</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="keyword">forall</span> <a id="x:81" class="idref" href="#x:81"><span class="id" title="binder"><span id="x:82" class="id">x</span></span></a>, <a class="idref" href="Checker.Domain.html#dom_equiv"><span class="id" title="definition">dom_equiv</span></a> (<span class="id" title="var">doms</span> <a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">d</span></a><a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Checker.Deduction.html#x:81"><span class="id" title="variable">x</span></a>) (<span class="id" title="var">doms'</span> <a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">d</span></a><a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Checker.Deduction.html#x:81"><span class="id" title="variable">x</span></a>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hdom_equiv</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="keyword">forall</span> <a id="x:83" class="idref" href="#x:83"><span class="id" title="binder"><span id="x:84" class="id">x</span></span></a>, <a class="idref" href="Checker.Utility.html#Maps.smap.MapsTo"><span class="id" title="definition">smap.MapsTo</span></a> <a class="idref" href="Checker.Deduction.html#x:83"><span class="id" title="variable">x</span></a> (<span class="id" title="var">doms</span> <a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">d</span></a><a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Checker.Deduction.html#x:83"><span class="id" title="variable">x</span></a>) <span class="id" title="var">doms</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="Checker.Utility.html#Maps.smap.MapsTo"><span class="id" title="definition">smap.MapsTo</span></a> <a class="idref" href="Checker.Deduction.html#x:83"><span class="id" title="variable">x</span></a> (<span class="id" title="var">doms'</span> <a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">d</span></a><a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Checker.Deduction.html#x:83"><span class="id" title="variable">x</span></a>) <span class="id" title="var">doms'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Heqmaps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Heqdoms</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="Checker.Utility.html#Maps.smap_prps.in_find"><span class="id" title="lemma">smap_prps.in_find</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqdoms</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.DomainVar.html#dom_from_domains"><span class="id" title="definition">dom_from_domains</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> &lt;- <a class="idref" href="Checker.Utility.html#Maps.smap.find_spec"><span class="id" title="lemma">smap.find_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Utility.html#Maps.smap.find"><span class="id" title="definition">smap.find</span></a> <span class="id" title="var">x</span> <span class="id" title="var">doms</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hfind</span>; <span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Utility.html#Maps.smap.find"><span class="id" title="definition">smap.find</span></a> <span class="id" title="var">x</span> <span class="id" title="var">doms'</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hfind'</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">d</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heqdoms</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">d</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqdoms</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.DomainVar.html#doms_maps_or_not_included"><span class="id" title="lemma">doms_maps_or_not_included</span></a> <span class="id" title="var">doms</span> <span class="id" title="var">x</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hmaps</span> | [<span class="id" title="var">Hinitial</span> <span class="id" title="var">Hnin</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: { <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hinitial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.DomainVar.html#doms_maps_or_not_included"><span class="id" title="lemma">doms_maps_or_not_included</span></a> <span class="id" title="var">doms'</span> <span class="id" title="var">x</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hmaps'</span> | [<span class="id" title="var">Hinitial'</span> <span class="id" title="var">Hnin'</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmaps'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Utility.html#Maps.smap_in_spec"><span class="id" title="lemma">smap_in_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmaps'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hnin</span> (<span class="id" title="var">doms</span> <a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">d</span></a><a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hinitial'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Hmaps</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hmaps'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmaps'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Heqmaps</span> <span class="id" title="var">x</span> (<span class="id" title="var">doms</span> <a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">d</span></a><a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">x</span>) (<span class="id" title="var">doms'</span> <a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">d</span></a><a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">x</span>) <span class="id" title="var">Hmaps</span> <span class="id" title="var">Hmaps'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="definition">Raw.Cmp</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heqmaps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#eqb_eq"><span class="id" title="lemma">Domain.eqb_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Heqmaps</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hdom_equiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hdom_equiv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="fact_implies_fact" class="idref" href="#fact_implies_fact"><span class="id" title="definition">fact_implies_fact</span></a> (<a id="stronger:85" class="idref" href="#stronger:85"><span class="id" title="binder">stronger</span></a> : <a class="idref" href="Checker.Spec.html#ProofFacts.ProofFact"><span class="id" title="record">ProofFact</span></a>) (<a id="weaker:86" class="idref" href="#weaker:86"><span class="id" title="binder">weaker</span></a> : <a class="idref" href="Checker.Spec.html#ProofFacts.ProofFact"><span class="id" title="record">ProofFact</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> (<a class="idref" href="Checker.Deduction.html#infer_domains"><span class="id" title="definition">infer_domains</span></a> <a class="idref" href="Checker.Deduction.html#stronger:85"><span class="id" title="variable">stronger</span></a>), (<a class="idref" href="Checker.Deduction.html#infer_domains"><span class="id" title="definition">infer_domains</span></a> <a class="idref" href="Checker.Deduction.html#weaker:86"><span class="id" title="variable">weaker</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">stronger_doms</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">weaker_doms</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Utility.html#Maps.smap.equal"><span class="id" title="definition">smap.equal</span></a> <a class="idref" href="Checker.Domain.html#is_subset"><span class="id" title="definition">Domain.is_subset</span></a> <span class="id" title="var">weaker_doms</span> <span class="id" title="var">stronger_doms</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="fact_implies_fact_entails" class="idref" href="#fact_implies_fact_entails"><span class="id" title="lemma">fact_implies_fact_entails</span></a> : <span class="id" title="keyword">forall</span> <a id="weaker:87" class="idref" href="#weaker:87"><span class="id" title="binder">weaker</span></a> <a id="stronger:88" class="idref" href="#stronger:88"><span class="id" title="binder">stronger</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Deduction.html#fact_implies_fact"><span class="id" title="definition">fact_implies_fact</span></a> <a class="idref" href="Checker.Deduction.html#stronger:88"><span class="id" title="variable">stronger</span></a> <a class="idref" href="Checker.Deduction.html#weaker:87"><span class="id" title="variable">weaker</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="sol:89" class="idref" href="#sol:89"><span class="id" title="binder">sol</span></a>, <a class="idref" href="Checker.Spec.html#ProofFacts.fact_valid"><span class="id" title="definition">fact_valid</span></a> <a class="idref" href="Checker.Deduction.html#sol:89"><span class="id" title="variable">sol</span></a> <a class="idref" href="Checker.Deduction.html#stronger:88"><span class="id" title="variable">stronger</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.fact_valid"><span class="id" title="definition">fact_valid</span></a> <a class="idref" href="Checker.Deduction.html#sol:89"><span class="id" title="variable">sol</span></a> <a class="idref" href="Checker.Deduction.html#weaker:87"><span class="id" title="variable">weaker</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">weaker</span> <span class="id" title="var">stronger</span> <span class="id" title="var">Hequiv</span> <span class="id" title="var">sol</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Deduction.html#fact_implies_fact"><span class="id" title="definition">fact_implies_fact</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hequiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Deduction.html#infer_domains"><span class="id" title="definition">infer_domains</span></a> <span class="id" title="var">weaker</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">dom_weaker</span> <span class="id" title="var">str_weaker</span>] | ] <span class="id" title="var">eqn</span>:<span class="id" title="var">Eweaker</span> ;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Deduction.html#infer_domains"><span class="id" title="definition">infer_domains</span></a> <span class="id" title="var">stronger</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">dom_stronger</span> <span class="id" title="var">str_stronger</span>] | ] <span class="id" title="var">eqn</span>:<span class="id" title="var">Estronger</span> ;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hequiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Utility.html#Maps.smap_prps.equal_2"><span class="id" title="lemma">smap_prps.equal_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hequiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Deduction.html#infer_domains_correct"><span class="id" title="lemma">infer_domains_correct</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">doms</span> := <span class="id" title="var">dom_stronger</span>) ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Estronger</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Deduction.html#infer_domains_correct"><span class="id" title="lemma">infer_domains_correct</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">doms</span> := <span class="id" title="var">dom_weaker</span>) ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">Eweaker</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Deduction.html#subset_domains"><span class="id" title="lemma">subset_domains</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">sol</span> := <span class="id" title="var">sol</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hequiv</span> ; <span class="id" title="var">easy</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="equiv" class="idref" href="#equiv"><span class="id" title="definition">equiv</span></a> (<a id="lhs:90" class="idref" href="#lhs:90"><span class="id" title="binder">lhs</span></a> : <a class="idref" href="Checker.Spec.html#ProofFacts.ProofFact"><span class="id" title="record">ProofFact</span></a>) (<a id="rhs:91" class="idref" href="#rhs:91"><span class="id" title="binder">rhs</span></a> : <a class="idref" href="Checker.Spec.html#ProofFacts.ProofFact"><span class="id" title="record">ProofFact</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> (<a class="idref" href="Checker.Deduction.html#infer_domains"><span class="id" title="definition">infer_domains</span></a> <a class="idref" href="Checker.Deduction.html#lhs:90"><span class="id" title="variable">lhs</span></a>), (<a class="idref" href="Checker.Deduction.html#infer_domains"><span class="id" title="definition">infer_domains</span></a> <a class="idref" href="Checker.Deduction.html#rhs:91"><span class="id" title="variable">rhs</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">lhs_doms</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">rhs_doms</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Utility.html#Maps.smap.equal"><span class="id" title="definition">smap.equal</span></a> <a class="idref" href="Checker.Domain.html#eqb"><span class="id" title="definition">Domain.eqb</span></a> <span class="id" title="var">lhs_doms</span> <span class="id" title="var">rhs_doms</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="equiv_implies_equisat" class="idref" href="#equiv_implies_equisat"><span class="id" title="lemma">equiv_implies_equisat</span></a> : <span class="id" title="keyword">forall</span> <a id="lhs:92" class="idref" href="#lhs:92"><span class="id" title="binder">lhs</span></a> <a id="rhs:93" class="idref" href="#rhs:93"><span class="id" title="binder">rhs</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Deduction.html#equiv"><span class="id" title="definition">equiv</span></a> <a class="idref" href="Checker.Deduction.html#lhs:92"><span class="id" title="variable">lhs</span></a> <a class="idref" href="Checker.Deduction.html#rhs:93"><span class="id" title="variable">rhs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="sol:94" class="idref" href="#sol:94"><span class="id" title="binder">sol</span></a>, <a class="idref" href="Checker.Spec.html#ProofFacts.fact_valid"><span class="id" title="definition">fact_valid</span></a> <a class="idref" href="Checker.Deduction.html#sol:94"><span class="id" title="variable">sol</span></a> <a class="idref" href="Checker.Deduction.html#lhs:92"><span class="id" title="variable">lhs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.fact_valid"><span class="id" title="definition">fact_valid</span></a> <a class="idref" href="Checker.Deduction.html#sol:94"><span class="id" title="variable">sol</span></a> <a class="idref" href="Checker.Deduction.html#rhs:93"><span class="id" title="variable">rhs</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">lhs</span> <span class="id" title="var">rhs</span> <span class="id" title="var">Hequiv</span> <span class="id" title="var">sol</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Deduction.html#equiv"><span class="id" title="definition">equiv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hequiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Deduction.html#infer_domains"><span class="id" title="definition">infer_domains</span></a> <span class="id" title="var">lhs</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">dom_lhs</span> <span class="id" title="var">str_lhs</span>] | ] <span class="id" title="var">eqn</span>:<span class="id" title="var">Elhs</span> ;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Deduction.html#infer_domains"><span class="id" title="definition">infer_domains</span></a> <span class="id" title="var">rhs</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">dom_rhs</span> <span class="id" title="var">str_rhs</span>] | ] <span class="id" title="var">eqn</span>:<span class="id" title="var">Erhs</span> ;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hequiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Utility.html#Maps.smap_prps.equal_2"><span class="id" title="lemma">smap_prps.equal_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hequiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Deduction.html#equiv_domains"><span class="id" title="lemma">equiv_domains</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">sol</span> := <span class="id" title="var">sol</span> )<span class="id" title="tactic">in</span> <span class="id" title="var">Hequiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Deduction.html#infer_domains_correct"><span class="id" title="lemma">infer_domains_correct</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">doms</span> := <span class="id" title="var">dom_lhs</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Deduction.html#infer_domains_correct"><span class="id" title="lemma">infer_domains_correct</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">doms</span> := <span class="id" title="var">dom_rhs</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hequiv</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">Erhs</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">Elhs</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/coq-community/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
