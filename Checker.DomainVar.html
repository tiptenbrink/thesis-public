<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="./coqdocjs/resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="./coqdocjs/resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="./coqdocjs/resources/config.js"></script>
<script type="text/javascript" src="./coqdocjs/resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://redirect.tipten.nl/checker-project/">Project Page</a>
      <a href="./index.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Checker.DomainVar</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.ZArith.html#"><span class="id" title="library">Coq.ZArith.ZArith</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Strings.String.html#"><span class="id" title="library">String</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#"><span class="id" title="library">Coq.Lists.List</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Arith.PeanoNat.html#"><span class="id" title="library">Arith.PeanoNat</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Bool.Bool.html#"><span class="id" title="library">Bool</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.micromega.Lia.html#"><span class="id" title="library">Lia</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Checker.Utility.html#"><span class="id" title="library">Checker.Utility</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Checker.Utility.html#ListEx"><span class="id" title="module">Utility.ListEx</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Checker.Utility.html#ListInd"><span class="id" title="module">Utility.ListInd</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Checker.Utility.html#Maps"><span class="id" title="module">Utility.Maps</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Checker.Utility.html#Tactics"><span class="id" title="module">Utility.Tactics</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Checker.Utility.html#Sets"><span class="id" title="module">Utility.Sets</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Checker.Domain.html#"><span class="id" title="library">Checker.Domain</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Checker.Zext.html#"><span class="id" title="library">Checker.Zext</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Checker.Spec.html#"><span class="id" title="library">Checker.Spec</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Checker.Spec.html#ProofFacts"><span class="id" title="module">Spec.ProofFacts</span></a>.<br/>

<br/>
</div>

<div class="doc">
This file adds variables to domains and the idea that atomic constraints can apply only to particular variables. It also provides functions to convert a list of atomic constraints into a map of domains, for which we use MMaps (defined in the Maps module in the Utility file). 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="Domains" class="idref" href="#Domains"><span class="id" title="definition">Domains</span></a> := <a class="idref" href="Checker.Utility.html#Maps.smap.t"><span class="id" title="definition">smap.t</span></a> <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="included_doms" class="idref" href="#included_doms"><span class="id" title="definition">included_doms</span></a> (<a id="doms:1" class="idref" href="#doms:1"><span class="id" title="binder">doms</span></a> : <a class="idref" href="Checker.DomainVar.html#Domains"><span class="id" title="definition">Domains</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a>) := <a class="idref" href="Checker.Utility.html#Maps.smap.bindings"><span class="id" title="definition">smap.bindings</span></a> <a class="idref" href="Checker.DomainVar.html#doms:1"><span class="id" title="variable">doms</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="dom_from_domains" class="idref" href="#dom_from_domains"><span class="id" title="definition">dom_from_domains</span></a> (<a id="m:2" class="idref" href="#m:2"><span class="id" title="binder">m</span></a> : <a class="idref" href="Checker.DomainVar.html#Domains"><span class="id" title="definition">Domains</span></a>) (<a id="x:3" class="idref" href="#x:3"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) : <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Utility.html#ListEx.option_default"><span class="id" title="definition">option_default</span></a> <a class="idref" href="Checker.Domain.html#initial_dom"><span class="id" title="definition">initial_dom</span></a> (<a class="idref" href="Checker.Utility.html#Maps.smap.find"><span class="id" title="definition">smap.find</span></a> <a class="idref" href="Checker.DomainVar.html#x:3"><span class="id" title="variable">x</span></a> <a class="idref" href="Checker.DomainVar.html#m:2"><span class="id" title="variable">m</span></a>).<br/>

<br/>
<span class="id" title="keyword">Declare Scope</span> <span class="id" title="var">Domain_scope</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Domain_scope</span>.<br/>
<span class="id" title="keyword">Infix</span> <a id="::Domain_scope:x_'d-&gt;'_x" class="idref" href="#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">&quot;</span></a>d-&gt;" := <a class="idref" href="Checker.DomainVar.html#dom_from_domains"><span class="id" title="definition">dom_from_domains</span></a> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 65) : <span class="id" title="var">Domain_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="dom_from_domains_if_in" class="idref" href="#dom_from_domains_if_in"><span class="id" title="lemma">dom_from_domains_if_in</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="doms:4" class="idref" href="#doms:4"><span class="id" title="binder">doms</span></a> <a id="x:5" class="idref" href="#x:5"><span class="id" title="binder">x</span></a> <a id="dom:6" class="idref" href="#dom:6"><span class="id" title="binder">dom</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Checker.DomainVar.html#x:5"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Checker.DomainVar.html#dom:6"><span class="id" title="variable">dom</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<a class="idref" href="Checker.DomainVar.html#included_doms"><span class="id" title="definition">included_doms</span></a> <a class="idref" href="Checker.DomainVar.html#doms:4"><span class="id" title="variable">doms</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Checker.DomainVar.html#doms:4"><span class="id" title="variable">doms</span></a> <a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">d</span></a><a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Checker.DomainVar.html#x:5"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Checker.DomainVar.html#dom:6"><span class="id" title="variable">dom</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">doms</span> <span class="id" title="var">x</span> <span class="id" title="var">dom</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Utility.html#Maps.smap_in_spec"><span class="id" title="lemma">smap_in_spec</span></a>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Utility.html#Maps.smap.find_spec"><span class="id" title="lemma">smap.find_spec</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.DomainVar.html#dom_from_domains"><span class="id" title="definition">dom_from_domains</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="doms_maps_or_not_included" class="idref" href="#doms_maps_or_not_included"><span class="id" title="lemma">doms_maps_or_not_included</span></a> (<a id="doms:7" class="idref" href="#doms:7"><span class="id" title="binder">doms</span></a> : <a class="idref" href="Checker.DomainVar.html#Domains"><span class="id" title="definition">Domains</span></a>) (<a id="x:8" class="idref" href="#x:8"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a><a class="idref" href="Checker.Utility.html#Maps.smap.MapsTo"><span class="id" title="definition">smap.MapsTo</span></a> <a class="idref" href="Checker.DomainVar.html#x:8"><span class="id" title="variable">x</span></a> (<a class="idref" href="Checker.DomainVar.html#doms:7"><span class="id" title="variable">doms</span></a> <a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">d</span></a><a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Checker.DomainVar.html#x:8"><span class="id" title="variable">x</span></a>) <a class="idref" href="Checker.DomainVar.html#doms:7"><span class="id" title="variable">doms</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">{</span></a><a class="idref" href="Checker.DomainVar.html#doms:7"><span class="id" title="variable">doms</span></a> <a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">d</span></a><a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Checker.DomainVar.html#x:8"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Checker.Domain.html#initial_dom"><span class="id" title="definition">initial_dom</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="keyword">forall</span> <a id="dom:9" class="idref" href="#dom:9"><span class="id" title="binder">dom</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Checker.DomainVar.html#x:8"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Checker.DomainVar.html#dom:9"><span class="id" title="variable">dom</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<a class="idref" href="Checker.DomainVar.html#included_doms"><span class="id" title="definition">included_doms</span></a> <a class="idref" href="Checker.DomainVar.html#doms:7"><span class="id" title="variable">doms</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Specif.html#87727981cdc1579fef00b9d9c1d3b9da"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.DomainVar.html#dom_from_domains"><span class="id" title="definition">dom_from_domains</span></a>. <span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Utility.html#Maps.smap.find"><span class="id" title="definition">smap.find</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">Hfind</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">left</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Utility.html#Maps.smap.find_spec"><span class="id" title="lemma">smap.find_spec</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">right</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">dom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Utility.html#Maps.find_none_bindings"><span class="id" title="lemma">find_none_bindings</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hfind</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="from_var_atoms" class="idref" href="#from_var_atoms"><span class="id" title="definition">from_var_atoms</span></a> (<a id="x:10" class="idref" href="#x:10"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<a id="atoms:11" class="idref" href="#atoms:11"><span class="id" title="binder">atoms</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.BoundAtomic"><span class="id" title="definition">BoundAtomic</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.Atomic"><span class="id" title="record">Atomic</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Utility.html#Maps.filter_pair_on_key"><span class="id" title="definition">filter_pair_on_key</span></a> <a class="idref" href="Checker.DomainVar.html#x:10"><span class="id" title="variable">x</span></a> <a class="idref" href="Checker.DomainVar.html#atoms:11"><span class="id" title="variable">atoms</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="applied_dom" class="idref" href="#applied_dom"><span class="id" title="definition">applied_dom</span></a> (<a id="x:12" class="idref" href="#x:12"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<a id="atoms:13" class="idref" href="#atoms:13"><span class="id" title="binder">atoms</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.BoundAtomic"><span class="id" title="definition">BoundAtomic</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#apply_atomics"><span class="id" title="definition">apply_atomics</span></a> (<a class="idref" href="Checker.DomainVar.html#from_var_atoms"><span class="id" title="definition">from_var_atoms</span></a> <a class="idref" href="Checker.DomainVar.html#x:12"><span class="id" title="variable">x</span></a> <a class="idref" href="Checker.DomainVar.html#atoms:13"><span class="id" title="variable">atoms</span></a>) <a class="idref" href="Checker.Domain.html#initial_dom"><span class="id" title="definition">initial_dom</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="valid_domains" class="idref" href="#valid_domains"><span class="id" title="definition">valid_domains</span></a> (<a id="doms:14" class="idref" href="#doms:14"><span class="id" title="binder">doms</span></a> : <a class="idref" href="Checker.DomainVar.html#Domains"><span class="id" title="definition">Domains</span></a>) (<a id="atoms:15" class="idref" href="#atoms:15"><span class="id" title="binder">atoms</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.BoundAtomic"><span class="id" title="definition">BoundAtomic</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="x:16" class="idref" href="#x:16"><span class="id" title="binder">x</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#dom_equiv"><span class="id" title="definition">dom_equiv</span></a> (<a class="idref" href="Checker.DomainVar.html#doms:14"><span class="id" title="variable">doms</span></a> <a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">d</span></a><a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Checker.DomainVar.html#x:16"><span class="id" title="variable">x</span></a>) (<a class="idref" href="Checker.DomainVar.html#applied_dom"><span class="id" title="definition">applied_dom</span></a> <a class="idref" href="Checker.DomainVar.html#x:16"><span class="id" title="variable">x</span></a> <a class="idref" href="Checker.DomainVar.html#atoms:15"><span class="id" title="variable">atoms</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="include_all" class="idref" href="#include_all"><span class="id" title="definition">include_all</span></a> (<a id="x:17" class="idref" href="#x:17"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) := <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="include_all_true" class="idref" href="#include_all_true"><span class="id" title="lemma">include_all_true</span></a> (<a id="x:18" class="idref" href="#x:18"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="Checker.DomainVar.html#include_all"><span class="id" title="definition">include_all</span></a> <a class="idref" href="Checker.DomainVar.html#x:18"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="tightened_doms" class="idref" href="#tightened_doms"><span class="id" title="definition">tightened_doms</span></a> (<a id="doms:19" class="idref" href="#doms:19"><span class="id" title="binder">doms</span></a> : <a class="idref" href="Checker.DomainVar.html#Domains"><span class="id" title="definition">Domains</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="x:20" class="idref" href="#x:20"><span class="id" title="binder">x</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#dom_tightened"><span class="id" title="definition">dom_tightened</span></a> (<a class="idref" href="Checker.DomainVar.html#doms:19"><span class="id" title="variable">doms</span></a> <a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">d</span></a><a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Checker.DomainVar.html#x:20"><span class="id" title="variable">x</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="build_atoms_map" class="idref" href="#build_atoms_map"><span class="id" title="definition">build_atoms_map</span></a> (<a id="atoms:21" class="idref" href="#atoms:21"><span class="id" title="binder">atoms</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.BoundAtomic"><span class="id" title="definition">BoundAtomic</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Utility.html#Maps.map_from_prod_list"><span class="id" title="definition">map_from_prod_list</span></a> <a class="idref" href="Checker.DomainVar.html#include_all"><span class="id" title="definition">include_all</span></a> <a class="idref" href="Checker.DomainVar.html#atoms:21"><span class="id" title="variable">atoms</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="dom_from_initial" class="idref" href="#dom_from_initial"><span class="id" title="definition">dom_from_initial</span></a> (<a id="atoms:22" class="idref" href="#atoms:22"><span class="id" title="binder">atoms</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.Atomic"><span class="id" title="record">Atomic</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#apply_atomics"><span class="id" title="definition">apply_atomics</span></a> <a class="idref" href="Checker.DomainVar.html#atoms:22"><span class="id" title="variable">atoms</span></a> <a class="idref" href="Checker.Domain.html#initial_dom"><span class="id" title="definition">initial_dom</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="domains_from_atomics" class="idref" href="#domains_from_atomics"><span class="id" title="definition">domains_from_atomics</span></a> (<a id="atoms:23" class="idref" href="#atoms:23"><span class="id" title="binder">atoms</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.BoundAtomic"><span class="id" title="definition">BoundAtomic</span></a>) : <a class="idref" href="Checker.DomainVar.html#Domains"><span class="id" title="definition">Domains</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="atoms_map:24" class="idref" href="#atoms_map:24"><span class="id" title="binder">atoms_map</span></a> := <a class="idref" href="Checker.DomainVar.html#build_atoms_map"><span class="id" title="definition">build_atoms_map</span></a> <a class="idref" href="Checker.DomainVar.html#atoms:23"><span class="id" title="variable">atoms</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Utility.html#Maps.smap.map"><span class="id" title="definition">smap.map</span></a> <a class="idref" href="Checker.DomainVar.html#dom_from_initial"><span class="id" title="definition">dom_from_initial</span></a> <a class="idref" href="Checker.DomainVar.html#atoms_map:24"><span class="id" title="variable">atoms_map</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="dom_equiv_initial" class="idref" href="#dom_equiv_initial"><span class="id" title="lemma">dom_equiv_initial</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="atoms:25" class="idref" href="#atoms:25"><span class="id" title="binder">atoms</span></a> <a id="atoms':26" class="idref" href="#atoms':26"><span class="id" title="binder">atoms'</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="a:27" class="idref" href="#a:27"><span class="id" title="binder">a</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Checker.DomainVar.html#a:27"><span class="id" title="variable">a</span></a> <a class="idref" href="Checker.DomainVar.html#atoms:25"><span class="id" title="variable">atoms</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Checker.DomainVar.html#a:27"><span class="id" title="variable">a</span></a> <a class="idref" href="Checker.DomainVar.html#atoms':26"><span class="id" title="variable">atoms'</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#dom_equiv"><span class="id" title="definition">dom_equiv</span></a> (<a class="idref" href="Checker.Domain.html#apply_atomics"><span class="id" title="definition">apply_atomics</span></a> <a class="idref" href="Checker.DomainVar.html#atoms:25"><span class="id" title="variable">atoms</span></a> <a class="idref" href="Checker.Domain.html#initial_dom"><span class="id" title="definition">initial_dom</span></a>) (<a class="idref" href="Checker.Domain.html#apply_atomics"><span class="id" title="definition">apply_atomics</span></a> <a class="idref" href="Checker.DomainVar.html#atoms':26"><span class="id" title="variable">atoms'</span></a> <a class="idref" href="Checker.Domain.html#initial_dom"><span class="id" title="definition">initial_dom</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">atoms</span> <span class="id" title="var">atoms'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hatoms</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#dom_equiv"><span class="id" title="definition">dom_equiv</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="Checker.Domain.html#dom_effect_atomics"><span class="id" title="lemma">dom_effect_atomics</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Hatoms</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="domains_from_atomics_correct" class="idref" href="#domains_from_atomics_correct"><span class="id" title="lemma">domains_from_atomics_correct</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="atoms:28" class="idref" href="#atoms:28"><span class="id" title="binder">atoms</span></a> <a id="doms:29" class="idref" href="#doms:29"><span class="id" title="binder">doms</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Checker.DomainVar.html#doms:29"><span class="id" title="variable">doms</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Checker.DomainVar.html#domains_from_atomics"><span class="id" title="definition">domains_from_atomics</span></a> <a class="idref" href="Checker.DomainVar.html#atoms:28"><span class="id" title="variable">atoms</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Checker.DomainVar.html#valid_domains"><span class="id" title="definition">valid_domains</span></a> <a class="idref" href="Checker.DomainVar.html#doms:29"><span class="id" title="variable">doms</span></a> <a class="idref" href="Checker.DomainVar.html#atoms:28"><span class="id" title="variable">atoms</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">atoms</span> <span class="id" title="var">doms</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hdoms</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.DomainVar.html#domains_from_atomics"><span class="id" title="definition">domains_from_atomics</span></a>, <a class="idref" href="Checker.DomainVar.html#build_atoms_map"><span class="id" title="definition">build_atoms_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdoms</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.DomainVar.html#doms_maps_or_not_included"><span class="id" title="lemma">doms_maps_or_not_included</span></a> <span class="id" title="var">doms</span> <span class="id" title="var">x</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hmaps</span> | (<span class="id" title="var">Hinitial</span> &amp; <span class="id" title="var">Hnincluded</span>)].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Utility.html#Maps.smap_in_spec"><span class="id" title="lemma">smap_in_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmaps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">doms</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Utility.html#Maps.smap.map_spec"><span class="id" title="lemma">smap.map_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmaps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmaps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hmaps</span> <span class="id" title="keyword">as</span> ((<span class="id" title="var">x'</span> &amp; <span class="id" title="var">xatoms</span>) &amp; <span class="id" title="var">H'</span> &amp; <span class="id" title="var">Hin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H'</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">x'</span>; <span class="id" title="tactic">clear</span> -<span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.DomainVar.html#dom_from_initial"><span class="id" title="definition">dom_from_initial</span></a>, <a class="idref" href="Checker.DomainVar.html#applied_dom"><span class="id" title="definition">applied_dom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.DomainVar.html#dom_equiv_initial"><span class="id" title="lemma">dom_equiv_initial</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Utility.html#Maps.in_map_prod_list"><span class="id" title="lemma">in_map_prod_list</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">a</span> := <span class="id" title="var">a</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hinitial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.DomainVar.html#applied_dom"><span class="id" title="definition">applied_dom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<a class="idref" href="Checker.DomainVar.html#from_var_atoms"><span class="id" title="definition">from_var_atoms</span></a> <span class="id" title="var">x</span> <span class="id" title="var">atoms</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Utility.html#Maps.filter_pair_on_key_no_x"><span class="id" title="lemma">filter_pair_on_key_no_x</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Utility.html#Maps.smap.find"><span class="id" title="definition">smap.find</span></a> <span class="id" title="var">x</span> (<a class="idref" href="Checker.Utility.html#Maps.map_from_prod_list"><span class="id" title="definition">map_from_prod_list</span></a> <a class="idref" href="Checker.DomainVar.html#include_all"><span class="id" title="definition">include_all</span></a> <span class="id" title="var">atoms</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">atoms'</span> |] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hfindprod</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hnincluded</span> (<a class="idref" href="Checker.DomainVar.html#dom_from_initial"><span class="id" title="definition">dom_from_initial</span></a> <span class="id" title="var">atoms'</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hnincluded</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">doms</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.DomainVar.html#included_doms"><span class="id" title="definition">included_doms</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Utility.html#Maps.smap.map_spec"><span class="id" title="lemma">smap.map_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">atoms'</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Utility.html#Maps.smap_in_spec"><span class="id" title="lemma">smap_in_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Utility.html#Maps.smap.find_spec"><span class="id" title="lemma">smap.find_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hfindprod</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">clear</span> -<span class="id" title="var">Hfindprod</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> <a class="idref" href="Checker.Utility.html#Maps.map_from_prod_list_spec"><span class="id" title="lemma">map_from_prod_list_spec</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">Hprod_spec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Utility.html#Maps.map_from_prod_list_P"><span class="id" title="definition">map_from_prod_list_P</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hprod_spec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hprod_spec</span> <span class="id" title="var">_</span> <a class="idref" href="Checker.DomainVar.html#include_all"><span class="id" title="definition">include_all</span></a> <span class="id" title="var">atoms</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hfindprod</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hprod_spec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hprod_spec</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="domains_from_atomics_if_in" class="idref" href="#domains_from_atomics_if_in"><span class="id" title="lemma">domains_from_atomics_if_in</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="atoms:30" class="idref" href="#atoms:30"><span class="id" title="binder">atoms</span></a> <a id="x:31" class="idref" href="#x:31"><span class="id" title="binder">x</span></a> <a id="dom:32" class="idref" href="#dom:32"><span class="id" title="binder">dom</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Checker.DomainVar.html#x:31"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Checker.DomainVar.html#dom:32"><span class="id" title="variable">dom</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<a class="idref" href="Checker.Utility.html#Maps.smap.bindings"><span class="id" title="definition">smap.bindings</span></a> (<a class="idref" href="Checker.DomainVar.html#domains_from_atomics"><span class="id" title="definition">domains_from_atomics</span></a> <a class="idref" href="Checker.DomainVar.html#atoms:30"><span class="id" title="variable">atoms</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="atom:33" class="idref" href="#atom:33"><span class="id" title="binder">atom</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Checker.DomainVar.html#atom:33"><span class="id" title="variable">atom</span></a> (<a class="idref" href="Checker.DomainVar.html#from_var_atoms"><span class="id" title="definition">from_var_atoms</span></a> <a class="idref" href="Checker.DomainVar.html#x:31"><span class="id" title="variable">x</span></a> <a class="idref" href="Checker.DomainVar.html#atoms:30"><span class="id" title="variable">atoms</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">atoms</span> <span class="id" title="var">x</span> <span class="id" title="var">dom</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.DomainVar.html#domains_from_atomics"><span class="id" title="definition">domains_from_atomics</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Utility.html#Maps.smap.map_spec"><span class="id" title="lemma">smap.map_spec</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ((<span class="id" title="var">x'</span> &amp; <span class="id" title="var">xatoms</span>) &amp; <span class="id" title="var">H'</span> &amp; <span class="id" title="var">Hin</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H'</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.DomainVar.html#build_atoms_map"><span class="id" title="definition">build_atoms_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="Checker.Utility.html#Maps.in_map_prod_list"><span class="id" title="lemma">in_map_prod_list</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Hin</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hnnil</span> <span class="id" title="var">Hinfilter</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">xatoms</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hinfilter</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">left</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="check_domains_consistent" class="idref" href="#check_domains_consistent"><span class="id" title="definition">check_domains_consistent</span></a> (<a id="doms:34" class="idref" href="#doms:34"><span class="id" title="binder">doms</span></a> : <a class="idref" href="Checker.DomainVar.html#Domains"><span class="id" title="definition">Domains</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Utility.html#Maps.smap.for_all"><span class="id" title="definition">smap.for_all</span></a> (<span class="id" title="keyword">fun</span> <a id="x:35" class="idref" href="#x:35"><span class="id" title="binder">x</span></a> <a id="dom:36" class="idref" href="#dom:36"><span class="id" title="binder">dom</span></a> =&gt; <a class="idref" href="Checker.Domain.html#dom_check_consistent"><span class="id" title="definition">dom_check_consistent</span></a> <a class="idref" href="Checker.DomainVar.html#dom:36"><span class="id" title="variable">dom</span></a>) <a class="idref" href="Checker.DomainVar.html#doms:34"><span class="id" title="variable">doms</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="initial_consistent" class="idref" href="#initial_consistent"><span class="id" title="lemma">initial_consistent</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#dom_consistent"><span class="id" title="definition">dom_consistent</span></a> <a class="idref" href="Checker.Domain.html#initial_dom"><span class="id" title="definition">initial_dom</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> 0. <span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a>, <a class="idref" href="Checker.Domain.html#initial_dom"><span class="id" title="definition">initial_dom</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="var">easy</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="dom_consistent_if_valid_atoms" class="idref" href="#dom_consistent_if_valid_atoms"><span class="id" title="lemma">dom_consistent_if_valid_atoms</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="sol:37" class="idref" href="#sol:37"><span class="id" title="binder">sol</span></a> <a id="atoms:38" class="idref" href="#atoms:38"><span class="id" title="binder">atoms</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Spec.html#ProofFacts.valid_atoms"><span class="id" title="definition">valid_atoms</span></a> <a class="idref" href="Checker.DomainVar.html#sol:37"><span class="id" title="variable">sol</span></a> <a class="idref" href="Checker.DomainVar.html#atoms:38"><span class="id" title="variable">atoms</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="x:39" class="idref" href="#x:39"><span class="id" title="binder">x</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#dom_consistent"><span class="id" title="definition">dom_consistent</span></a> (<a class="idref" href="Checker.DomainVar.html#applied_dom"><span class="id" title="definition">applied_dom</span></a> <a class="idref" href="Checker.DomainVar.html#x:39"><span class="id" title="variable">x</span></a> <a class="idref" href="Checker.DomainVar.html#atoms:38"><span class="id" title="variable">atoms</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">sol</span> <span class="id" title="var">atoms</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Hatoms</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">sol</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.DomainVar.html#applied_dom"><span class="id" title="definition">applied_dom</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Domain.html#dom_effect_atomics"><span class="id" title="lemma">dom_effect_atomics</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hatoms</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Utility.html#Maps.filter_pair_on_key_spec"><span class="id" title="lemma">filter_pair_on_key_spec</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hin</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="domains_consistent_if_valid_atoms" class="idref" href="#domains_consistent_if_valid_atoms"><span class="id" title="lemma">domains_consistent_if_valid_atoms</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="sol:40" class="idref" href="#sol:40"><span class="id" title="binder">sol</span></a> <a id="atoms:41" class="idref" href="#atoms:41"><span class="id" title="binder">atoms</span></a> <a id="doms:42" class="idref" href="#doms:42"><span class="id" title="binder">doms</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Spec.html#ProofFacts.valid_atoms"><span class="id" title="definition">valid_atoms</span></a> <a class="idref" href="Checker.DomainVar.html#sol:40"><span class="id" title="variable">sol</span></a> <a class="idref" href="Checker.DomainVar.html#atoms:41"><span class="id" title="variable">atoms</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.DomainVar.html#valid_domains"><span class="id" title="definition">valid_domains</span></a> <a class="idref" href="Checker.DomainVar.html#doms:42"><span class="id" title="variable">doms</span></a> <a class="idref" href="Checker.DomainVar.html#atoms:41"><span class="id" title="variable">atoms</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="x:43" class="idref" href="#x:43"><span class="id" title="binder">x</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#dom_consistent"><span class="id" title="definition">dom_consistent</span></a> (<a class="idref" href="Checker.DomainVar.html#doms:42"><span class="id" title="variable">doms</span></a> <a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">d</span></a><a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Checker.DomainVar.html#x:43"><span class="id" title="variable">x</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">sol</span> <span class="id" title="var">atoms</span> <span class="id" title="var">doms</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hatoms</span> <span class="id" title="var">Hdoms</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">Hdoms</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.DomainVar.html#dom_consistent_if_valid_atoms"><span class="id" title="lemma">dom_consistent_if_valid_atoms</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">sol</span> := <span class="id" title="var">sol</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hatoms</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="inconsistent_contradiction" class="idref" href="#inconsistent_contradiction"><span class="id" title="lemma">inconsistent_contradiction</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="sol:44" class="idref" href="#sol:44"><span class="id" title="binder">sol</span></a> <a id="atoms:45" class="idref" href="#atoms:45"><span class="id" title="binder">atoms</span></a> <a id="doms:46" class="idref" href="#doms:46"><span class="id" title="binder">doms</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Spec.html#ProofFacts.valid_atoms"><span class="id" title="definition">valid_atoms</span></a> <a class="idref" href="Checker.DomainVar.html#sol:44"><span class="id" title="variable">sol</span></a> <a class="idref" href="Checker.DomainVar.html#atoms:45"><span class="id" title="variable">atoms</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.DomainVar.html#valid_domains"><span class="id" title="definition">valid_domains</span></a> <a class="idref" href="Checker.DomainVar.html#doms:46"><span class="id" title="variable">doms</span></a> <a class="idref" href="Checker.DomainVar.html#atoms:45"><span class="id" title="variable">atoms</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.DomainVar.html#check_domains_consistent"><span class="id" title="definition">check_domains_consistent</span></a> <a class="idref" href="Checker.DomainVar.html#doms:46"><span class="id" title="variable">doms</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">sol</span> <span class="id" title="var">atoms</span> <span class="id" title="var">doms</span> <span class="id" title="var">Hatoms</span> <span class="id" title="var">Hdoms</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.DomainVar.html#check_domains_consistent"><span class="id" title="definition">check_domains_consistent</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Utility.html#Maps.smap.for_all_spec"><span class="id" title="lemma">smap.for_all_spec</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hfalse</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Utility.html#ListEx.forallb_false"><span class="id" title="lemma">forallb_false</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hfalse</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hfalse</span> <span class="id" title="keyword">as</span> ((<span class="id" title="var">x</span> &amp; <span class="id" title="var">xdom</span>) &amp; <span class="id" title="var">Hindoms</span> &amp; <span class="id" title="var">Hcheck</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#dom_inconsistent_if_checked_false"><span class="id" title="lemma">dom_inconsistent_if_checked_false</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcheck</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hcheck</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.DomainVar.html#dom_from_domains_if_in"><span class="id" title="lemma">dom_from_domains_if_in</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hindoms</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Hindoms</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.DomainVar.html#domains_consistent_if_valid_atoms"><span class="id" title="lemma">domains_consistent_if_valid_atoms</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">sol</span> := <span class="id" title="var">sol</span>) (<span class="id" title="var">atoms</span> := <span class="id" title="var">atoms</span>); <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="tighten_doms" class="idref" href="#tighten_doms"><span class="id" title="definition">tighten_doms</span></a> (<a id="doms:47" class="idref" href="#doms:47"><span class="id" title="binder">doms</span></a> : <a class="idref" href="Checker.DomainVar.html#Domains"><span class="id" title="definition">Domains</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Utility.html#Maps.smap.map"><span class="id" title="definition">smap.map</span></a> <a class="idref" href="Checker.Domain.html#tighten_dom"><span class="id" title="definition">tighten_dom</span></a> <a class="idref" href="Checker.DomainVar.html#doms:47"><span class="id" title="variable">doms</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="tighten_doms_equiv" class="idref" href="#tighten_doms_equiv"><span class="id" title="definition">tighten_doms_equiv</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="doms:48" class="idref" href="#doms:48"><span class="id" title="binder">doms</span></a> <a id="x:49" class="idref" href="#x:49"><span class="id" title="binder">x</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#dom_equiv"><span class="id" title="definition">dom_equiv</span></a> (<a class="idref" href="Checker.DomainVar.html#tighten_doms"><span class="id" title="definition">tighten_doms</span></a> <a class="idref" href="Checker.DomainVar.html#doms:48"><span class="id" title="variable">doms</span></a> <a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">d</span></a><a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Checker.DomainVar.html#x:49"><span class="id" title="variable">x</span></a>) (<a class="idref" href="Checker.DomainVar.html#doms:48"><span class="id" title="variable">doms</span></a> <a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">d</span></a><a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Checker.DomainVar.html#x:49"><span class="id" title="variable">x</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">doms</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.DomainVar.html#doms_maps_or_not_included"><span class="id" title="lemma">doms_maps_or_not_included</span></a> (<a class="idref" href="Checker.DomainVar.html#tighten_doms"><span class="id" title="definition">tighten_doms</span></a> <span class="id" title="var">doms</span>) <span class="id" title="var">x</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hmaps</span> | (<span class="id" title="var">Hinitial</span> &amp; <span class="id" title="var">Hnincluded</span>)].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Utility.html#Maps.smap_in_spec"><span class="id" title="lemma">smap_in_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmaps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.DomainVar.html#tighten_doms"><span class="id" title="definition">tighten_doms</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Utility.html#Maps.smap.map_spec"><span class="id" title="lemma">smap.map_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmaps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmaps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hmaps</span> <span class="id" title="keyword">as</span> ((<span class="id" title="var">x'</span> &amp; <span class="id" title="var">dom_tight</span>) &amp; <span class="id" title="var">Htighten</span> &amp; <span class="id" title="var">Hin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htighten</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">x'</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Utility.html#Maps.smap_in_spec"><span class="id" title="lemma">smap_in_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Utility.html#Maps.smap.find_spec"><span class="id" title="lemma">smap.find_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.DomainVar.html#dom_from_domains"><span class="id" title="definition">dom_from_domains</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Domain.html#tighten_equiv"><span class="id" title="lemma">tighten_equiv</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.DomainVar.html#doms_maps_or_not_included"><span class="id" title="lemma">doms_maps_or_not_included</span></a> <span class="id" title="var">doms</span> <span class="id" title="var">x</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hmaps_doms</span> | (<span class="id" title="var">Hinitial_doms</span> &amp; <span class="id" title="var">Hnincluded_doms</span>)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hnincluded</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">dom</span> := (<a class="idref" href="Checker.Domain.html#tighten_dom"><span class="id" title="definition">tighten_dom</span></a> (<span class="id" title="var">doms</span> <a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">d</span></a><a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">x</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.DomainVar.html#included_doms"><span class="id" title="definition">included_doms</span></a>, <a class="idref" href="Checker.DomainVar.html#tighten_doms"><span class="id" title="definition">tighten_doms</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Utility.html#Maps.smap.map_spec"><span class="id" title="lemma">smap.map_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">doms</span> <a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">d</span></a><a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Utility.html#Maps.smap_in_spec"><span class="id" title="lemma">smap_in_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hmaps_doms</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hinitial_doms</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hinitial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="doms_apply_tighten" class="idref" href="#doms_apply_tighten"><span class="id" title="definition">doms_apply_tighten</span></a> (<a id="doms:50" class="idref" href="#doms:50"><span class="id" title="binder">doms</span></a> : <a class="idref" href="Checker.DomainVar.html#Domains"><span class="id" title="definition">Domains</span></a>) (<a id="atomic:51" class="idref" href="#atomic:51"><span class="id" title="binder">atomic</span></a> : <a class="idref" href="Checker.Spec.html#ProofFacts.BoundAtomic"><span class="id" title="definition">BoundAtomic</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="Checker.DomainVar.html#Domains"><span class="id" title="definition">Domains</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.DomainVar.html#atomic:51"><span class="id" title="variable">atomic</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">atom</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.Domain.html#apply_atomic_tighten"><span class="id" title="definition">apply_atomic_tighten</span></a> (<a class="idref" href="Checker.DomainVar.html#doms:50"><span class="id" title="variable">doms</span></a> <a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">d</span></a><a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">x</span>) <span class="id" title="var">atom</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">dom</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="Checker.Utility.html#Maps.smap.add"><span class="id" title="definition">smap.add</span></a> <span class="id" title="var">x</span> <span class="id" title="var">dom</span> <a class="idref" href="Checker.DomainVar.html#doms:50"><span class="id" title="variable">doms</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="doms_apply_tighten_step" class="idref" href="#doms_apply_tighten_step"><span class="id" title="lemma">doms_apply_tighten_step</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="doms:53" class="idref" href="#doms:53"><span class="id" title="binder">doms</span></a> <a id="atoms:54" class="idref" href="#atoms:54"><span class="id" title="binder">atoms</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.DomainVar.html#valid_domains"><span class="id" title="definition">valid_domains</span></a> <a class="idref" href="Checker.DomainVar.html#doms:53"><span class="id" title="variable">doms</span></a> <a class="idref" href="Checker.DomainVar.html#atoms:54"><span class="id" title="variable">atoms</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="x:55" class="idref" href="#x:55"><span class="id" title="binder">x</span></a> <a id="a:56" class="idref" href="#a:56"><span class="id" title="binder">a</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.DomainVar.html#doms_apply_tighten"><span class="id" title="definition">doms_apply_tighten</span></a> <a class="idref" href="Checker.DomainVar.html#doms:53"><span class="id" title="variable">doms</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Checker.DomainVar.html#x:55"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Checker.DomainVar.html#a:56"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="Checker.Domain.html#dom_consistent"><span class="id" title="definition">dom_consistent</span></a> (<a class="idref" href="Checker.DomainVar.html#applied_dom"><span class="id" title="definition">applied_dom</span></a> <a class="idref" href="Checker.DomainVar.html#x:55"><span class="id" title="variable">x</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Checker.DomainVar.html#x:55"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Checker.DomainVar.html#a:56"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="Checker.DomainVar.html#atoms:54"><span class="id" title="variable">atoms</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">doms'</span> =&gt; <a class="idref" href="Checker.DomainVar.html#valid_domains"><span class="id" title="definition">valid_domains</span></a> <span class="id" title="var">doms'</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Checker.DomainVar.html#x:55"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Checker.DomainVar.html#a:56"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="Checker.DomainVar.html#atoms:54"><span class="id" title="variable">atoms</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">doms</span> <span class="id" title="var">atoms</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">Hdoms</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">xatom</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.DomainVar.html#doms_apply_tighten"><span class="id" title="definition">doms_apply_tighten</span></a>. <span class="id" title="tactic">specialize</span> (<a class="idref" href="Checker.Domain.html#apply_atomic_tighten_valid"><span class="id" title="lemma">apply_atomic_tighten_valid</span></a> (<span class="id" title="var">doms</span> <a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">d</span></a><a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">x</span>) <span class="id" title="var">xatom</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hspec</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Domain.html#apply_atomic_tighten"><span class="id" title="definition">apply_atomic_tighten</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">dom</span>|].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.DomainVar.html#valid_domains"><span class="id" title="definition">valid_domains</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.DomainVar.html#applied_dom"><span class="id" title="definition">applied_dom</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.DomainVar.html#dom_from_domains"><span class="id" title="definition">dom_from_domains</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Strings.String.html#5886275aa8d678ebe8bc38ad41c652c0"><span class="id" title="notation">=?</span></a> <span class="id" title="var">x'</span>)%<span class="id" title="var">string</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Hxx'</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Strings.String.html#eqb_eq"><span class="id" title="lemma">String.eqb_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hxx'</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">x'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Utility.html#Maps.smap.add_spec1"><span class="id" title="lemma">smap.add_spec1</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hspec</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hspec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#dom_equiv"><span class="id" title="definition">dom_equiv</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Domain.html#apply_atomic_spec"><span class="id" title="lemma">apply_atomic_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Domain.html#dom_effect_atomics"><span class="id" title="lemma">dom_effect_atomics</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Domain.html#apply_atomic_spec"><span class="id" title="lemma">apply_atomic_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">Hdoms</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.DomainVar.html#applied_dom"><span class="id" title="definition">applied_dom</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Domain.html#dom_effect_atomics"><span class="id" title="lemma">dom_effect_atomics</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Strings.String.html#eqb_neq"><span class="id" title="lemma">String.eqb_neq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hxx'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Utility.html#Maps.smap.add_spec2"><span class="id" title="lemma">smap.add_spec2</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hdoms</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hconsistent</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hspec</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hconsistent</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">y</span> &amp; <span class="id" title="var">Hy</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">y</span>. <span class="id" title="var">revert</span> <span class="id" title="var">Hy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Domain.html#apply_atomic_spec"><span class="id" title="lemma">apply_atomic_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">Hdoms</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.DomainVar.html#applied_dom"><span class="id" title="definition">applied_dom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="Checker.Domain.html#dom_effect_atomics"><span class="id" title="lemma">dom_effect_atomics</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Strings.String.html#5886275aa8d678ebe8bc38ad41c652c0"><span class="id" title="notation">=?</span></a> <span class="id" title="var">x</span>)%<span class="id" title="var">string</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Hxx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: { <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Strings.String.html#eqb_neq"><span class="id" title="lemma">String.eqb_neq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hxx</span>. <span class="id" title="var">contradiction</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">Hholds</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">split</span>|]; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hholds</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">Hholds</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="sol_in_doms" class="idref" href="#sol_in_doms"><span class="id" title="definition">sol_in_doms</span></a> (<a id="sol:57" class="idref" href="#sol:57"><span class="id" title="binder">sol</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) (<a id="doms:58" class="idref" href="#doms:58"><span class="id" title="binder">doms</span></a> : <a class="idref" href="Checker.DomainVar.html#Domains"><span class="id" title="definition">Domains</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="x:59" class="idref" href="#x:59"><span class="id" title="binder">x</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a> (<a class="idref" href="Checker.DomainVar.html#sol:57"><span class="id" title="variable">sol</span></a> <a class="idref" href="Checker.DomainVar.html#x:59"><span class="id" title="variable">x</span></a>) (<a class="idref" href="Checker.DomainVar.html#doms:58"><span class="id" title="variable">doms</span></a> <a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">d</span></a><a class="idref" href="Checker.DomainVar.html#::Domain_scope:x_'d-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Checker.DomainVar.html#x:59"><span class="id" title="variable">x</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="valid_domains_sol_in_doms_iff_valid_atoms" class="idref" href="#valid_domains_sol_in_doms_iff_valid_atoms"><span class="id" title="lemma">valid_domains_sol_in_doms_iff_valid_atoms</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="atoms:60" class="idref" href="#atoms:60"><span class="id" title="binder">atoms</span></a> <a id="doms:61" class="idref" href="#doms:61"><span class="id" title="binder">doms</span></a> <a id="sol:62" class="idref" href="#sol:62"><span class="id" title="binder">sol</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.DomainVar.html#valid_domains"><span class="id" title="definition">valid_domains</span></a> <a class="idref" href="Checker.DomainVar.html#doms:61"><span class="id" title="variable">doms</span></a> <a class="idref" href="Checker.DomainVar.html#atoms:60"><span class="id" title="variable">atoms</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Spec.html#ProofFacts.valid_atoms"><span class="id" title="definition">valid_atoms</span></a> <a class="idref" href="Checker.DomainVar.html#sol:62"><span class="id" title="variable">sol</span></a> <a class="idref" href="Checker.DomainVar.html#atoms:60"><span class="id" title="variable">atoms</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.DomainVar.html#sol_in_doms"><span class="id" title="definition">sol_in_doms</span></a> <a class="idref" href="Checker.DomainVar.html#sol:62"><span class="id" title="variable">sol</span></a> <a class="idref" href="Checker.DomainVar.html#doms:61"><span class="id" title="variable">doms</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">atoms</span> <span class="id" title="var">doms</span> <span class="id" title="var">sol</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hdoms</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hatoms</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">Hdoms</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.DomainVar.html#applied_dom"><span class="id" title="definition">applied_dom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Domain.html#dom_effect_atomics"><span class="id" title="lemma">dom_effect_atomics</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hatoms</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Utility.html#Maps.filter_pair_on_key_spec"><span class="id" title="lemma">filter_pair_on_key_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Hindoms</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">a</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hdoms</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hindoms</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hdoms</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hindoms</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.DomainVar.html#applied_dom"><span class="id" title="definition">applied_dom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hindoms</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Domain.html#dom_effect_atomics"><span class="id" title="lemma">dom_effect_atomics</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hindoms</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hindoms</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Utility.html#Maps.filter_pair_on_key_spec"><span class="id" title="lemma">filter_pair_on_key_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hin</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/coq-community/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
