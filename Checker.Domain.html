<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="./coqdocjs/resources/coqdoc.css" rel="stylesheet" type="text/css" />
<link href="./coqdocjs/resources/coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="./coqdocjs/resources/config.js"></script>
<script type="text/javascript" src="./coqdocjs/resources/coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://redirect.tipten.nl/checker-project/">Project Page</a>
      <a href="./index.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Checker.Domain</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.ZArith.html#"><span class="id" title="library">Coq.ZArith.ZArith</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Strings.String.html#"><span class="id" title="library">String</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#"><span class="id" title="library">Coq.Lists.List</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Bool.Bool.html#"><span class="id" title="library">Bool</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.micromega.Lia.html#"><span class="id" title="library">Lia</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Structures.Orders.html#"><span class="id" title="library">Coq.Structures.Orders</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Checker.Utility.html#"><span class="id" title="library">Checker.Utility</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Checker.Utility.html#ListEx"><span class="id" title="module">Utility.ListEx</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Checker.Utility.html#ListInd"><span class="id" title="module">Utility.ListInd</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Checker.Utility.html#Sets"><span class="id" title="module">Utility.Sets</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Checker.Utility.html#ZRange"><span class="id" title="module">Utility.ZRange</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Checker.Utility.html#Tactics"><span class="id" title="module">Utility.Tactics</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Checker.Utility.html#SortedEx"><span class="id" title="module">Utility.SortedEx</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Checker.Zext.html#"><span class="id" title="library">Checker.Zext</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Program.Basics.html#"><span class="id" title="library">Program.Basics</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Sorting.Sorted.html#"><span class="id" title="library">Sorting.Sorted</span></a>.<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Checker.Spec.html#"><span class="id" title="library">Checker.Spec</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Checker.Spec.html#ProofFacts"><span class="id" title="module">Spec.ProofFacts</span></a>.<br/>

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Z_scope</span>.<br/>

<br/>
</div>

<div class="doc">
This file contains general reasoning about domains using a holes-based representation of domains. It purposefully makes no mention of variables. 
<div class="paragraph"> </div>

 The most important definitions in this file are Atomic, Domain, `apply_atomics`, `dom_equiv`, `dom_effect_atomics` and `check_holds`. 
<div class="paragraph"> </div>

<a id="lab4"></a><h1 class="section">Atomics</h1>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="Atomics" class="idref" href="#Atomics"><span class="id" title="section">Atomics</span></a>.<br/>
</div>

<div class="doc">
An atomic, short for atomic constraint, is a constraint on some value using the &gt;=, &lt;=, = and != operators. 
<div class="paragraph"> </div>

 Utility functions for defining particular atomic types easily. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="mk_atm_le" class="idref" href="#mk_atm_le"><span class="id" title="definition">mk_atm_le</span></a> (<a id="c:1" class="idref" href="#c:1"><span class="id" title="binder">c</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="Checker.Spec.html#ProofFacts.atm_cmp"><span class="id" title="projection">atm_cmp</span></a> := <a class="idref" href="Checker.Spec.html#ProofFacts.less_equal"><span class="id" title="constructor">less_equal</span></a>; <a class="idref" href="Checker.Spec.html#ProofFacts.atm_val"><span class="id" title="projection">atm_val</span></a> := <a class="idref" href="Checker.Domain.html#c:1"><span class="id" title="variable">c</span></a> |}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="mk_atm_ge" class="idref" href="#mk_atm_ge"><span class="id" title="definition">mk_atm_ge</span></a> (<a id="c:2" class="idref" href="#c:2"><span class="id" title="binder">c</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="Checker.Spec.html#ProofFacts.atm_cmp"><span class="id" title="projection">atm_cmp</span></a> := <a class="idref" href="Checker.Spec.html#ProofFacts.greater_equal"><span class="id" title="constructor">greater_equal</span></a>; <a class="idref" href="Checker.Spec.html#ProofFacts.atm_val"><span class="id" title="projection">atm_val</span></a> := <a class="idref" href="Checker.Domain.html#c:2"><span class="id" title="variable">c</span></a> |}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="mk_atm_ne" class="idref" href="#mk_atm_ne"><span class="id" title="definition">mk_atm_ne</span></a> (<a id="c:3" class="idref" href="#c:3"><span class="id" title="binder">c</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="Checker.Spec.html#ProofFacts.atm_cmp"><span class="id" title="projection">atm_cmp</span></a> := <a class="idref" href="Checker.Spec.html#ProofFacts.not_equal"><span class="id" title="constructor">not_equal</span></a>; <a class="idref" href="Checker.Spec.html#ProofFacts.atm_val"><span class="id" title="projection">atm_val</span></a> := <a class="idref" href="Checker.Domain.html#c:3"><span class="id" title="variable">c</span></a> |}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="mk_atm_eq" class="idref" href="#mk_atm_eq"><span class="id" title="definition">mk_atm_eq</span></a> (<a id="c:4" class="idref" href="#c:4"><span class="id" title="binder">c</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="Checker.Spec.html#ProofFacts.atm_cmp"><span class="id" title="projection">atm_cmp</span></a> := <a class="idref" href="Checker.Spec.html#ProofFacts.equal"><span class="id" title="constructor">equal</span></a>; <a class="idref" href="Checker.Spec.html#ProofFacts.atm_val"><span class="id" title="projection">atm_val</span></a> := <a class="idref" href="Checker.Domain.html#c:4"><span class="id" title="variable">c</span></a> |}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="decide_atomic" class="idref" href="#decide_atomic"><span class="id" title="definition">decide_atomic</span></a> (<a id="x:5" class="idref" href="#x:5"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) (<a id="a:6" class="idref" href="#a:6"><span class="id" title="binder">a</span></a> : <a class="idref" href="Checker.Spec.html#ProofFacts.Atomic"><span class="id" title="record">Atomic</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.Domain.html#a:6"><span class="id" title="variable">a</span></a>.(<a class="idref" href="Checker.Spec.html#ProofFacts.atm_cmp"><span class="id" title="projection">atm_cmp</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Spec.html#ProofFacts.less_equal"><span class="id" title="constructor">less_equal</span></a> =&gt; <a class="idref" href="Checker.Domain.html#x:5"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#90a0b0fc12252358f48538aa18bc4b8e"><span class="id" title="notation">&lt;=?</span></a> <a class="idref" href="Checker.Domain.html#a:6"><span class="id" title="variable">a</span></a>.(<a class="idref" href="Checker.Spec.html#ProofFacts.atm_val"><span class="id" title="projection">atm_val</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Spec.html#ProofFacts.greater_equal"><span class="id" title="constructor">greater_equal</span></a> =&gt; <a class="idref" href="Checker.Domain.html#x:5"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#a1c27bbd9f48118f287c317de583e02e"><span class="id" title="notation">&gt;=?</span></a> <a class="idref" href="Checker.Domain.html#a:6"><span class="id" title="variable">a</span></a>.(<a class="idref" href="Checker.Spec.html#ProofFacts.atm_val"><span class="id" title="projection">atm_val</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Spec.html#ProofFacts.equal"><span class="id" title="constructor">equal</span></a> =&gt; <a class="idref" href="Checker.Domain.html#x:5"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#f10153ef1a81fe79ed16d848b456c79b"><span class="id" title="notation">=?</span></a> <a class="idref" href="Checker.Domain.html#a:6"><span class="id" title="variable">a</span></a>.(<a class="idref" href="Checker.Spec.html#ProofFacts.atm_val"><span class="id" title="projection">atm_val</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Spec.html#ProofFacts.not_equal"><span class="id" title="constructor">not_equal</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="Checker.Domain.html#x:5"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#f10153ef1a81fe79ed16d848b456c79b"><span class="id" title="notation">=?</span></a> <a class="idref" href="Checker.Domain.html#a:6"><span class="id" title="variable">a</span></a>.(<a class="idref" href="Checker.Spec.html#ProofFacts.atm_val"><span class="id" title="projection">atm_val</span></a>))<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="decide_atomic_prop" class="idref" href="#decide_atomic_prop"><span class="id" title="lemma">decide_atomic_prop</span></a> : <span class="id" title="keyword">forall</span> (<a id="x:7" class="idref" href="#x:7"><span class="id" title="binder">x</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) (<a id="a:8" class="idref" href="#a:8"><span class="id" title="binder">a</span></a> : <a class="idref" href="Checker.Spec.html#ProofFacts.Atomic"><span class="id" title="record">Atomic</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#decide_atomic"><span class="id" title="definition">decide_atomic</span></a> <a class="idref" href="Checker.Domain.html#x:7"><span class="id" title="variable">x</span></a> <a class="idref" href="Checker.Domain.html#a:8"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.atomic_holds"><span class="id" title="definition">atomic_holds</span></a> <a class="idref" href="Checker.Domain.html#x:7"><span class="id" title="variable">x</span></a> <a class="idref" href="Checker.Domain.html#a:8"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#decide_atomic"><span class="id" title="definition">decide_atomic</span></a>, <a class="idref" href="Checker.Spec.html#ProofFacts.atomic_holds"><span class="id" title="definition">atomic_holds</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="Checker.Spec.html#ProofFacts.atm_val"><span class="id" title="projection">atm_val</span></a> <span class="id" title="var">a</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Spec.html#ProofFacts.atm_cmp"><span class="id" title="projection">atm_cmp</span></a> <span class="id" title="var">a</span>) ; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#Z.leb_le"><span class="id" title="lemma">Z.leb_le</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#Z.geb_ge"><span class="id" title="lemma">Z.geb_ge</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_eq"><span class="id" title="lemma">Z.eqb_eq</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Bool.Bool.html#negb_true_iff"><span class="id" title="lemma">negb_true_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_neq"><span class="id" title="lemma">Z.eqb_neq</span></a>, <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Bool.Bool.html#negb_true_iff"><span class="id" title="lemma">negb_true_iff</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_neq"><span class="id" title="lemma">Z.eqb_neq</span></a>, <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="negate_atomic" class="idref" href="#negate_atomic"><span class="id" title="definition">negate_atomic</span></a> (<a id="a:9" class="idref" href="#a:9"><span class="id" title="binder">a</span></a> : <a class="idref" href="Checker.Spec.html#ProofFacts.Atomic"><span class="id" title="record">Atomic</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.Domain.html#a:9"><span class="id" title="variable">a</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Spec.html#ProofFacts.mkAtm"><span class="id" title="constructor">mkAtm</span></a> <span class="id" title="var">cmp</span> <span class="id" title="var">c</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">cmp</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Checker.Spec.html#ProofFacts.less_equal"><span class="id" title="constructor">less_equal</span></a> =&gt; <a class="idref" href="Checker.Spec.html#ProofFacts.mkAtm"><span class="id" title="constructor">mkAtm</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.greater_equal"><span class="id" title="constructor">greater_equal</span></a> (<span class="id" title="var">c</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> 1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Checker.Spec.html#ProofFacts.greater_equal"><span class="id" title="constructor">greater_equal</span></a> =&gt; <a class="idref" href="Checker.Spec.html#ProofFacts.mkAtm"><span class="id" title="constructor">mkAtm</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.less_equal"><span class="id" title="constructor">less_equal</span></a> (<span class="id" title="var">c</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Checker.Spec.html#ProofFacts.equal"><span class="id" title="constructor">equal</span></a> =&gt; <a class="idref" href="Checker.Spec.html#ProofFacts.mkAtm"><span class="id" title="constructor">mkAtm</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.not_equal"><span class="id" title="constructor">not_equal</span></a> <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Checker.Spec.html#ProofFacts.not_equal"><span class="id" title="constructor">not_equal</span></a> =&gt; <a class="idref" href="Checker.Spec.html#ProofFacts.mkAtm"><span class="id" title="constructor">mkAtm</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.equal"><span class="id" title="constructor">equal</span></a> <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="negate_atomic_not" class="idref" href="#negate_atomic_not"><span class="id" title="lemma">negate_atomic_not</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="n:12" class="idref" href="#n:12"><span class="id" title="binder">n</span></a> <a id="a:13" class="idref" href="#a:13"><span class="id" title="binder">a</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Spec.html#ProofFacts.atomic_holds"><span class="id" title="definition">atomic_holds</span></a> <a class="idref" href="Checker.Domain.html#n:12"><span class="id" title="variable">n</span></a> <a class="idref" href="Checker.Domain.html#a:13"><span class="id" title="variable">a</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.atomic_holds"><span class="id" title="definition">atomic_holds</span></a> <a class="idref" href="Checker.Domain.html#n:12"><span class="id" title="variable">n</span></a> (<a class="idref" href="Checker.Domain.html#negate_atomic"><span class="id" title="definition">negate_atomic</span></a> <a class="idref" href="Checker.Domain.html#a:13"><span class="id" title="variable">a</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">cmp</span> <span class="id" title="var">c</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Spec.html#ProofFacts.atomic_holds"><span class="id" title="definition">atomic_holds</span></a>, <a class="idref" href="Checker.Domain.html#negate_atomic"><span class="id" title="definition">negate_atomic</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">cmp</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Checker.Domain.html#Atomics"><span class="id" title="section">Atomics</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab5"></a><h1 class="section">Domains</h1>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="Domains" class="idref" href="#Domains"><span class="id" title="section">Domains</span></a>.<br/>

<br/>
</div>

<div class="doc">
A domain consists of a lower bound, upper bound and a set of holes (see the Sets module in Utility, `sint` is a custom name short for `set_int`). We use the <span class="inlinecode"><a class="idref" href="Checker.Zext.html#Zext"><span class="id" title="module">Zext</span></a></span> type to represent bounds, meaning that a domain can be unbounded or bounded on only one side. Note that it is possible to represent empty domains. 
</div>
<div class="code">
<span class="id" title="keyword">Record</span> <a id="Domain" class="idref" href="#Domain"><span class="id" title="record">Domain</span></a> := <span class="id" title="var">mkDom</span> {<br/>
&nbsp;&nbsp;<a id="d_lb" class="idref" href="#d_lb"><span class="id" title="projection">d_lb</span></a> : <a class="idref" href="Checker.Zext.html#Zext"><span class="id" title="inductive">Zext</span></a>;<br/>
&nbsp;&nbsp;<a id="d_ub" class="idref" href="#d_ub"><span class="id" title="projection">d_ub</span></a> : <a class="idref" href="Checker.Zext.html#Zext"><span class="id" title="inductive">Zext</span></a>;<br/>
&nbsp;&nbsp;<a id="d_holes" class="idref" href="#d_holes"><span class="id" title="projection">d_holes</span></a> : <a class="idref" href="Checker.Utility.html#Sets.sint.t"><span class="id" title="definition">sint.t</span></a><br/>
}.<br/>

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Zext_scope</span>.<br/>
</div>

<div class="doc">
This defines the semantics of a domain. Here we see why it is nice to use Zext, they look just like normal, there is no matching on options or special cases for upper and lower bounds. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="is_in_dom" class="idref" href="#is_in_dom"><span class="id" title="definition">is_in_dom</span></a> (<a id="y:18" class="idref" href="#y:18"><span class="id" title="binder">y</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) (<a id="dom:19" class="idref" href="#dom:19"><span class="id" title="binder">dom</span></a> : <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a> <a class="idref" href="Checker.Domain.html#dom:19"><span class="id" title="variable">dom</span></a> <a class="idref" href="Checker.Zext.html#4ef9352958b4b041766235ac70424698"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> <a class="idref" href="Checker.Domain.html#y:18"><span class="id" title="variable">y</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> <a class="idref" href="Checker.Domain.html#y:18"><span class="id" title="variable">y</span></a> <a class="idref" href="Checker.Zext.html#4ef9352958b4b041766235ac70424698"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a> <a class="idref" href="Checker.Domain.html#dom:19"><span class="id" title="variable">dom</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="Checker.Utility.html#Sets.sint.In"><span class="id" title="definition">sint.In</span></a> <a class="idref" href="Checker.Domain.html#y:18"><span class="id" title="variable">y</span></a> (<a class="idref" href="Checker.Domain.html#d_holes"><span class="id" title="projection">d_holes</span></a> <a class="idref" href="Checker.Domain.html#dom:19"><span class="id" title="variable">dom</span></a>).<br/>

<br/>
</div>

<div class="doc">
We define a notion of equivalency between domains based on two domains containing the same elements, i.e. they would be equal if they were seen as sets. A 'logical domain' is an equivalence class based on this relation. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="dom_equiv" class="idref" href="#dom_equiv"><span class="id" title="definition">dom_equiv</span></a> <a id="dom1:20" class="idref" href="#dom1:20"><span class="id" title="binder">dom1</span></a> <a id="dom2:21" class="idref" href="#dom2:21"><span class="id" title="binder">dom2</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="y:22" class="idref" href="#y:22"><span class="id" title="binder">y</span></a>, <a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a> <a class="idref" href="Checker.Domain.html#y:22"><span class="id" title="variable">y</span></a> <a class="idref" href="Checker.Domain.html#dom1:20"><span class="id" title="variable">dom1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a> <a class="idref" href="Checker.Domain.html#y:22"><span class="id" title="variable">y</span></a> <a class="idref" href="Checker.Domain.html#dom2:21"><span class="id" title="variable">dom2</span></a>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="is_in_dom_Proper" class="idref" href="#is_in_dom_Proper"><span class="id" title="instance">is_in_dom_Proper</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="Checker.Domain.html#dom_equiv"><span class="id" title="definition">dom_equiv</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#iff"><span class="id" title="definition">iff</span></a>) <a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">y'</span> <span class="id" title="var">Hyy'</span> <span class="id" title="var">dom</span> <span class="id" title="var">dom'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">y'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#dom_equiv"><span class="id" title="definition">dom_equiv</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
We register it as an equivalence relation to allow lots of nice rewriting. 
</div>
<div class="code">
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="dom_equiv_equiv" class="idref" href="#dom_equiv_equiv"><span class="id" title="instance">dom_equiv_equiv</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Classes.RelationClasses.html#Equivalence"><span class="id" title="class">RelationClasses.Equivalence</span></a> <a class="idref" href="Checker.Domain.html#dom_equiv"><span class="id" title="definition">dom_equiv</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#dom_equiv"><span class="id" title="definition">dom_equiv</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#dom_equiv"><span class="id" title="definition">dom_equiv</span></a>; <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#dom_equiv"><span class="id" title="definition">dom_equiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H2</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_subset" class="idref" href="#is_subset"><span class="id" title="definition">is_subset</span></a> (<a id="lhs:23" class="idref" href="#lhs:23"><span class="id" title="binder">lhs</span></a> : <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a>) (<a id="rhs:24" class="idref" href="#rhs:24"><span class="id" title="binder">rhs</span></a> : <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="lb_lhs_at_least_lb_rhs:25" class="idref" href="#lb_lhs_at_least_lb_rhs:25"><span class="id" title="binder">lb_lhs_at_least_lb_rhs</span></a> := (<a class="idref" href="Checker.Zext.html#Zext.leb"><span class="id" title="definition">Zext.leb</span></a> <a class="idref" href="Checker.Domain.html#rhs:24"><span class="id" title="variable">rhs</span></a>.(<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a>) <a class="idref" href="Checker.Domain.html#lhs:23"><span class="id" title="variable">lhs</span></a>.(<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="ub_lhs_at_most_ub_rhs:26" class="idref" href="#ub_lhs_at_most_ub_rhs:26"><span class="id" title="binder">ub_lhs_at_most_ub_rhs</span></a> := (<a class="idref" href="Checker.Zext.html#Zext.leb"><span class="id" title="definition">Zext.leb</span></a> <a class="idref" href="Checker.Domain.html#lhs:23"><span class="id" title="variable">lhs</span></a>.(<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a>) <a class="idref" href="Checker.Domain.html#rhs:24"><span class="id" title="variable">rhs</span></a>.(<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="shared_holes:28" class="idref" href="#shared_holes:28"><span class="id" title="binder">shared_holes</span></a> := <a class="idref" href="Checker.Utility.html#Sets.sint.filter"><span class="id" title="definition">sint.filter</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="h:27" class="idref" href="#h:27"><span class="id" title="binder">h</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#andb"><span class="id" title="definition">andb</span></a> (<a class="idref" href="Checker.Zext.html#Zext.leb"><span class="id" title="definition">Zext.leb</span></a> <a class="idref" href="Checker.Domain.html#lhs:23"><span class="id" title="variable">lhs</span></a>.(<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a>) (<a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> <a class="idref" href="Checker.Domain.html#h:27"><span class="id" title="variable">h</span></a>)) (<a class="idref" href="Checker.Zext.html#Zext.leb"><span class="id" title="definition">Zext.leb</span></a> (<a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> <a class="idref" href="Checker.Domain.html#h:27"><span class="id" title="variable">h</span></a>) <a class="idref" href="Checker.Domain.html#lhs:23"><span class="id" title="variable">lhs</span></a>.(<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a>))) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#rhs:24"><span class="id" title="variable">rhs</span></a>.(<a class="idref" href="Checker.Domain.html#d_holes"><span class="id" title="projection">d_holes</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="holes_subset:29" class="idref" href="#holes_subset:29"><span class="id" title="binder">holes_subset</span></a> := <a class="idref" href="Checker.Utility.html#Sets.sint.subset"><span class="id" title="definition">sint.subset</span></a> <a class="idref" href="Checker.Domain.html#shared_holes:28"><span class="id" title="variable">shared_holes</span></a> <a class="idref" href="Checker.Domain.html#lhs:23"><span class="id" title="variable">lhs</span></a>.(<a class="idref" href="Checker.Domain.html#d_holes"><span class="id" title="projection">d_holes</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#lb_lhs_at_least_lb_rhs:25"><span class="id" title="variable">lb_lhs_at_least_lb_rhs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="Checker.Domain.html#ub_lhs_at_most_ub_rhs:26"><span class="id" title="variable">ub_lhs_at_most_ub_rhs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="Checker.Domain.html#holes_subset:29"><span class="id" title="variable">holes_subset</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="eqb" class="idref" href="#eqb"><span class="id" title="definition">eqb</span></a> (<a id="lhs:30" class="idref" href="#lhs:30"><span class="id" title="binder">lhs</span></a> : <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a>) (<a id="rhs:31" class="idref" href="#rhs:31"><span class="id" title="binder">rhs</span></a> : <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="same_lb:32" class="idref" href="#same_lb:32"><span class="id" title="binder">same_lb</span></a> := (<a class="idref" href="Checker.Zext.html#Zext.eqb"><span class="id" title="definition">Zext.eqb</span></a> (<a class="idref" href="Checker.Domain.html#lhs:30"><span class="id" title="variable">lhs</span></a>.(<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a>)) (<a class="idref" href="Checker.Domain.html#rhs:31"><span class="id" title="variable">rhs</span></a>.(<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a>)))<br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="same_ub:33" class="idref" href="#same_ub:33"><span class="id" title="binder">same_ub</span></a> := (<a class="idref" href="Checker.Zext.html#Zext.eqb"><span class="id" title="definition">Zext.eqb</span></a> (<a class="idref" href="Checker.Domain.html#lhs:30"><span class="id" title="variable">lhs</span></a>.(<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a>)) (<a class="idref" href="Checker.Domain.html#rhs:31"><span class="id" title="variable">rhs</span></a>.(<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a>)))<br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="same_holes:34" class="idref" href="#same_holes:34"><span class="id" title="binder">same_holes</span></a> := <a class="idref" href="Checker.Utility.html#Sets.sint.equal"><span class="id" title="definition">sint.equal</span></a> (<a class="idref" href="Checker.Domain.html#lhs:30"><span class="id" title="variable">lhs</span></a>.(<a class="idref" href="Checker.Domain.html#d_holes"><span class="id" title="projection">d_holes</span></a>)) (<a class="idref" href="Checker.Domain.html#rhs:31"><span class="id" title="variable">rhs</span></a>.(<a class="idref" href="Checker.Domain.html#d_holes"><span class="id" title="projection">d_holes</span></a>))<br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#same_lb:32"><span class="id" title="variable">same_lb</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="Checker.Domain.html#same_ub:33"><span class="id" title="variable">same_ub</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="Checker.Domain.html#same_holes:34"><span class="id" title="variable">same_holes</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eqb_eq" class="idref" href="#eqb_eq"><span class="id" title="lemma">eqb_eq</span></a> : <span class="id" title="keyword">forall</span> <a id="lhs:35" class="idref" href="#lhs:35"><span class="id" title="binder">lhs</span></a> <a id="rhs:36" class="idref" href="#rhs:36"><span class="id" title="binder">rhs</span></a>, <a class="idref" href="Checker.Domain.html#eqb"><span class="id" title="definition">eqb</span></a> <a class="idref" href="Checker.Domain.html#lhs:35"><span class="id" title="variable">lhs</span></a> <a class="idref" href="Checker.Domain.html#rhs:36"><span class="id" title="variable">rhs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Checker.Domain.html#dom_equiv"><span class="id" title="definition">dom_equiv</span></a> <a class="idref" href="Checker.Domain.html#lhs:35"><span class="id" title="variable">lhs</span></a> <a class="idref" href="Checker.Domain.html#rhs:36"><span class="id" title="variable">rhs</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">lhs</span> <span class="id" title="var">rhs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">lhs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">rhs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#eqb"><span class="id" title="definition">eqb</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#andb_prop"><span class="id" title="lemma">andb_prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span> <span class="id" title="var">Eholes</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#andb_prop"><span class="id" title="lemma">andb_prop</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Elb</span> <span class="id" title="var">Eub</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Zext.html#Zext.eqb_eq"><span class="id" title="lemma">Zext.eqb_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Elb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Zext.html#Zext.eqb_eq"><span class="id" title="lemma">Zext.eqb_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Eub</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Utility.html#Sets.sint_prps.Dec.F.equal_2"><span class="id" title="lemma">sint_prps.Dec.F.equal_2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Eholes</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Elb</span>, <span class="id" title="var">Eub</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#dom_equiv"><span class="id" title="definition">dom_equiv</span></a>, <a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Utility.html#Sets.sint.Equal"><span class="id" title="definition">sint.Equal</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Eholes</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">intros</span> ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">P</span> <span class="id" title="var">Q</span>] ; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Q</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Q</span> <span class="id" title="var">R</span>] ;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> ; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">P</span> ; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Q</span> ; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">R</span> ;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span> ; <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span> ;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#not"><span class="id" title="definition">not</span></a> ; <span class="id" title="tactic">intros</span> ; <span class="id" title="tactic">apply</span> <span class="id" title="var">Eholes</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> ; <span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
A domain is consistent when there is at least one element inside it. This rules out many weird domains such as having negative infinity as upper bound. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="dom_consistent" class="idref" href="#dom_consistent"><span class="id" title="definition">dom_consistent</span></a> (<a id="dom:37" class="idref" href="#dom:37"><span class="id" title="binder">dom</span></a> : <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="y:38" class="idref" href="#y:38"><span class="id" title="binder">y</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a> <a class="idref" href="Checker.Domain.html#y:38"><span class="id" title="variable">y</span></a> <a class="idref" href="Checker.Domain.html#dom:37"><span class="id" title="variable">dom</span></a>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Instance</span> <a id="dom_consistent_Proper" class="idref" href="#dom_consistent_Proper"><span class="id" title="instance">dom_consistent_Proper</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="Checker.Domain.html#dom_equiv"><span class="id" title="definition">dom_equiv</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#iff"><span class="id" title="definition">iff</span></a>) <a class="idref" href="Checker.Domain.html#dom_consistent"><span class="id" title="definition">dom_consistent</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">dom</span> <span class="id" title="var">dom'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#dom_consistent"><span class="id" title="definition">dom_consistent</span></a>, <a class="idref" href="Checker.Domain.html#dom_equiv"><span class="id" title="definition">dom_equiv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hequiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">Hequiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The initial domain contains all elements. It simplifies quite nicely, <span class="inlinecode"><a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a></span> <span class="inlinecode"><span class="id" title="var">y</span></span> <span class="inlinecode"><a class="idref" href="Checker.Domain.html#initial_dom"><span class="id" title="definition">initial_dom</span></a></span> is provable with just the `easy` tactic. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="initial_dom" class="idref" href="#initial_dom"><span class="id" title="definition">initial_dom</span></a> := <a class="idref" href="Checker.Domain.html#mkDom"><span class="id" title="constructor">mkDom</span></a> <a class="idref" href="Checker.Zext.html#neg_inf"><span class="id" title="constructor">neg_inf</span></a> <a class="idref" href="Checker.Zext.html#pos_inf"><span class="id" title="constructor">pos_inf</span></a> <a class="idref" href="Checker.Utility.html#Sets.sint.empty"><span class="id" title="definition">sint.empty</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Checker.Domain.html#Domains"><span class="id" title="section">Domains</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab6"></a><h1 class="section">ApplyAtomic</h1>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="ApplyAtomic" class="idref" href="#ApplyAtomic"><span class="id" title="section">ApplyAtomic</span></a>.<br/>
</div>

<div class="doc">
This section defines the <span class="inlinecode"><a class="idref" href="Checker.Domain.html#apply_atomic"><span class="id" title="definition">apply_atomic</span></a></span> operation and proves that it does what we want it to do: ensure that all values in the domain with the applied atomic obey the atomic. 
<div class="paragraph"> </div>

 Again it is nice we use Zext because we can get the definitions and specs for max/min for free and this makes the definition very simple. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="update_ub" class="idref" href="#update_ub"><span class="id" title="definition">update_ub</span></a> (<a id="value:39" class="idref" href="#value:39"><span class="id" title="binder">value</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) (<a id="dom:40" class="idref" href="#dom:40"><span class="id" title="binder">dom</span></a> : <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#mkDom"><span class="id" title="constructor">mkDom</span></a> <a class="idref" href="Checker.Domain.html#dom:40"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a>) (<a class="idref" href="Checker.Zext.html#Zext.min"><span class="id" title="definition">Zext.min</span></a> (<a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> <a class="idref" href="Checker.Domain.html#value:39"><span class="id" title="variable">value</span></a>) <a class="idref" href="Checker.Domain.html#dom:40"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a>)) <a class="idref" href="Checker.Domain.html#dom:40"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_holes"><span class="id" title="projection">d_holes</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="update_lb" class="idref" href="#update_lb"><span class="id" title="definition">update_lb</span></a> (<a id="value:41" class="idref" href="#value:41"><span class="id" title="binder">value</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) (<a id="dom:42" class="idref" href="#dom:42"><span class="id" title="binder">dom</span></a> : <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#mkDom"><span class="id" title="constructor">mkDom</span></a> (<a class="idref" href="Checker.Zext.html#Zext.max"><span class="id" title="definition">Zext.max</span></a> <a class="idref" href="Checker.Domain.html#dom:42"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a>) (<a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> <a class="idref" href="Checker.Domain.html#value:41"><span class="id" title="variable">value</span></a>)) <a class="idref" href="Checker.Domain.html#dom:42"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a>) <a class="idref" href="Checker.Domain.html#dom:42"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_holes"><span class="id" title="projection">d_holes</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="punch_hole" class="idref" href="#punch_hole"><span class="id" title="definition">punch_hole</span></a> (<a id="value:43" class="idref" href="#value:43"><span class="id" title="binder">value</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) (<a id="dom:44" class="idref" href="#dom:44"><span class="id" title="binder">dom</span></a> : <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#mkDom"><span class="id" title="constructor">mkDom</span></a> <a class="idref" href="Checker.Domain.html#dom:44"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a>) <a class="idref" href="Checker.Domain.html#dom:44"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a>) (<a class="idref" href="Checker.Utility.html#Sets.sint.add"><span class="id" title="definition">sint.add</span></a> <a class="idref" href="Checker.Domain.html#value:43"><span class="id" title="variable">value</span></a> <a class="idref" href="Checker.Domain.html#dom:44"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_holes"><span class="id" title="projection">d_holes</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="apply_atomic" class="idref" href="#apply_atomic"><span class="id" title="definition">apply_atomic</span></a> (<a id="dom:45" class="idref" href="#dom:45"><span class="id" title="binder">dom</span></a> : <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a>) (<a id="atomic:46" class="idref" href="#atomic:46"><span class="id" title="binder">atomic</span></a> : <a class="idref" href="Checker.Spec.html#ProofFacts.Atomic"><span class="id" title="record">Atomic</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> (<a class="idref" href="Checker.Spec.html#ProofFacts.atm_cmp"><span class="id" title="projection">atm_cmp</span></a> <a class="idref" href="Checker.Domain.html#atomic:46"><span class="id" title="variable">atomic</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Spec.html#ProofFacts.less_equal"><span class="id" title="constructor">less_equal</span></a> =&gt; <a class="idref" href="Checker.Domain.html#update_ub"><span class="id" title="definition">update_ub</span></a> <a class="idref" href="Checker.Domain.html#atomic:46"><span class="id" title="variable">atomic</span></a>.(<a class="idref" href="Checker.Spec.html#ProofFacts.atm_val"><span class="id" title="projection">atm_val</span></a>) <a class="idref" href="Checker.Domain.html#dom:45"><span class="id" title="variable">dom</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Spec.html#ProofFacts.greater_equal"><span class="id" title="constructor">greater_equal</span></a> =&gt; <a class="idref" href="Checker.Domain.html#update_lb"><span class="id" title="definition">update_lb</span></a> <a class="idref" href="Checker.Domain.html#atomic:46"><span class="id" title="variable">atomic</span></a>.(<a class="idref" href="Checker.Spec.html#ProofFacts.atm_val"><span class="id" title="projection">atm_val</span></a>) <a class="idref" href="Checker.Domain.html#dom:45"><span class="id" title="variable">dom</span></a>  <br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Spec.html#ProofFacts.equal"><span class="id" title="constructor">equal</span></a> =&gt; <a class="idref" href="Checker.Domain.html#update_ub"><span class="id" title="definition">update_ub</span></a> <a class="idref" href="Checker.Domain.html#atomic:46"><span class="id" title="variable">atomic</span></a>.(<a class="idref" href="Checker.Spec.html#ProofFacts.atm_val"><span class="id" title="projection">atm_val</span></a>) (<a class="idref" href="Checker.Domain.html#update_lb"><span class="id" title="definition">update_lb</span></a> <a class="idref" href="Checker.Domain.html#atomic:46"><span class="id" title="variable">atomic</span></a>.(<a class="idref" href="Checker.Spec.html#ProofFacts.atm_val"><span class="id" title="projection">atm_val</span></a>) <a class="idref" href="Checker.Domain.html#dom:45"><span class="id" title="variable">dom</span></a>)  <br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Spec.html#ProofFacts.not_equal"><span class="id" title="constructor">not_equal</span></a> =&gt; <a class="idref" href="Checker.Domain.html#punch_hole"><span class="id" title="definition">punch_hole</span></a> <a class="idref" href="Checker.Domain.html#atomic:46"><span class="id" title="variable">atomic</span></a>.(<a class="idref" href="Checker.Spec.html#ProofFacts.atm_val"><span class="id" title="projection">atm_val</span></a>)  <a class="idref" href="Checker.Domain.html#dom:45"><span class="id" title="variable">dom</span></a><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
The proofs are simple, destruct everything and then everything simplifies to something trivial or provable by lia since only integers are left. We make heavy use of the Zext tactics. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="update_ub_spec" class="idref" href="#update_ub_spec"><span class="id" title="lemma">update_ub_spec</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="dom:47" class="idref" href="#dom:47"><span class="id" title="binder">dom</span></a> <a id="value:48" class="idref" href="#value:48"><span class="id" title="binder">value</span></a> <a id="y:49" class="idref" href="#y:49"><span class="id" title="binder">y</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a> <a class="idref" href="Checker.Domain.html#y:49"><span class="id" title="variable">y</span></a> <a class="idref" href="Checker.Domain.html#dom:47"><span class="id" title="variable">dom</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> (<a class="idref" href="Checker.Domain.html#y:49"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="Checker.Domain.html#value:48"><span class="id" title="variable">value</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a> <a class="idref" href="Checker.Domain.html#y:49"><span class="id" title="variable">y</span></a> (<a class="idref" href="Checker.Domain.html#update_ub"><span class="id" title="definition">update_ub</span></a> <a class="idref" href="Checker.Domain.html#value:48"><span class="id" title="variable">value</span></a> <a class="idref" href="Checker.Domain.html#dom:47"><span class="id" title="variable">dom</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">dom</span> <span class="id" title="var">value</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a>, <a class="idref" href="Checker.Domain.html#update_ub"><span class="id" title="definition">update_ub</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>; <span class="id" title="var">destruct_ands</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_minmax</span>; <span class="id" title="var">compare_to_ops</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a> <span class="id" title="var">dom</span>); <span class="id" title="var">zext_as_z</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">zext_easy</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="update_lb_spec" class="idref" href="#update_lb_spec"><span class="id" title="lemma">update_lb_spec</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="dom:50" class="idref" href="#dom:50"><span class="id" title="binder">dom</span></a> <a id="value:51" class="idref" href="#value:51"><span class="id" title="binder">value</span></a> <a id="y:52" class="idref" href="#y:52"><span class="id" title="binder">y</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a> <a class="idref" href="Checker.Domain.html#y:52"><span class="id" title="variable">y</span></a> <a class="idref" href="Checker.Domain.html#dom:50"><span class="id" title="variable">dom</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> (<a class="idref" href="Checker.Domain.html#y:52"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#b1f0780291abe9bd18804d2c9a5039d4"><span class="id" title="notation">&gt;=</span></a> <a class="idref" href="Checker.Domain.html#value:51"><span class="id" title="variable">value</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a> <a class="idref" href="Checker.Domain.html#y:52"><span class="id" title="variable">y</span></a> (<a class="idref" href="Checker.Domain.html#update_lb"><span class="id" title="definition">update_lb</span></a> <a class="idref" href="Checker.Domain.html#value:51"><span class="id" title="variable">value</span></a> <a class="idref" href="Checker.Domain.html#dom:50"><span class="id" title="variable">dom</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">dom</span> <span class="id" title="var">value</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a>, <a class="idref" href="Checker.Domain.html#update_lb"><span class="id" title="definition">update_lb</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>; <span class="id" title="var">destruct_ands</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_minmax</span>; <span class="id" title="var">compare_to_ops</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a> <span class="id" title="var">dom</span>); <span class="id" title="var">zext_as_z</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">zext_easy</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Helper lemma. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="not_in_add" class="idref" href="#not_in_add"><span class="id" title="lemma">not_in_add</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="n:53" class="idref" href="#n:53"><span class="id" title="binder">n</span></a> <a id="y:54" class="idref" href="#y:54"><span class="id" title="binder">y</span></a> <a id="s:55" class="idref" href="#s:55"><span class="id" title="binder">s</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">(</span></a><a class="idref" href="Checker.Domain.html#n:53"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Checker.Domain.html#y:54"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="Checker.Utility.html#Sets.sint.In"><span class="id" title="definition">sint.In</span></a> <a class="idref" href="Checker.Domain.html#n:53"><span class="id" title="variable">n</span></a> <a class="idref" href="Checker.Domain.html#s:55"><span class="id" title="variable">s</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#n:53"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="Checker.Domain.html#y:54"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="Checker.Utility.html#Sets.sint.In"><span class="id" title="definition">sint.In</span></a> <a class="idref" href="Checker.Domain.html#n:53"><span class="id" title="variable">n</span></a> <a class="idref" href="Checker.Domain.html#s:55"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">y</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_eq"><span class="id" title="lemma">Z.eqb_eq</span></a>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Utility.html#Sets.sint.mem_spec"><span class="id" title="lemma">sint.mem_spec</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">normalize_bool_in</span> <span class="id" title="var">H</span>; <span class="id" title="var">destruct_ands</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Bool.Bool.html#not_true_iff_false"><span class="id" title="lemma">not_true_iff_false</span></a> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_eq"><span class="id" title="lemma">Z.eqb_eq</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Utility.html#Sets.sint.mem_spec"><span class="id" title="lemma">sint.mem_spec</span></a> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hny</span> | <span class="id" title="var">Hin</span>]; <span class="id" title="var">contradiction</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="punch_hole_spec" class="idref" href="#punch_hole_spec"><span class="id" title="lemma">punch_hole_spec</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="dom:56" class="idref" href="#dom:56"><span class="id" title="binder">dom</span></a> <a id="value:57" class="idref" href="#value:57"><span class="id" title="binder">value</span></a> <a id="y:58" class="idref" href="#y:58"><span class="id" title="binder">y</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a> <a class="idref" href="Checker.Domain.html#y:58"><span class="id" title="variable">y</span></a> <a class="idref" href="Checker.Domain.html#dom:56"><span class="id" title="variable">dom</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="Checker.Domain.html#y:58"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="Checker.Domain.html#value:57"><span class="id" title="variable">value</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a> <a class="idref" href="Checker.Domain.html#y:58"><span class="id" title="variable">y</span></a> (<a class="idref" href="Checker.Domain.html#punch_hole"><span class="id" title="definition">punch_hole</span></a> <a class="idref" href="Checker.Domain.html#value:57"><span class="id" title="variable">value</span></a> <a class="idref" href="Checker.Domain.html#dom:56"><span class="id" title="variable">dom</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">dom</span> <span class="id" title="var">value</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a>, <a class="idref" href="Checker.Domain.html#punch_hole"><span class="id" title="definition">punch_hole</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Utility.html#Sets.sint.add_spec"><span class="id" title="lemma">sint.add_spec</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Domain.html#not_in_add"><span class="id" title="lemma">not_in_add</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Now the actual spec. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="apply_atomic_spec" class="idref" href="#apply_atomic_spec"><span class="id" title="lemma">apply_atomic_spec</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="dom:59" class="idref" href="#dom:59"><span class="id" title="binder">dom</span></a> <a id="atomic:60" class="idref" href="#atomic:60"><span class="id" title="binder">atomic</span></a> <a id="y:61" class="idref" href="#y:61"><span class="id" title="binder">y</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a> <a class="idref" href="Checker.Domain.html#y:61"><span class="id" title="variable">y</span></a> <a class="idref" href="Checker.Domain.html#dom:59"><span class="id" title="variable">dom</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.atomic_holds"><span class="id" title="definition">atomic_holds</span></a> <a class="idref" href="Checker.Domain.html#y:61"><span class="id" title="variable">y</span></a> <a class="idref" href="Checker.Domain.html#atomic:60"><span class="id" title="variable">atomic</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a> <a class="idref" href="Checker.Domain.html#y:61"><span class="id" title="variable">y</span></a> (<a class="idref" href="Checker.Domain.html#apply_atomic"><span class="id" title="definition">apply_atomic</span></a> <a class="idref" href="Checker.Domain.html#dom:59"><span class="id" title="variable">dom</span></a> <a class="idref" href="Checker.Domain.html#atomic:60"><span class="id" title="variable">atomic</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">dom</span> <span class="id" title="var">atomic</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Spec.html#ProofFacts.atomic_holds"><span class="id" title="definition">atomic_holds</span></a>, <a class="idref" href="Checker.Domain.html#apply_atomic"><span class="id" title="definition">apply_atomic</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Spec.html#ProofFacts.atm_cmp"><span class="id" title="projection">atm_cmp</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#update_ub_spec"><span class="id" title="lemma">update_ub_spec</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#update_lb_spec"><span class="id" title="lemma">update_lb_spec</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Domain.html#update_ub_spec"><span class="id" title="lemma">update_ub_spec</span></a>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Domain.html#update_lb_spec"><span class="id" title="lemma">update_lb_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="var">destruct_ands</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#punch_hole_spec"><span class="id" title="lemma">punch_hole_spec</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Checker.Domain.html#ApplyAtomic"><span class="id" title="section">ApplyAtomic</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab7"></a><h1 class="section">ZFlip</h1>

</div>
<div class="code">
<span class="id" title="keyword">Declare Scope</span> <span class="id" title="var">ZFlip_scope</span>.<br/>
<span class="id" title="keyword">Module</span> <a id="ZFlip" class="idref" href="#ZFlip"><span class="id" title="module">ZFlip</span></a>.<br/>
</div>

<div class="doc">
In the next section, we will prove some things that is almost entirely symmetric for the upper and lower bound case. To avoid repeating the proofs, we parametrize the standard &lt;= &lt; over a 'sign' that can flip the order. 
</div>
<div class="code">
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">ZFlip_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="ZFlip.Sign" class="idref" href="#ZFlip.Sign"><span class="id" title="definition, inductive"><span id="ZFlip.Sign_rect" class="id"><span id="ZFlip.Sign_ind" class="id"><span id="ZFlip.Sign_rec" class="id"><span id="ZFlip.Sign_sind" class="id">Sign</span></span></span></span></span></a> :=<br/>
| <a id="ZFlip.plus" class="idref" href="#ZFlip.plus"><span class="id" title="constructor">plus</span></a><br/>
| <a id="ZFlip.min" class="idref" href="#ZFlip.min"><span class="id" title="constructor">min</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="ZFlip.le_flip" class="idref" href="#ZFlip.le_flip"><span class="id" title="definition">le_flip</span></a> (<a id="sign:64" class="idref" href="#sign:64"><span class="id" title="binder">sign</span></a> : <a class="idref" href="Checker.Domain.html#ZFlip.Sign"><span class="id" title="inductive">Sign</span></a>) <a id="x:65" class="idref" href="#x:65"><span class="id" title="binder">x</span></a> <a id="y:66" class="idref" href="#y:66"><span class="id" title="binder">y</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.Domain.html#sign:64"><span class="id" title="variable">sign</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Domain.html#ZFlip.plus"><span class="id" title="constructor">plus</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#Z.le"><span class="id" title="definition">Z.le</span></a> <a class="idref" href="Checker.Domain.html#x:65"><span class="id" title="variable">x</span></a> <a class="idref" href="Checker.Domain.html#y:66"><span class="id" title="variable">y</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Domain.html#ZFlip.min"><span class="id" title="constructor">min</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#Z.le"><span class="id" title="definition">Z.le</span></a> <a class="idref" href="Checker.Domain.html#y:66"><span class="id" title="variable">y</span></a> <a class="idref" href="Checker.Domain.html#x:65"><span class="id" title="variable">x</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="ZFlip.lt_flip" class="idref" href="#ZFlip.lt_flip"><span class="id" title="definition">lt_flip</span></a> (<a id="sign:68" class="idref" href="#sign:68"><span class="id" title="binder">sign</span></a> : <a class="idref" href="Checker.Domain.html#ZFlip.Sign"><span class="id" title="inductive">Sign</span></a>) <a id="x:69" class="idref" href="#x:69"><span class="id" title="binder">x</span></a> <a id="y:70" class="idref" href="#y:70"><span class="id" title="binder">y</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.Domain.html#sign:68"><span class="id" title="variable">sign</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Domain.html#ZFlip.plus"><span class="id" title="constructor">plus</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#Z.lt"><span class="id" title="axiom">Z.lt</span></a> <a class="idref" href="Checker.Domain.html#x:69"><span class="id" title="variable">x</span></a> <a class="idref" href="Checker.Domain.html#y:70"><span class="id" title="variable">y</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Domain.html#ZFlip.min"><span class="id" title="constructor">min</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#Z.lt"><span class="id" title="axiom">Z.lt</span></a> <a class="idref" href="Checker.Domain.html#y:70"><span class="id" title="variable">y</span></a> <a class="idref" href="Checker.Domain.html#x:69"><span class="id" title="variable">x</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="ZFlip.ltb_flip" class="idref" href="#ZFlip.ltb_flip"><span class="id" title="definition">ltb_flip</span></a> (<a id="sign:72" class="idref" href="#sign:72"><span class="id" title="binder">sign</span></a> : <a class="idref" href="Checker.Domain.html#ZFlip.Sign"><span class="id" title="inductive">Sign</span></a>) <a id="x:73" class="idref" href="#x:73"><span class="id" title="binder">x</span></a> <a id="y:74" class="idref" href="#y:74"><span class="id" title="binder">y</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.Domain.html#sign:72"><span class="id" title="variable">sign</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Domain.html#ZFlip.plus"><span class="id" title="constructor">plus</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#Z.ltb"><span class="id" title="definition">Z.ltb</span></a> <a class="idref" href="Checker.Domain.html#x:73"><span class="id" title="variable">x</span></a> <a class="idref" href="Checker.Domain.html#y:74"><span class="id" title="variable">y</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Domain.html#ZFlip.min"><span class="id" title="constructor">min</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#Z.ltb"><span class="id" title="definition">Z.ltb</span></a> <a class="idref" href="Checker.Domain.html#y:74"><span class="id" title="variable">y</span></a> <a class="idref" href="Checker.Domain.html#x:73"><span class="id" title="variable">x</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="ZFlip.sign_to_z" class="idref" href="#ZFlip.sign_to_z"><span class="id" title="definition">sign_to_z</span></a> (<a id="sign:76" class="idref" href="#sign:76"><span class="id" title="binder">sign</span></a> : <a class="idref" href="Checker.Domain.html#ZFlip.Sign"><span class="id" title="inductive">Sign</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.Domain.html#sign:76"><span class="id" title="variable">sign</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Domain.html#ZFlip.plus"><span class="id" title="constructor">plus</span></a> =&gt; 1<br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Domain.html#ZFlip.min"><span class="id" title="constructor">min</span></a> =&gt; -1<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">simpl_sign</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| [ <span class="id" title="var">sign</span> : <a class="idref" href="Checker.Domain.html#ZFlip.Sign"><span class="id" title="inductive">Sign</span></a> |- <span class="id" title="var">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#ZFlip.sign_to_z"><span class="id" title="definition">sign_to_z</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#ZFlip.le_flip"><span class="id" title="definition">le_flip</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#ZFlip.lt_flip"><span class="id" title="definition">lt_flip</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#ZFlip.ltb_flip"><span class="id" title="definition">ltb_flip</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">sign</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="f163442bfdfd7d398e81c78acec952b0" class="idref" href="#f163442bfdfd7d398e81c78acec952b0"><span class="id" title="notation">&quot;</span></a>x &lt;=[ z ] y" := (<a class="idref" href="Checker.Domain.html#ZFlip.le_flip"><span class="id" title="definition">le_flip</span></a> <span class="id" title="var">z</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70) : <span class="id" title="var">ZFlip_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="7884fef8ad6940af9425a20d545647d0" class="idref" href="#7884fef8ad6940af9425a20d545647d0"><span class="id" title="notation">&quot;</span></a>x &lt;[ z ] y" := (<a class="idref" href="Checker.Domain.html#ZFlip.lt_flip"><span class="id" title="definition">lt_flip</span></a> <span class="id" title="var">z</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70) : <span class="id" title="var">ZFlip_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="ce469cce0c700aa00d2c886bd517c464" class="idref" href="#ce469cce0c700aa00d2c886bd517c464"><span class="id" title="notation">&quot;</span></a>x &lt;?[ z ] y" := (<a class="idref" href="Checker.Domain.html#ZFlip.ltb_flip"><span class="id" title="definition">ltb_flip</span></a> <span class="id" title="var">z</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70) : <span class="id" title="var">ZFlip_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="4a02cccd7753194d250e916f81163a62" class="idref" href="#4a02cccd7753194d250e916f81163a62"><span class="id" title="notation">&quot;</span></a>x +&lt;= y" := (<a class="idref" href="Checker.Domain.html#ZFlip.le_flip"><span class="id" title="definition">le_flip</span></a> <a class="idref" href="Checker.Domain.html#ZFlip.plus"><span class="id" title="constructor">plus</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70) : <span class="id" title="var">ZFlip_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a id="7e57c2a88fdd4f58ec6b6df6dd07b916" class="idref" href="#7e57c2a88fdd4f58ec6b6df6dd07b916"><span class="id" title="notation">&quot;</span></a>x -&lt;= y" := (<a class="idref" href="Checker.Domain.html#ZFlip.le_flip"><span class="id" title="definition">le_flip</span></a> <a class="idref" href="Checker.Domain.html#ZFlip.min"><span class="id" title="constructor">min</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70) : <span class="id" title="var">ZFlip_scope</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Checker.Domain.html#ZFlip"><span class="id" title="module">ZFlip</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="Checker.Domain.html#ZFlip"><span class="id" title="module">ZFlip</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab8"></a><h1 class="section">Tighten (definitions and soundness, <span class="inlinecode"><a class="idref" href="Checker.Domain.html#dom_equiv"><span class="id" title="definition">dom_equiv</span></a></span>)</h1>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="Tighten" class="idref" href="#Tighten"><span class="id" title="section">Tighten</span></a>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Z_scope</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">ZFlip_scope</span>.<br/>

<br/>
</div>

<div class="doc">
This section introduces the functions used for tightening a domain. This section contains all the definitions and proofs actually used outside this file, since there only soundness is proved. See the section at the end for more details on the actual properties. The idea is that after applying this operation on the bounds, we can easily check whether an atomic holds and whether or not the domain is inconsistent. As mentioned, we parameterize over a 'sign' to avoid repeating proofs for an upper and lower bound case that are entirely symmetric. In most proofs, we only have to destruct the two cases in the leafs of the proof. 
<div class="paragraph"> </div>

 `last` here refers to the last bound we know holds. This bound is updated as the holes are traversed. We assume the holes are sorted. 
</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a id="tighten_with_holes" class="idref" href="#tighten_with_holes"><span class="id" title="definition">tighten_with_holes</span></a> (<a id="sign:78" class="idref" href="#sign:78"><span class="id" title="binder">sign</span></a> : <a class="idref" href="Checker.Domain.html#Sign"><span class="id" title="inductive">Sign</span></a>) (<a id="holes:79" class="idref" href="#holes:79"><span class="id" title="binder">holes</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) (<a id="last:80" class="idref" href="#last:80"><span class="id" title="binder">last</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.Domain.html#holes:79"><span class="id" title="variable">holes</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> =&gt; <a class="idref" href="Checker.Domain.html#last:80"><span class="id" title="variable">last</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">h</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">holes'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> (<span class="id" title="var">h</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#f10153ef1a81fe79ed16d848b456c79b"><span class="id" title="notation">=?</span></a> <a class="idref" href="Checker.Domain.html#last:80"><span class="id" title="variable">last</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> =&gt; <a class="idref" href="Checker.Domain.html#tighten_with_holes:81"><span class="id" title="definition">tighten_with_holes</span></a> <a class="idref" href="Checker.Domain.html#sign:78"><span class="id" title="variable">sign</span></a> <span class="id" title="var">holes'</span> (<a class="idref" href="Checker.Domain.html#last:80"><span class="id" title="variable">last</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> <a class="idref" href="Checker.Domain.html#sign_to_z"><span class="id" title="definition">sign_to_z</span></a> <a class="idref" href="Checker.Domain.html#sign:78"><span class="id" title="variable">sign</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> =&gt; <a class="idref" href="Checker.Domain.html#last:80"><span class="id" title="variable">last</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
This says that if a value obeys some bound, that after tightening that bound, the value still obeys it. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="tighten_with_holes_sound" class="idref" href="#tighten_with_holes_sound"><span class="id" title="lemma">tighten_with_holes_sound</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="sign:83" class="idref" href="#sign:83"><span class="id" title="binder">sign</span></a> <a id="y:84" class="idref" href="#y:84"><span class="id" title="binder">y</span></a> <a id="holes:85" class="idref" href="#holes:85"><span class="id" title="binder">holes</span></a> <a id="last:86" class="idref" href="#last:86"><span class="id" title="binder">last</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Checker.Domain.html#y:84"><span class="id" title="variable">y</span></a> <a class="idref" href="Checker.Domain.html#holes:85"><span class="id" title="variable">holes</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#last:86"><span class="id" title="variable">last</span></a> <a class="idref" href="Checker.Domain.html#f163442bfdfd7d398e81c78acec952b0"><span class="id" title="notation">&lt;=[</span></a><a class="idref" href="Checker.Domain.html#sign:83"><span class="id" title="variable">sign</span></a><a class="idref" href="Checker.Domain.html#f163442bfdfd7d398e81c78acec952b0"><span class="id" title="notation">]</span></a> <a class="idref" href="Checker.Domain.html#y:84"><span class="id" title="variable">y</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#tighten_with_holes"><span class="id" title="definition">tighten_with_holes</span></a> <a class="idref" href="Checker.Domain.html#sign:83"><span class="id" title="variable">sign</span></a> <a class="idref" href="Checker.Domain.html#holes:85"><span class="id" title="variable">holes</span></a> <a class="idref" href="Checker.Domain.html#last:86"><span class="id" title="variable">last</span></a> <a class="idref" href="Checker.Domain.html#f163442bfdfd7d398e81c78acec952b0"><span class="id" title="notation">&lt;=[</span></a><a class="idref" href="Checker.Domain.html#sign:83"><span class="id" title="variable">sign</span></a><a class="idref" href="Checker.Domain.html#f163442bfdfd7d398e81c78acec952b0"><span class="id" title="notation">]</span></a> <a class="idref" href="Checker.Domain.html#y:84"><span class="id" title="variable">y</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">sign</span> <span class="id" title="var">y</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">holes</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">h</span> <span class="id" title="var">holes'</span> <span class="id" title="var">IH</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">last</span> <span class="id" title="var">Hnin</span> <span class="id" title="var">Hy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hy</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">last</span> <span class="id" title="var">Hnotholes'</span> <span class="id" title="var">Hy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">h</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#f10153ef1a81fe79ed16d848b456c79b"><span class="id" title="notation">=?</span></a> <span class="id" title="var">last</span>)%<span class="id" title="var">Z</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Hh</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: { <span class="id" title="tactic">exact</span> <span class="id" title="var">Hy</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">Hinholes'</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hnotholes'</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hinholes'</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">y</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <span class="id" title="var">h</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">Hyh</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hnotholes'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">left</span>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_sign</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="tighten_holes_monotonic" class="idref" href="#tighten_holes_monotonic"><span class="id" title="lemma">tighten_holes_monotonic</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="sign:87" class="idref" href="#sign:87"><span class="id" title="binder">sign</span></a> (<a id="holes:88" class="idref" href="#holes:88"><span class="id" title="binder">holes</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) (<a id="last:89" class="idref" href="#last:89"><span class="id" title="binder">last</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>), <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#last:89"><span class="id" title="variable">last</span></a> <a class="idref" href="Checker.Domain.html#f163442bfdfd7d398e81c78acec952b0"><span class="id" title="notation">&lt;=[</span></a><a class="idref" href="Checker.Domain.html#sign:87"><span class="id" title="variable">sign</span></a><a class="idref" href="Checker.Domain.html#f163442bfdfd7d398e81c78acec952b0"><span class="id" title="notation">]</span></a> <a class="idref" href="Checker.Domain.html#tighten_with_holes"><span class="id" title="definition">tighten_with_holes</span></a> <a class="idref" href="Checker.Domain.html#sign:87"><span class="id" title="variable">sign</span></a> <a class="idref" href="Checker.Domain.html#holes:88"><span class="id" title="variable">holes</span></a> <a class="idref" href="Checker.Domain.html#last:89"><span class="id" title="variable">last</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">holes</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">h</span> <span class="id" title="var">holes'</span> <span class="id" title="var">IH</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">last</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">simpl_sign</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">last</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">h</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#f10153ef1a81fe79ed16d848b456c79b"><span class="id" title="notation">=?</span></a> <span class="id" title="var">last</span>)%<span class="id" title="var">Z</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">Hh</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IH</span> (<span class="id" title="var">last</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">(</span></a><a class="idref" href="Checker.Domain.html#sign_to_z"><span class="id" title="definition">sign_to_z</span></a> <span class="id" title="var">sign</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">)</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_sign</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">simpl_sign</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Z_scope</span>.<br/>
</div>

<div class="doc">
After tightening once, we do not remove holes since that can be quite expensive. This means we can have holes that are already implied by bounds. In order for the tighten function to do anything and simplify the proofs, we only take the elements that are at least as large as the bound. 
</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a id="elements_bound" class="idref" href="#elements_bound"><span class="id" title="definition">elements_bound</span></a> (<a id="sign:90" class="idref" href="#sign:90"><span class="id" title="binder">sign</span></a> : <a class="idref" href="Checker.Domain.html#Sign"><span class="id" title="inductive">Sign</span></a>) (<a id="bound:91" class="idref" href="#bound:91"><span class="id" title="binder">bound</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) (<a id="values:92" class="idref" href="#values:92"><span class="id" title="binder">values</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.Domain.html#values:92"><span class="id" title="variable">values</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> =&gt; <a class="idref" href="Checker.Domain.html#values:92"><span class="id" title="variable">values</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">values'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> (<span class="id" title="var">v</span> <a class="idref" href="Checker.Domain.html#ce469cce0c700aa00d2c886bd517c464"><span class="id" title="notation">&lt;?[</span></a><a class="idref" href="Checker.Domain.html#sign:90"><span class="id" title="variable">sign</span></a><a class="idref" href="Checker.Domain.html#ce469cce0c700aa00d2c886bd517c464"><span class="id" title="notation">]</span></a> <a class="idref" href="Checker.Domain.html#bound:91"><span class="id" title="variable">bound</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> =&gt; <a class="idref" href="Checker.Domain.html#elements_bound:93"><span class="id" title="definition">elements_bound</span></a> <a class="idref" href="Checker.Domain.html#sign:90"><span class="id" title="variable">sign</span></a> <a class="idref" href="Checker.Domain.html#bound:91"><span class="id" title="variable">bound</span></a> <span class="id" title="var">values'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> =&gt; <a class="idref" href="Checker.Domain.html#values:92"><span class="id" title="variable">values</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="elements_bound_in" class="idref" href="#elements_bound_in"><span class="id" title="lemma">elements_bound_in</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="sign:95" class="idref" href="#sign:95"><span class="id" title="binder">sign</span></a> <a id="bound:96" class="idref" href="#bound:96"><span class="id" title="binder">bound</span></a> <a id="values:97" class="idref" href="#values:97"><span class="id" title="binder">values</span></a> <a id="n:98" class="idref" href="#n:98"><span class="id" title="binder">n</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Checker.Domain.html#n:98"><span class="id" title="variable">n</span></a> (<a class="idref" href="Checker.Domain.html#elements_bound"><span class="id" title="definition">elements_bound</span></a> <a class="idref" href="Checker.Domain.html#sign:95"><span class="id" title="variable">sign</span></a> <a class="idref" href="Checker.Domain.html#bound:96"><span class="id" title="variable">bound</span></a> <a class="idref" href="Checker.Domain.html#values:97"><span class="id" title="variable">values</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Checker.Domain.html#n:98"><span class="id" title="variable">n</span></a> <a class="idref" href="Checker.Domain.html#values:97"><span class="id" title="variable">values</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">sign</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">values</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">n</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">a</span> <a class="idref" href="Checker.Domain.html#ce469cce0c700aa00d2c886bd517c464"><span class="id" title="notation">&lt;?[</span></a><span class="id" title="var">sign</span><a class="idref" href="Checker.Domain.html#ce469cce0c700aa00d2c886bd517c464"><span class="id" title="notation">]</span></a> <span class="id" title="var">bound</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">right</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHvalues</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">now</span> <span class="id" title="tactic">right</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
This is the critical lemma used to prove that tightening does not change the logical domain. Since shows that, given some holes in a value's domain, a bound and it's tightened variant holding are equivalent. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="tighten_holes_equiv" class="idref" href="#tighten_holes_equiv"><span class="id" title="definition">tighten_holes_equiv</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="sign:99" class="idref" href="#sign:99"><span class="id" title="binder">sign</span></a> <a id="bound:100" class="idref" href="#bound:100"><span class="id" title="binder">bound</span></a> <a id="holes:101" class="idref" href="#holes:101"><span class="id" title="binder">holes</span></a> <a id="y:102" class="idref" href="#y:102"><span class="id" title="binder">y</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#bound:100"><span class="id" title="variable">bound</span></a> <a class="idref" href="Checker.Domain.html#f163442bfdfd7d398e81c78acec952b0"><span class="id" title="notation">&lt;=[</span></a><a class="idref" href="Checker.Domain.html#sign:99"><span class="id" title="variable">sign</span></a><a class="idref" href="Checker.Domain.html#f163442bfdfd7d398e81c78acec952b0"><span class="id" title="notation">]</span></a> <a class="idref" href="Checker.Domain.html#y:102"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Checker.Domain.html#y:102"><span class="id" title="variable">y</span></a> <a class="idref" href="Checker.Domain.html#holes:101"><span class="id" title="variable">holes</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#tighten_with_holes"><span class="id" title="definition">tighten_with_holes</span></a> <a class="idref" href="Checker.Domain.html#sign:99"><span class="id" title="variable">sign</span></a> (<a class="idref" href="Checker.Domain.html#elements_bound"><span class="id" title="definition">elements_bound</span></a> <a class="idref" href="Checker.Domain.html#sign:99"><span class="id" title="variable">sign</span></a> <a class="idref" href="Checker.Domain.html#bound:100"><span class="id" title="variable">bound</span></a> <a class="idref" href="Checker.Domain.html#holes:101"><span class="id" title="variable">holes</span></a>) <a class="idref" href="Checker.Domain.html#bound:100"><span class="id" title="variable">bound</span></a> <a class="idref" href="Checker.Domain.html#f163442bfdfd7d398e81c78acec952b0"><span class="id" title="notation">&lt;=[</span></a><a class="idref" href="Checker.Domain.html#sign:99"><span class="id" title="variable">sign</span></a><a class="idref" href="Checker.Domain.html#f163442bfdfd7d398e81c78acec952b0"><span class="id" title="notation">]</span></a> <a class="idref" href="Checker.Domain.html#y:102"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Checker.Domain.html#y:102"><span class="id" title="variable">y</span></a> <a class="idref" href="Checker.Domain.html#holes:101"><span class="id" title="variable">holes</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">sign</span> <span class="id" title="var">bound</span> <span class="id" title="var">holes</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> (<a class="idref" href="Checker.Domain.html#tighten_with_holes_sound"><span class="id" title="lemma">tighten_with_holes_sound</span></a> <span class="id" title="var">sign</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hnotin</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#elements_bound_in"><span class="id" title="lemma">elements_bound_in</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htighten</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="Checker.Domain.html#tighten_holes_monotonic"><span class="id" title="lemma">tighten_holes_monotonic</span></a> <span class="id" title="var">sign</span> (<a class="idref" href="Checker.Domain.html#elements_bound"><span class="id" title="definition">elements_bound</span></a> <span class="id" title="var">sign</span> <span class="id" title="var">bound</span> <span class="id" title="var">holes</span>) <span class="id" title="var">bound</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hmono</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_sign</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Tighten lower bound of domain. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="tighten_lb" class="idref" href="#tighten_lb"><span class="id" title="definition">tighten_lb</span></a> (<a id="dom:103" class="idref" href="#dom:103"><span class="id" title="binder">dom</span></a> : <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a>) : <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.Domain.html#dom:103"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> <span class="id" title="var">lb</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="Checker.Utility.html#Sets.sint.mem"><span class="id" title="definition">sint.mem</span></a> <span class="id" title="var">lb</span> <a class="idref" href="Checker.Domain.html#dom:103"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_holes"><span class="id" title="projection">d_holes</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="new_lb:104" class="idref" href="#new_lb:104"><span class="id" title="binder">new_lb</span></a> := <a class="idref" href="Checker.Domain.html#tighten_with_holes"><span class="id" title="definition">tighten_with_holes</span></a> <a class="idref" href="Checker.Domain.html#plus"><span class="id" title="constructor">plus</span></a> (<a class="idref" href="Checker.Domain.html#elements_bound"><span class="id" title="definition">elements_bound</span></a> <a class="idref" href="Checker.Domain.html#plus"><span class="id" title="constructor">plus</span></a> <span class="id" title="var">lb</span> (<a class="idref" href="Checker.Utility.html#Sets.sint.elements"><span class="id" title="definition">sint.elements</span></a> <a class="idref" href="Checker.Domain.html#dom:103"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_holes"><span class="id" title="projection">d_holes</span></a>))) <span class="id" title="var">lb</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#mkDom"><span class="id" title="constructor">mkDom</span></a> (<a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> <a class="idref" href="Checker.Domain.html#new_lb:104"><span class="id" title="variable">new_lb</span></a>) <a class="idref" href="Checker.Domain.html#dom:103"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a>) <a class="idref" href="Checker.Domain.html#dom:103"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_holes"><span class="id" title="projection">d_holes</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="Checker.Domain.html#dom:103"><span class="id" title="variable">dom</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="Checker.Domain.html#dom:103"><span class="id" title="variable">dom</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="tighten_lb_equiv" class="idref" href="#tighten_lb_equiv"><span class="id" title="lemma">tighten_lb_equiv</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="dom:105" class="idref" href="#dom:105"><span class="id" title="binder">dom</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#dom_equiv"><span class="id" title="definition">dom_equiv</span></a> <a class="idref" href="Checker.Domain.html#dom:105"><span class="id" title="variable">dom</span></a> (<a class="idref" href="Checker.Domain.html#tighten_lb"><span class="id" title="definition">tighten_lb</span></a> <a class="idref" href="Checker.Domain.html#dom:105"><span class="id" title="variable">dom</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">dom</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">dom</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lb</span> <span class="id" title="var">ub</span> <span class="id" title="var">holes</span>]; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#tighten_lb"><span class="id" title="definition">tighten_lb</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">lb</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lb</span>| |].<br/>
&nbsp;&nbsp;2-3: <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Utility.html#Sets.sint.mem"><span class="id" title="definition">sint.mem</span></a>.<br/>
&nbsp;&nbsp;2: <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> &lt;- <a class="idref" href="Checker.Utility.html#Sets.sint.elements_spec1"><span class="id" title="lemma">sint.elements_spec1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="Checker.Utility.html#ListEx.InA_eq_iff_In"><span class="id" title="lemma">InA_eq_iff_In</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="Checker.Utility.html#Sets.sint.elements"><span class="id" title="definition">sint.elements</span></a> <span class="id" title="var">holes</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">holes'</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Heqholes'</span> <span class="id" title="var">holes</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="Checker.Domain.html#tighten_holes_equiv"><span class="id" title="definition">tighten_holes_equiv</span></a> <a class="idref" href="Checker.Domain.html#plus"><span class="id" title="constructor">plus</span></a> <span class="id" title="var">lb</span> <span class="id" title="var">holes'</span> <span class="id" title="var">y</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hequiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#le_flip"><span class="id" title="definition">le_flip</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hequiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">zext_as_z</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#and_assoc"><span class="id" title="lemma">and_assoc</span></a> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#and_comm"><span class="id" title="lemma">and_comm</span></a> <span class="id" title="tactic">at</span> 3.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#and_assoc"><span class="id" title="lemma">and_assoc</span></a> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hequiv</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hequiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Tighten upper bound of domain. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="tighten_ub" class="idref" href="#tighten_ub"><span class="id" title="definition">tighten_ub</span></a> (<a id="dom:106" class="idref" href="#dom:106"><span class="id" title="binder">dom</span></a> : <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a>) : <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.Domain.html#dom:106"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> <span class="id" title="var">ub</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="Checker.Utility.html#Sets.sint.mem"><span class="id" title="definition">sint.mem</span></a> <span class="id" title="var">ub</span> <a class="idref" href="Checker.Domain.html#dom:106"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_holes"><span class="id" title="projection">d_holes</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="new_ub:107" class="idref" href="#new_ub:107"><span class="id" title="binder">new_ub</span></a> := <a class="idref" href="Checker.Domain.html#tighten_with_holes"><span class="id" title="definition">tighten_with_holes</span></a> <a class="idref" href="Checker.Domain.html#min"><span class="id" title="constructor">min</span></a> (<a class="idref" href="Checker.Domain.html#elements_bound"><span class="id" title="definition">elements_bound</span></a> <a class="idref" href="Checker.Domain.html#min"><span class="id" title="constructor">min</span></a> <span class="id" title="var">ub</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#rev"><span class="id" title="definition">rev</span></a> (<a class="idref" href="Checker.Utility.html#Sets.sint.elements"><span class="id" title="definition">sint.elements</span></a> <a class="idref" href="Checker.Domain.html#dom:106"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_holes"><span class="id" title="projection">d_holes</span></a>)))) <span class="id" title="var">ub</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#mkDom"><span class="id" title="constructor">mkDom</span></a> <a class="idref" href="Checker.Domain.html#dom:106"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a>) (<a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> <a class="idref" href="Checker.Domain.html#new_ub:107"><span class="id" title="variable">new_ub</span></a>) <a class="idref" href="Checker.Domain.html#dom:106"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_holes"><span class="id" title="projection">d_holes</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="Checker.Domain.html#dom:106"><span class="id" title="variable">dom</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="Checker.Domain.html#dom:106"><span class="id" title="variable">dom</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="tighten_ub_equiv" class="idref" href="#tighten_ub_equiv"><span class="id" title="lemma">tighten_ub_equiv</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="dom:108" class="idref" href="#dom:108"><span class="id" title="binder">dom</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#dom_equiv"><span class="id" title="definition">dom_equiv</span></a> <a class="idref" href="Checker.Domain.html#dom:108"><span class="id" title="variable">dom</span></a> (<a class="idref" href="Checker.Domain.html#tighten_ub"><span class="id" title="definition">tighten_ub</span></a> <a class="idref" href="Checker.Domain.html#dom:108"><span class="id" title="variable">dom</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">dom</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">dom</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lb</span> <span class="id" title="var">ub</span> <span class="id" title="var">holes</span>]; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#tighten_ub"><span class="id" title="definition">tighten_ub</span></a>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ub</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ub</span>| |].<br/>
&nbsp;&nbsp;2-3: <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Utility.html#Sets.sint.mem"><span class="id" title="definition">sint.mem</span></a>.<br/>
&nbsp;&nbsp;2: <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> &lt;- <a class="idref" href="Checker.Utility.html#Sets.sint.elements_spec1"><span class="id" title="lemma">sint.elements_spec1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="Checker.Utility.html#ListEx.InA_eq_iff_In"><span class="id" title="lemma">InA_eq_iff_In</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#in_rev"><span class="id" title="lemma">in_rev</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#rev"><span class="id" title="definition">rev</span></a> (<a class="idref" href="Checker.Utility.html#Sets.sint.elements"><span class="id" title="definition">sint.elements</span></a> <span class="id" title="var">holes</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">holes'</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> &lt;- <span class="id" title="var">Heqholes'</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Heqholes'</span> <span class="id" title="var">holes</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="Checker.Domain.html#tighten_holes_equiv"><span class="id" title="definition">tighten_holes_equiv</span></a> <a class="idref" href="Checker.Domain.html#min"><span class="id" title="constructor">min</span></a> <span class="id" title="var">ub</span> <span class="id" title="var">holes'</span> <span class="id" title="var">y</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hequiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#le_flip"><span class="id" title="definition">le_flip</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hequiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">zext_as_z</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hequiv</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hequiv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Checker.Domain.html#Tighten"><span class="id" title="section">Tighten</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab9"></a><h1 class="section">Checking</h1>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="CheckDomains" class="idref" href="#CheckDomains"><span class="id" title="section">CheckDomains</span></a>.<br/>

<br/>
</div>

<div class="doc">
This section describes two functions, <span class="inlinecode"><a class="idref" href="Checker.Domain.html#check_holds"><span class="id" title="definition">check_holds</span></a></span> and <span class="inlinecode"><a class="idref" href="Checker.Domain.html#dom_check_consistent"><span class="id" title="definition">dom_check_consistent</span></a></span> that are used to efficiently verify whether an atomic holds for a domain and whether a domain is empty, respectively. We do not prove that they actually decide those properties, since that is only the case when the domain is tight and we do not need that in proofs outside this file. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Zext_scope</span>.<br/>
</div>

<div class="doc">
For lower and upper bounds and equality: we only inspect the bounds, so that is very cheap. For a hole, we do need to do a membership test, but no complex logic otherwise. Note that if the domain is not tight, this might return false even when logically, the atomic does hold. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="check_holds" class="idref" href="#check_holds"><span class="id" title="definition">check_holds</span></a> (<a id="a:109" class="idref" href="#a:109"><span class="id" title="binder">a</span></a> : <a class="idref" href="Checker.Spec.html#ProofFacts.Atomic"><span class="id" title="record">Atomic</span></a>) (<a id="dom:110" class="idref" href="#dom:110"><span class="id" title="binder">dom</span></a> : <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.Domain.html#a:109"><span class="id" title="variable">a</span></a>.(<a class="idref" href="Checker.Spec.html#ProofFacts.atm_cmp"><span class="id" title="projection">atm_cmp</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Spec.html#ProofFacts.greater_equal"><span class="id" title="constructor">greater_equal</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> <a class="idref" href="Checker.Domain.html#a:109"><span class="id" title="variable">a</span></a>.(<a class="idref" href="Checker.Spec.html#ProofFacts.atm_val"><span class="id" title="projection">atm_val</span></a>) <a class="idref" href="Checker.Zext.html#06039b84d64d7b75b636fc534043eb14"><span class="id" title="notation">&lt;=?</span></a> <a class="idref" href="Checker.Domain.html#dom:110"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Spec.html#ProofFacts.less_equal"><span class="id" title="constructor">less_equal</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#dom:110"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a>) <a class="idref" href="Checker.Zext.html#06039b84d64d7b75b636fc534043eb14"><span class="id" title="notation">&lt;=?</span></a> <a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> <a class="idref" href="Checker.Domain.html#a:109"><span class="id" title="variable">a</span></a>.(<a class="idref" href="Checker.Spec.html#ProofFacts.atm_val"><span class="id" title="projection">atm_val</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Spec.html#ProofFacts.equal"><span class="id" title="constructor">equal</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Checker.Domain.html#dom:110"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a>) <a class="idref" href="Checker.Zext.html#c9e2d26e94819f5120e72813b1a3f256"><span class="id" title="notation">=?</span></a> <a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> <a class="idref" href="Checker.Domain.html#a:109"><span class="id" title="variable">a</span></a>.(<a class="idref" href="Checker.Spec.html#ProofFacts.atm_val"><span class="id" title="projection">atm_val</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="Checker.Domain.html#dom:110"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a>) <a class="idref" href="Checker.Zext.html#c9e2d26e94819f5120e72813b1a3f256"><span class="id" title="notation">=?</span></a> <a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> <a class="idref" href="Checker.Domain.html#a:109"><span class="id" title="variable">a</span></a>.(<a class="idref" href="Checker.Spec.html#ProofFacts.atm_val"><span class="id" title="projection">atm_val</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Spec.html#ProofFacts.not_equal"><span class="id" title="constructor">not_equal</span></a> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">(</span></a><a class="idref" href="Checker.Domain.html#dom:110"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a>) <a class="idref" href="Checker.Zext.html#6791d6eee6b619acba2b46f0cb92a0ac"><span class="id" title="notation">&lt;?</span></a> <a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> <a class="idref" href="Checker.Domain.html#a:109"><span class="id" title="variable">a</span></a>.(<a class="idref" href="Checker.Spec.html#ProofFacts.atm_val"><span class="id" title="projection">atm_val</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">||</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">(</span></a><a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> <a class="idref" href="Checker.Domain.html#a:109"><span class="id" title="variable">a</span></a>.(<a class="idref" href="Checker.Spec.html#ProofFacts.atm_val"><span class="id" title="projection">atm_val</span></a>) <a class="idref" href="Checker.Zext.html#6791d6eee6b619acba2b46f0cb92a0ac"><span class="id" title="notation">&lt;?</span></a> <a class="idref" href="Checker.Domain.html#dom:110"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">||</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">(</span></a><a class="idref" href="Checker.Utility.html#Sets.sint.mem"><span class="id" title="definition">sint.mem</span></a> <a class="idref" href="Checker.Domain.html#a:109"><span class="id" title="variable">a</span></a>.(<a class="idref" href="Checker.Spec.html#ProofFacts.atm_val"><span class="id" title="projection">atm_val</span></a>) <a class="idref" href="Checker.Domain.html#dom:110"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_holes"><span class="id" title="projection">d_holes</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
When <span class="inlinecode"><a class="idref" href="Checker.Domain.html#check_holds"><span class="id" title="definition">check_holds</span></a></span> returns true, we definitely know the atomic holds! 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="check_holds_implies" class="idref" href="#check_holds_implies"><span class="id" title="lemma">check_holds_implies</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="dom:111" class="idref" href="#dom:111"><span class="id" title="binder">dom</span></a> <a id="y:112" class="idref" href="#y:112"><span class="id" title="binder">y</span></a> <a id="a:113" class="idref" href="#a:113"><span class="id" title="binder">a</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a> <a class="idref" href="Checker.Domain.html#y:112"><span class="id" title="variable">y</span></a> <a class="idref" href="Checker.Domain.html#dom:111"><span class="id" title="variable">dom</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#check_holds"><span class="id" title="definition">check_holds</span></a> <a class="idref" href="Checker.Domain.html#a:113"><span class="id" title="variable">a</span></a> <a class="idref" href="Checker.Domain.html#dom:111"><span class="id" title="variable">dom</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Spec.html#ProofFacts.atomic_holds"><span class="id" title="definition">atomic_holds</span></a> <a class="idref" href="Checker.Domain.html#y:112"><span class="id" title="variable">y</span></a> <a class="idref" href="Checker.Domain.html#a:113"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">dom</span> <span class="id" title="var">y</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a>, <a class="idref" href="Checker.Domain.html#check_holds"><span class="id" title="definition">check_holds</span></a>, <a class="idref" href="Checker.Spec.html#ProofFacts.atomic_holds"><span class="id" title="definition">atomic_holds</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Spec.html#ProofFacts.atm_cmp"><span class="id" title="projection">atm_cmp</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Zext.html#Zext.leb_le"><span class="id" title="lemma">Zext.leb_le</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> <span class="id" title="var">y</span> <a class="idref" href="Checker.Zext.html#4ef9352958b4b041766235ac70424698"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> (<a class="idref" href="Checker.Spec.html#ProofFacts.atm_val"><span class="id" title="projection">atm_val</span></a> <span class="id" title="var">a</span>)) <span class="id" title="tactic">by</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">H</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a> <span class="id" title="var">dom</span>); <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Zext.html#Zext.leb_le"><span class="id" title="lemma">Zext.leb_le</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> (<a class="idref" href="Checker.Spec.html#ProofFacts.atm_val"><span class="id" title="projection">atm_val</span></a> <span class="id" title="var">a</span>) <a class="idref" href="Checker.Zext.html#4ef9352958b4b041766235ac70424698"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> <span class="id" title="var">y</span>) <span class="id" title="tactic">by</span> (<span class="id" title="var">zext_as_z</span>; <span class="id" title="var">lia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">H</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a> <span class="id" title="var">dom</span>); <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Bool.Bool.html#andb_true_iff"><span class="id" title="lemma">andb_true_iff</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="Checker.Zext.html#Zext.eqb_eq"><span class="id" title="lemma">Zext.eqb_eq</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> <span class="id" title="var">y</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> (<a class="idref" href="Checker.Spec.html#ProofFacts.atm_val"><span class="id" title="projection">atm_val</span></a> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hlb</span> &amp; <span class="id" title="var">Hub</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hubeq</span> &amp; <span class="id" title="var">Hlbeq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">dom</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Zext.html#Zext.eq_is_le_ge"><span class="id" title="lemma">Zext.eq_is_le_ge</span></a>; <span class="id" title="var">compare_to_ops</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">normalize_not_zext</span>. <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Bool.Bool.html#orb_true_iff"><span class="id" title="lemma">orb_true_iff</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="Checker.Zext.html#Zext.ltb_lt"><span class="id" title="lemma">Zext.ltb_lt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [[<span class="id" title="var">Hub</span> | <span class="id" title="var">Hlb</span>] | <span class="id" title="var">Hmem</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">destruct_Zext</span>; <span class="id" title="var">zext_as_z</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">destruct_Zext</span>; <span class="id" title="var">zext_as_z</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Utility.html#Sets.sint.mem_spec"><span class="id" title="lemma">sint.mem_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">y</span>; <span class="id" title="var">easy</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Zext_scope</span>.<br/>
<span class="id" title="keyword">Definition</span> <a id="consistent_bounds" class="idref" href="#consistent_bounds"><span class="id" title="definition">consistent_bounds</span></a> (<a id="dom:114" class="idref" href="#dom:114"><span class="id" title="binder">dom</span></a> : <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#dom:114"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a>) <a class="idref" href="Checker.Zext.html#4ef9352958b4b041766235ac70424698"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="Checker.Domain.html#dom:114"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a>).<br/>

<br/>
</div>

<div class="doc">
Inspecting the bounds allows us to do an easy check to see if the domain is inconsistent. Again, if the domain is tight, this actually decides consistency! 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="dom_check_consistent" class="idref" href="#dom_check_consistent"><span class="id" title="definition">dom_check_consistent</span></a> (<a id="dom:115" class="idref" href="#dom:115"><span class="id" title="binder">dom</span></a> : <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.Domain.html#dom:115"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a>), <a class="idref" href="Checker.Domain.html#dom:115"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Zext.html#pos_inf"><span class="id" title="constructor">pos_inf</span></a>, <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <a class="idref" href="Checker.Zext.html#neg_inf"><span class="id" title="constructor">neg_inf</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> =&gt; <a class="idref" href="Checker.Domain.html#dom:115"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a>) <a class="idref" href="Checker.Zext.html#06039b84d64d7b75b636fc534043eb14"><span class="id" title="notation">&lt;=?</span></a> <a class="idref" href="Checker.Domain.html#dom:115"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
If it returns false, we know the domain is inconsistent. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="dom_inconsistent_if_checked_false" class="idref" href="#dom_inconsistent_if_checked_false"><span class="id" title="lemma">dom_inconsistent_if_checked_false</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="dom:116" class="idref" href="#dom:116"><span class="id" title="binder">dom</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#dom_check_consistent"><span class="id" title="definition">dom_check_consistent</span></a> <a class="idref" href="Checker.Domain.html#dom:116"><span class="id" title="variable">dom</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="Checker.Domain.html#dom_consistent"><span class="id" title="definition">dom_consistent</span></a> <a class="idref" href="Checker.Domain.html#dom:116"><span class="id" title="variable">dom</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">dom</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#dom_check_consistent"><span class="id" title="definition">dom_check_consistent</span></a>, <a class="idref" href="Checker.Domain.html#dom_consistent"><span class="id" title="definition">dom_consistent</span></a>, <a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hcheck</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a> <span class="id" title="var">dom</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Checker.Zext.html#pos_inf"><span class="id" title="constructor">pos_inf</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a> <span class="id" title="var">dom</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Checker.Zext.html#neg_inf"><span class="id" title="constructor">neg_inf</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">\/</span></a> <a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a> <span class="id" title="var">dom</span> <a class="idref" href="Checker.Zext.html#::Zext_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a> <span class="id" title="var">dom</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a> <span class="id" title="var">dom</span>); <span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a> <span class="id" title="var">dom</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">solve_disjunction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Bool.Bool.html#not_true_iff_false"><span class="id" title="lemma">not_true_iff_false</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcheck</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Zext.html#Zext.leb_le"><span class="id" title="lemma">Zext.leb_le</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hcheck</span>. <span class="id" title="var">zext_as_z</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hcheck</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hlbpos</span> | [<span class="id" title="var">Hubneg</span> | <span class="id" title="var">Hincons</span>]].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlbpos</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> (<span class="id" title="var">y</span> &amp; <span class="id" title="var">Hneg</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hubneg</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> (<span class="id" title="var">y</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hneg</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> (<span class="id" title="var">y</span> &amp; <span class="id" title="var">Hlb</span> &amp; <span class="id" title="var">Hub</span> &amp; <span class="id" title="var">Hholes</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a> <span class="id" title="var">dom</span>); <span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a> <span class="id" title="var">dom</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">zext_as_z</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Checker.Domain.html#CheckDomains"><span class="id" title="section">CheckDomains</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab10"></a><h1 class="section"><span class="inlinecode"><a class="idref" href="Checker.Domain.html#apply_atomics"><span class="id" title="definition">apply_atomics</span></a></span></h1>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="ApplyAtomics" class="idref" href="#ApplyAtomics"><span class="id" title="section">ApplyAtomics</span></a>.<br/>
</div>

<div class="doc">
This section describes the domain operations we actually use in practice: applying multiple atomics at once (e.g. when checking a nogood, we assume its premises), tightening the domain at once (after applying multiple atomics). We also define <span class="inlinecode"><a class="idref" href="Checker.Domain.html#apply_atomic_tighten"><span class="id" title="definition">apply_atomic_tighten</span></a></span>, which when given a tight and consistent domain always returns a tight and consistent domain (returning None if the domain is now inconsistent). The latter would be used when e.g. applying the consequent of an inference during nogood checking, as we need to check the premises of another inference afterwards, or we want to know we are done since it is now inconsistent. It is a bit more efficient by only tightening what is necessary. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="apply_atomics" class="idref" href="#apply_atomics"><span class="id" title="definition">apply_atomics</span></a> (<a id="atoms:117" class="idref" href="#atoms:117"><span class="id" title="binder">atoms</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.Atomic"><span class="id" title="record">Atomic</span></a>) (<a id="dom:118" class="idref" href="#dom:118"><span class="id" title="binder">dom</span></a> : <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#fold_left"><span class="id" title="definition">fold_left</span></a> <a class="idref" href="Checker.Domain.html#apply_atomic"><span class="id" title="definition">apply_atomic</span></a> <a class="idref" href="Checker.Domain.html#atoms:117"><span class="id" title="variable">atoms</span></a> <a class="idref" href="Checker.Domain.html#dom:118"><span class="id" title="variable">dom</span></a>.<br/>

<br/>
</div>

<div class="doc">
This allows us to transform applying multiple atomics to just a statement about which atomics, from which a corollary is that the order does not matter. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="dom_effect_atomics" class="idref" href="#dom_effect_atomics"><span class="id" title="lemma">dom_effect_atomics</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="atoms:119" class="idref" href="#atoms:119"><span class="id" title="binder">atoms</span></a> <a id="y:120" class="idref" href="#y:120"><span class="id" title="binder">y</span></a> <a id="dom:121" class="idref" href="#dom:121"><span class="id" title="binder">dom</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a> <a class="idref" href="Checker.Domain.html#y:120"><span class="id" title="variable">y</span></a> (<a class="idref" href="Checker.Domain.html#apply_atomics"><span class="id" title="definition">apply_atomics</span></a> <a class="idref" href="Checker.Domain.html#atoms:119"><span class="id" title="variable">atoms</span></a> <a class="idref" href="Checker.Domain.html#dom:121"><span class="id" title="variable">dom</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a> <a class="idref" href="Checker.Domain.html#y:120"><span class="id" title="variable">y</span></a> <a class="idref" href="Checker.Domain.html#dom:121"><span class="id" title="variable">dom</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="a:122" class="idref" href="#a:122"><span class="id" title="binder">a</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Checker.Domain.html#a:122"><span class="id" title="variable">a</span></a> <a class="idref" href="Checker.Domain.html#atoms:119"><span class="id" title="variable">atoms</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Checker.Spec.html#ProofFacts.atomic_holds"><span class="id" title="definition">atomic_holds</span></a> <a class="idref" href="Checker.Domain.html#y:120"><span class="id" title="variable">y</span></a> <a class="idref" href="Checker.Domain.html#a:122"><span class="id" title="variable">a</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#apply_atomics"><span class="id" title="definition">apply_atomics</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">atoms</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">dom</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">split</span>; <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">y</span> <span class="id" title="var">dom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHatoms</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Domain.html#apply_atomic_spec"><span class="id" title="lemma">apply_atomic_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> ((<span class="id" title="var">Hydom</span> &amp; <span class="id" title="var">Haholds</span>) &amp; <span class="id" title="var">Hinholds</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a'</span> [<span class="id" title="var">Ha</span> | <span class="id" title="var">Hin</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Haholds</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">Hinholds</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Hydom</span> &amp; <span class="id" title="var">Hinholds</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [<span class="id" title="tactic">split</span>|]; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">Hinholds</span>. <span class="id" title="tactic">left</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intros</span> <span class="id" title="var">a'</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hinholds</span>. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hin</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="tighten_dom" class="idref" href="#tighten_dom"><span class="id" title="definition">tighten_dom</span></a> (<a id="dom:123" class="idref" href="#dom:123"><span class="id" title="binder">dom</span></a> : <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#tighten_ub"><span class="id" title="definition">tighten_ub</span></a> (<a class="idref" href="Checker.Domain.html#tighten_lb"><span class="id" title="definition">tighten_lb</span></a> <a class="idref" href="Checker.Domain.html#dom:123"><span class="id" title="variable">dom</span></a>).<br/>

<br/>
</div>

<div class="doc">
This finally proves that tightening just preserves the logical domain. This is used a lot when we just care about domain equivalency and not about whether domains are tight. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="tighten_equiv" class="idref" href="#tighten_equiv"><span class="id" title="lemma">tighten_equiv</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="dom:124" class="idref" href="#dom:124"><span class="id" title="binder">dom</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#dom_equiv"><span class="id" title="definition">dom_equiv</span></a> <a class="idref" href="Checker.Domain.html#dom:124"><span class="id" title="variable">dom</span></a> (<a class="idref" href="Checker.Domain.html#tighten_dom"><span class="id" title="definition">tighten_dom</span></a> <a class="idref" href="Checker.Domain.html#dom:124"><span class="id" title="variable">dom</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">dom</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#tighten_dom"><span class="id" title="definition">tighten_dom</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> &lt;- <a class="idref" href="Checker.Domain.html#tighten_ub_equiv"><span class="id" title="lemma">tighten_ub_equiv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> &lt;- <a class="idref" href="Checker.Domain.html#tighten_lb_equiv"><span class="id" title="lemma">tighten_lb_equiv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="apply_atomic_tighten" class="idref" href="#apply_atomic_tighten"><span class="id" title="definition">apply_atomic_tighten</span></a> (<a id="dom:125" class="idref" href="#dom:125"><span class="id" title="binder">dom</span></a> : <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a>) (<a id="atomic:126" class="idref" href="#atomic:126"><span class="id" title="binder">atomic</span></a> : <a class="idref" href="Checker.Spec.html#ProofFacts.Atomic"><span class="id" title="record">Atomic</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="dom_applied:127" class="idref" href="#dom_applied:127"><span class="id" title="binder">dom_applied</span></a> := <a class="idref" href="Checker.Domain.html#apply_atomic"><span class="id" title="definition">apply_atomic</span></a> <a class="idref" href="Checker.Domain.html#dom:125"><span class="id" title="variable">dom</span></a> <a class="idref" href="Checker.Domain.html#atomic:126"><span class="id" title="variable">atomic</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="Checker.Domain.html#dom_check_consistent"><span class="id" title="definition">dom_check_consistent</span></a> <a class="idref" href="Checker.Domain.html#dom_applied:127"><span class="id" title="variable">dom_applied</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="dom_tight:128" class="idref" href="#dom_tight:128"><span class="id" title="binder">dom_tight</span></a> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> (<a class="idref" href="Checker.Spec.html#ProofFacts.atm_cmp"><span class="id" title="projection">atm_cmp</span></a> <a class="idref" href="Checker.Domain.html#atomic:126"><span class="id" title="variable">atomic</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Checker.Spec.html#ProofFacts.less_equal"><span class="id" title="constructor">less_equal</span></a> =&gt; <a class="idref" href="Checker.Domain.html#tighten_ub"><span class="id" title="definition">tighten_ub</span></a> <a class="idref" href="Checker.Domain.html#dom_applied:127"><span class="id" title="variable">dom_applied</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Checker.Spec.html#ProofFacts.greater_equal"><span class="id" title="constructor">greater_equal</span></a> =&gt; <a class="idref" href="Checker.Domain.html#tighten_lb"><span class="id" title="definition">tighten_lb</span></a> <a class="idref" href="Checker.Domain.html#dom_applied:127"><span class="id" title="variable">dom_applied</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="Checker.Domain.html#tighten_dom"><span class="id" title="definition">tighten_dom</span></a> <a class="idref" href="Checker.Domain.html#dom_applied:127"><span class="id" title="variable">dom_applied</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="Checker.Domain.html#dom_check_consistent"><span class="id" title="definition">dom_check_consistent</span></a> <a class="idref" href="Checker.Domain.html#dom_tight:128"><span class="id" title="variable">dom_tight</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="Checker.Domain.html#dom_tight:128"><span class="id" title="variable">dom_tight</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>

<br/>
</div>

<div class="doc">
This shows that apply_atomic_valid modifies the logical domain in the the same as <span class="inlinecode"><a class="idref" href="Checker.Domain.html#apply_atomic"><span class="id" title="definition">apply_atomic</span></a></span> if it returns Some, and that when it returns None it is indeed inconsistent. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="apply_atomic_tighten_valid" class="idref" href="#apply_atomic_tighten_valid"><span class="id" title="lemma">apply_atomic_tighten_valid</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="dom:129" class="idref" href="#dom:129"><span class="id" title="binder">dom</span></a> <a id="atomic:130" class="idref" href="#atomic:130"><span class="id" title="binder">atomic</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.Domain.html#apply_atomic_tighten"><span class="id" title="definition">apply_atomic_tighten</span></a> <a class="idref" href="Checker.Domain.html#dom:129"><span class="id" title="variable">dom</span></a> <a class="idref" href="Checker.Domain.html#atomic:130"><span class="id" title="variable">atomic</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">dom'</span> =&gt; <a class="idref" href="Checker.Domain.html#dom_equiv"><span class="id" title="definition">dom_equiv</span></a> <span class="id" title="var">dom'</span> (<a class="idref" href="Checker.Domain.html#apply_atomic"><span class="id" title="definition">apply_atomic</span></a> <a class="idref" href="Checker.Domain.html#dom:129"><span class="id" title="variable">dom</span></a> <a class="idref" href="Checker.Domain.html#atomic:130"><span class="id" title="variable">atomic</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="Checker.Domain.html#dom_consistent"><span class="id" title="definition">dom_consistent</span></a> (<a class="idref" href="Checker.Domain.html#apply_atomic"><span class="id" title="definition">apply_atomic</span></a> <a class="idref" href="Checker.Domain.html#dom:129"><span class="id" title="variable">dom</span></a> <a class="idref" href="Checker.Domain.html#atomic:130"><span class="id" title="variable">atomic</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">dom</span> <span class="id" title="var">atomic</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Domain.html#apply_atomic_tighten"><span class="id" title="definition">apply_atomic_tighten</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">dom'</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Htighten</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#apply_atomic_tighten"><span class="id" title="definition">apply_atomic_tighten</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htighten</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Domain.html#dom_check_consistent"><span class="id" title="definition">dom_check_consistent</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Spec.html#ProofFacts.atm_cmp"><span class="id" title="projection">atm_cmp</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">Hcmp</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Domain.html#dom_check_consistent"><span class="id" title="definition">dom_check_consistent</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">Hcheck</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htighten</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Htighten</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Domain.html#tighten_ub_equiv"><span class="id" title="lemma">tighten_ub_equiv</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Domain.html#tighten_lb_equiv"><span class="id" title="lemma">tighten_lb_equiv</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Domain.html#tighten_equiv"><span class="id" title="lemma">tighten_equiv</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Domain.html#tighten_equiv"><span class="id" title="lemma">tighten_equiv</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#apply_atomic_tighten"><span class="id" title="definition">apply_atomic_tighten</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htighten</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Domain.html#dom_check_consistent"><span class="id" title="definition">dom_check_consistent</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">Hconsistent_applied</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Spec.html#ProofFacts.atm_cmp"><span class="id" title="projection">atm_cmp</span></a>; <span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Domain.html#dom_check_consistent"><span class="id" title="definition">dom_check_consistent</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">Hconsistent_tight</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Htighten</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Domain.html#tighten_ub_equiv"><span class="id" title="lemma">tighten_ub_equiv</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#dom_inconsistent_if_checked_false"><span class="id" title="lemma">dom_inconsistent_if_checked_false</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hconsistent_tight</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Domain.html#tighten_lb_equiv"><span class="id" title="lemma">tighten_lb_equiv</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#dom_inconsistent_if_checked_false"><span class="id" title="lemma">dom_inconsistent_if_checked_false</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hconsistent_tight</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Domain.html#tighten_equiv"><span class="id" title="lemma">tighten_equiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#dom_inconsistent_if_checked_false"><span class="id" title="lemma">dom_inconsistent_if_checked_false</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hconsistent_tight</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Domain.html#tighten_equiv"><span class="id" title="lemma">tighten_equiv</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#dom_inconsistent_if_checked_false"><span class="id" title="lemma">dom_inconsistent_if_checked_false</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hconsistent_tight</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#dom_inconsistent_if_checked_false"><span class="id" title="lemma">dom_inconsistent_if_checked_false</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hconsistent_applied</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Checker.Domain.html#ApplyAtomics"><span class="id" title="section">ApplyAtomics</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="Tests" class="idref" href="#Tests"><span class="id" title="section">Tests</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="show_dom" class="idref" href="#show_dom"><span class="id" title="definition">show_dom</span></a> (<a id="dom:131" class="idref" href="#dom:131"><span class="id" title="binder">dom</span></a> : <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.Domain.html#dom:131"><span class="id" title="variable">dom</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Domain.html#mkDom"><span class="id" title="constructor">mkDom</span></a> <span class="id" title="var">lb</span> <span class="id" title="var">ub</span> <span class="id" title="var">holes</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">lb</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ub</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Checker.Utility.html#Sets.sint.elements"><span class="id" title="definition">sint.elements</span></a> <span class="id" title="var">holes</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="dom1" class="idref" href="#dom1"><span class="id" title="definition">dom1</span></a> := (<a class="idref" href="Checker.Domain.html#mkDom"><span class="id" title="constructor">mkDom</span></a> (<a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> 0) (<a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> 8) (<a class="idref" href="Checker.Utility.html#Sets.sint.build"><span class="id" title="definition">sint.build</span></a> (0 <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> 9 <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> 5 <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> 1 <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> 11 <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> 7 <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> 8 <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> 9 <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>))).<br/>

<br/>
</div>

<div class="doc">
Since we have 0,1,2 we expect &gt;= 3. Since 7,8 we expect &lt;= 6. We also have 5 so we expect it to be preserved. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="dom2" class="idref" href="#dom2"><span class="id" title="definition">dom2</span></a> := (<a class="idref" href="Checker.Domain.html#mkDom"><span class="id" title="constructor">mkDom</span></a> (<a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> (-3)) (<a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> 1) (<a class="idref" href="Checker.Utility.html#Sets.sint.build"><span class="id" title="definition">sint.build</span></a> (-3 <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> -4 <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> -1 <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> -2 <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> 0 <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> 1 <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> 9 <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> -5 <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> 2 <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> 3 <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>))).<br/>
<span class="id" title="keyword">Definition</span> <a id="dom2_tight" class="idref" href="#dom2_tight"><span class="id" title="definition">dom2_tight</span></a> := <a class="idref" href="Checker.Domain.html#tighten_dom"><span class="id" title="definition">tighten_dom</span></a> <a class="idref" href="Checker.Domain.html#dom2"><span class="id" title="definition">dom2</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Checker.Domain.html#Tests"><span class="id" title="section">Tests</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab11"></a><h1 class="section">Tighten (decide <span class="inlinecode"><a class="idref" href="Checker.Spec.html#ProofFacts.atomic_holds"><span class="id" title="definition">atomic_holds</span></a></span> and <span class="inlinecode"><a class="idref" href="Checker.Domain.html#dom_consistent"><span class="id" title="definition">dom_consistent</span></a></span> when tight)</h1>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="TightenComplete" class="idref" href="#TightenComplete"><span class="id" title="section">TightenComplete</span></a>.<br/>

<br/>
</div>

<div class="doc">
Until now, we have only shown that tighten preserves the logical domain. However, as the name implies, the tighten operation makes a domain become 'tightened'. When a domain is tightened, it has no holes at its bounds and these bounds are therefore as tight as they can be. Furthermore, in this tightened state, <span class="inlinecode"><a class="idref" href="Checker.Domain.html#dom_check_consistent"><span class="id" title="definition">dom_check_consistent</span></a></span> actually decides consistency of the domain. Furthermore, <span class="inlinecode"><a class="idref" href="Checker.Domain.html#check_holds"><span class="id" title="definition">check_holds</span></a></span> is able to decide an atomic holds. 
<div class="paragraph"> </div>

<a id="lab12"></a><h3 class="section">Tightened effects</h3>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Zext_scope</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">ZFlip_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="lb_tightened" class="idref" href="#lb_tightened"><span class="id" title="definition">lb_tightened</span></a> (<a id="dom:133" class="idref" href="#dom:133"><span class="id" title="binder">dom</span></a>: <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.Domain.html#dom:133"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> <span class="id" title="var">lb</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="Checker.Utility.html#Sets.sint.In"><span class="id" title="definition">sint.In</span></a> <span class="id" title="var">lb</span> <a class="idref" href="Checker.Domain.html#dom:133"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_holes"><span class="id" title="projection">d_holes</span></a>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="ub_tightened" class="idref" href="#ub_tightened"><span class="id" title="definition">ub_tightened</span></a> (<a id="dom:134" class="idref" href="#dom:134"><span class="id" title="binder">dom</span></a>: <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.Domain.html#dom:134"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> <span class="id" title="var">ub</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="Checker.Utility.html#Sets.sint.In"><span class="id" title="definition">sint.In</span></a> <span class="id" title="var">ub</span> <a class="idref" href="Checker.Domain.html#dom:134"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_holes"><span class="id" title="projection">d_holes</span></a>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="dom_tightened" class="idref" href="#dom_tightened"><span class="id" title="definition">dom_tightened</span></a> (<a id="dom:135" class="idref" href="#dom:135"><span class="id" title="binder">dom</span></a> : <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#lb_tightened"><span class="id" title="definition">lb_tightened</span></a> <a class="idref" href="Checker.Domain.html#dom:135"><span class="id" title="variable">dom</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="Checker.Domain.html#ub_tightened"><span class="id" title="definition">ub_tightened</span></a> <a class="idref" href="Checker.Domain.html#dom:135"><span class="id" title="variable">dom</span></a>.<br/>

<br/>
</div>

<div class="doc">
When a domain is tight, <span class="inlinecode"><a class="idref" href="Checker.Domain.html#dom_check_consistent"><span class="id" title="definition">dom_check_consistent</span></a></span> actually decides consistency! 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="dom_consistent_iff_checked" class="idref" href="#dom_consistent_iff_checked"><span class="id" title="lemma">dom_consistent_iff_checked</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="dom:136" class="idref" href="#dom:136"><span class="id" title="binder">dom</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#dom_tightened"><span class="id" title="definition">dom_tightened</span></a> <a class="idref" href="Checker.Domain.html#dom:136"><span class="id" title="variable">dom</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#dom_check_consistent"><span class="id" title="definition">dom_check_consistent</span></a> <a class="idref" href="Checker.Domain.html#dom:136"><span class="id" title="variable">dom</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="Checker.Domain.html#dom_consistent"><span class="id" title="definition">dom_consistent</span></a> <a class="idref" href="Checker.Domain.html#dom:136"><span class="id" title="variable">dom</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">dom</span> [<span class="id" title="var">Htight_lb</span> <span class="id" title="var">Htight_ub</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;2: {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Domain.html#dom_check_consistent"><span class="id" title="definition">dom_check_consistent</span></a> <span class="id" title="var">dom</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hcheck</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hconsistent</span>. <span class="id" title="var">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="Checker.Domain.html#dom_consistent"><span class="id" title="definition">dom_consistent</span></a> <span class="id" title="var">dom</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">contradiction</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hconsistent</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#dom_inconsistent_if_checked_false"><span class="id" title="lemma">dom_inconsistent_if_checked_false</span></a>, <span class="id" title="var">Hcheck</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#lb_tightened"><span class="id" title="definition">lb_tightened</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htight_lb</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#ub_tightened"><span class="id" title="definition">ub_tightened</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htight_ub</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#dom_check_consistent"><span class="id" title="definition">dom_check_consistent</span></a>, <a class="idref" href="Checker.Domain.html#dom_consistent"><span class="id" title="definition">dom_consistent</span></a>, <a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a> <span class="id" title="var">dom</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">ub</span>| |]; <span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a> <span class="id" title="var">dom</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lb</span>| |]; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Zext.html#Zext.leb_le"><span class="id" title="lemma">Zext.leb_le</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">lb</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">ub</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">lb</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="Checker.Utility.html#Sets.exists_sint_lb"><span class="id" title="lemma">exists_sint_lb</span></a> (<a class="idref" href="Checker.Domain.html#d_holes"><span class="id" title="projection">d_holes</span></a> <span class="id" title="var">dom</span>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Numbers.BinNums.html#Z0"><span class="id" title="constructor">Z0</span></a>) <span class="id" title="keyword">as</span> (<span class="id" title="var">y'</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exists</span> (<span class="id" title="var">y'</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="ub_not_neg_inf" class="idref" href="#ub_not_neg_inf"><span class="id" title="definition">ub_not_neg_inf</span></a> (<a id="dom:137" class="idref" href="#dom:137"><span class="id" title="binder">dom</span></a> : <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#dom:137"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">&lt;&gt;</span></a> <a class="idref" href="Checker.Zext.html#neg_inf"><span class="id" title="constructor">neg_inf</span></a>.<br/>

<br/>
</div>

<div class="doc">
We prove here for just the lower bound case for lack of time. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a id="tightened_then_checks_lb" class="idref" href="#tightened_then_checks_lb"><span class="id" title="lemma">tightened_then_checks_lb</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="dom:138" class="idref" href="#dom:138"><span class="id" title="binder">dom</span></a> <a id="lb:139" class="idref" href="#lb:139"><span class="id" title="binder">lb</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#consistent_bounds"><span class="id" title="definition">consistent_bounds</span></a> <a class="idref" href="Checker.Domain.html#dom:138"><span class="id" title="variable">dom</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#ub_not_neg_inf"><span class="id" title="definition">ub_not_neg_inf</span></a> <a class="idref" href="Checker.Domain.html#dom:138"><span class="id" title="variable">dom</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#lb_tightened"><span class="id" title="definition">lb_tightened</span></a> <a class="idref" href="Checker.Domain.html#dom:138"><span class="id" title="variable">dom</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="y:140" class="idref" href="#y:140"><span class="id" title="binder">y</span></a>, <a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a> <a class="idref" href="Checker.Domain.html#y:140"><span class="id" title="variable">y</span></a> <a class="idref" href="Checker.Domain.html#dom:138"><span class="id" title="variable">dom</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> (<a class="idref" href="Checker.Domain.html#lb:139"><span class="id" title="variable">lb</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="Checker.Domain.html#y:140"><span class="id" title="variable">y</span></a>)%<span class="id" title="var">Z</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> <a class="idref" href="Checker.Domain.html#lb:139"><span class="id" title="variable">lb</span></a> <a class="idref" href="Checker.Zext.html#06039b84d64d7b75b636fc534043eb14"><span class="id" title="notation">&lt;=?</span></a> <a class="idref" href="Checker.Domain.html#dom:138"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">dom</span> <span class="id" title="var">lb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#is_in_dom"><span class="id" title="definition">is_in_dom</span></a>, <a class="idref" href="Checker.Domain.html#lb_tightened"><span class="id" title="definition">lb_tightened</span></a>, <a class="idref" href="Checker.Domain.html#consistent_bounds"><span class="id" title="definition">consistent_bounds</span></a>, <a class="idref" href="Checker.Domain.html#ub_not_neg_inf"><span class="id" title="definition">ub_not_neg_inf</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hconsistent</span> <span class="id" title="var">Hubnotneginf</span> <span class="id" title="var">Htightened</span> <span class="id" title="var">Hlb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Zext.html#Zext.leb_le"><span class="id" title="lemma">Zext.leb_le</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a> <span class="id" title="var">dom</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">dlb</span>| |] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlbdestr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hlb</span> <span class="id" title="var">dlb</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">zext_as_z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">compare_to_ops</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<span class="id" title="var">lb</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <span class="id" title="var">dlb</span>)%<span class="id" title="var">Z</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hlb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a> <span class="id" title="var">dom</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">dub</span>| |];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">zext_as_z</span>; <span class="id" title="var">zext_easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exact</span> <span class="id" title="var">Htightened</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">exists</span></a> <a id="n:141" class="idref" href="#n:141"><span class="id" title="binder"><span id="n:142" class="id">n</span></span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="Checker.Domain.html#n:141"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">lb</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="var">lb</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#306329b0eca7a2b86c198702f594ad8e"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="Checker.Domain.html#n:141"><span class="id" title="variable">n</span></a>)%<span class="id" title="var">Z</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Utility.html#Sets.exists_sint_lb"><span class="id" title="lemma">exists_sint_lb</span></a> (<a class="idref" href="Checker.Domain.html#d_holes"><span class="id" title="projection">d_holes</span></a> <span class="id" title="var">dom</span>) <span class="id" title="var">lb</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">hlb</span> &amp; <span class="id" title="var">Hhlblb</span> &amp; <span class="id" title="var">Hhlb</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a> <span class="id" title="var">dom</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">dub</span>| |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#Z.min"><span class="id" title="definition">Z.min</span></a> <span class="id" title="var">dub</span> <span class="id" title="var">hlb</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">Hlb</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">zext_as_z</span>; <span class="id" title="var">zext_easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">zext_as_z</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <span class="id" title="var">Hhlb</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">exists</span> (<span class="id" title="var">hlb</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#::Z_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">Hlb</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">zext_easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">zext_easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">apply</span> <span class="id" title="var">Hhlb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">zext_easy</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>

<br/>
</div>

<div class="doc">
<a id="lab13"></a><h3 class="section">Tighten tightens</h3>
 Here, we actually prove that the tighten operations we defined actually make the domain tight. For this, we need that the holes are sorted. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">Z_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="elements_bound_in_iff" class="idref" href="#elements_bound_in_iff"><span class="id" title="lemma">elements_bound_in_iff</span></a> : <br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="sign:143" class="idref" href="#sign:143"><span class="id" title="binder">sign</span></a> <a id="bound:144" class="idref" href="#bound:144"><span class="id" title="binder">bound</span></a> <a id="values:145" class="idref" href="#values:145"><span class="id" title="binder">values</span></a> <a id="n:146" class="idref" href="#n:146"><span class="id" title="binder">n</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Sorting.Sorted.html#Sorted"><span class="id" title="inductive">Sorted</span></a> (<a class="idref" href="Checker.Domain.html#lt_flip"><span class="id" title="definition">lt_flip</span></a> <a class="idref" href="Checker.Domain.html#sign:143"><span class="id" title="variable">sign</span></a>) <a class="idref" href="Checker.Domain.html#values:145"><span class="id" title="variable">values</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Checker.Domain.html#n:146"><span class="id" title="variable">n</span></a> (<a class="idref" href="Checker.Domain.html#elements_bound"><span class="id" title="definition">elements_bound</span></a> <a class="idref" href="Checker.Domain.html#sign:143"><span class="id" title="variable">sign</span></a> <a class="idref" href="Checker.Domain.html#bound:144"><span class="id" title="variable">bound</span></a> <a class="idref" href="Checker.Domain.html#values:145"><span class="id" title="variable">values</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Checker.Domain.html#n:146"><span class="id" title="variable">n</span></a> <a class="idref" href="Checker.Domain.html#values:145"><span class="id" title="variable">values</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="Checker.Domain.html#bound:144"><span class="id" title="variable">bound</span></a> <a class="idref" href="Checker.Domain.html#f163442bfdfd7d398e81c78acec952b0"><span class="id" title="notation">&lt;=[</span></a><a class="idref" href="Checker.Domain.html#sign:143"><span class="id" title="variable">sign</span></a><a class="idref" href="Checker.Domain.html#f163442bfdfd7d398e81c78acec952b0"><span class="id" title="notation">]</span></a> <a class="idref" href="Checker.Domain.html#n:146"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">sign</span> <span class="id" title="var">bound</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">values</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">Hsorted</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">Hsorted</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hsorted</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">a0</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHvalues</span> <span class="id" title="var">n</span> <span class="id" title="var">H1</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Sorting.Sorted.html#Sorted_StronglySorted"><span class="id" title="lemma">Sorted_StronglySorted</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsorted</span>.<br/>
&nbsp;&nbsp;2: { <span class="id" title="var">simpl_sign</span>; <span class="id" title="tactic">intro</span>; <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">a</span> <a class="idref" href="Checker.Domain.html#ce469cce0c700aa00d2c886bd517c464"><span class="id" title="notation">&lt;?[</span></a><span class="id" title="var">sign</span><a class="idref" href="Checker.Domain.html#ce469cce0c700aa00d2c886bd517c464"><span class="id" title="notation">]</span></a> <span class="id" title="var">bound</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlt</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHvalues</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Han</span> | <span class="id" title="var">Hin</span>] <span class="id" title="var">Hbound</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span> <span class="id" title="var">a</span>. <span class="id" title="var">simpl_sign</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Bool.Bool.html#not_true_iff_false"><span class="id" title="lemma">not_true_iff_false</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Han</span> | <span class="id" title="var">Hin</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_sign</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hsorted</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">a0</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H2</span> <span class="id" title="var">n</span> <span class="id" title="var">Hin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_sign</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="elements_bound_sorted" class="idref" href="#elements_bound_sorted"><span class="id" title="lemma">elements_bound_sorted</span></a> : <br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="sign:147" class="idref" href="#sign:147"><span class="id" title="binder">sign</span></a> <a id="bound:148" class="idref" href="#bound:148"><span class="id" title="binder">bound</span></a> <a id="values:149" class="idref" href="#values:149"><span class="id" title="binder">values</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Sorting.Sorted.html#Sorted"><span class="id" title="inductive">Sorted</span></a> (<a class="idref" href="Checker.Domain.html#lt_flip"><span class="id" title="definition">lt_flip</span></a> <a class="idref" href="Checker.Domain.html#sign:147"><span class="id" title="variable">sign</span></a>) <a class="idref" href="Checker.Domain.html#values:149"><span class="id" title="variable">values</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Sorting.Sorted.html#Sorted"><span class="id" title="inductive">Sorted</span></a> (<a class="idref" href="Checker.Domain.html#lt_flip"><span class="id" title="definition">lt_flip</span></a> <a class="idref" href="Checker.Domain.html#sign:147"><span class="id" title="variable">sign</span></a>) (<a class="idref" href="Checker.Domain.html#elements_bound"><span class="id" title="definition">elements_bound</span></a> <a class="idref" href="Checker.Domain.html#sign:147"><span class="id" title="variable">sign</span></a> <a class="idref" href="Checker.Domain.html#bound:148"><span class="id" title="variable">bound</span></a> <a class="idref" href="Checker.Domain.html#values:149"><span class="id" title="variable">values</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">sign</span> <span class="id" title="var">bound</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">values</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">l</span> <span class="id" title="var">a0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHvalues</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">a</span> <a class="idref" href="Checker.Domain.html#ce469cce0c700aa00d2c886bd517c464"><span class="id" title="notation">&lt;?[</span></a><span class="id" title="var">sign</span><a class="idref" href="Checker.Domain.html#ce469cce0c700aa00d2c886bd517c464"><span class="id" title="notation">]</span></a> <span class="id" title="var">bound</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlt</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHvalues</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Sorting.Sorted.html#Sorted_cons"><span class="id" title="constructor">Sorted_cons</span></a>; <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="tighten_holes_spec" class="idref" href="#tighten_holes_spec"><span class="id" title="lemma">tighten_holes_spec</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="sign:150" class="idref" href="#sign:150"><span class="id" title="binder">sign</span></a> <a id="holes:151" class="idref" href="#holes:151"><span class="id" title="binder">holes</span></a> <a id="last:152" class="idref" href="#last:152"><span class="id" title="binder">last</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Sorting.Sorted.html#StronglySorted"><span class="id" title="inductive">StronglySorted</span></a> (<a class="idref" href="Checker.Domain.html#lt_flip"><span class="id" title="definition">lt_flip</span></a> <a class="idref" href="Checker.Domain.html#sign:150"><span class="id" title="variable">sign</span></a>) <a class="idref" href="Checker.Domain.html#holes:151"><span class="id" title="variable">holes</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">forall</span> <a id="h:153" class="idref" href="#h:153"><span class="id" title="binder">h</span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Checker.Domain.html#h:153"><span class="id" title="variable">h</span></a> <a class="idref" href="Checker.Domain.html#holes:151"><span class="id" title="variable">holes</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Checker.Domain.html#last:152"><span class="id" title="variable">last</span></a> <a class="idref" href="Checker.Domain.html#f163442bfdfd7d398e81c78acec952b0"><span class="id" title="notation">&lt;=[</span></a><a class="idref" href="Checker.Domain.html#sign:150"><span class="id" title="variable">sign</span></a><a class="idref" href="Checker.Domain.html#f163442bfdfd7d398e81c78acec952b0"><span class="id" title="notation">]</span></a> <a class="idref" href="Checker.Domain.html#h:153"><span class="id" title="variable">h</span></a><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="Checker.Domain.html#tighten_with_holes"><span class="id" title="definition">tighten_with_holes</span></a> <a class="idref" href="Checker.Domain.html#sign:150"><span class="id" title="variable">sign</span></a> <a class="idref" href="Checker.Domain.html#holes:151"><span class="id" title="variable">holes</span></a> <a class="idref" href="Checker.Domain.html#last:152"><span class="id" title="variable">last</span></a>) <a class="idref" href="Checker.Domain.html#holes:151"><span class="id" title="variable">holes</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">sign</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">holes</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">h</span> <span class="id" title="var">holes'</span> <span class="id" title="var">IH</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">last</span> <span class="id" title="var">Hsorted</span> <span class="id" title="var">Hlast</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">last</span> <span class="id" title="var">Hsorted</span> <span class="id" title="var">Hlast</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hsorted</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">a</span> <span class="id" title="var">l</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hsorted</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H1</span> <span class="id" title="var">into</span> <span class="id" title="var">Hsorted'</span>; <span class="id" title="tactic">rename</span> <span class="id" title="var">H2</span> <span class="id" title="var">into</span> <span class="id" title="var">Hhlt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">h</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#f10153ef1a81fe79ed16d848b456c79b"><span class="id" title="notation">=?</span></a> <span class="id" title="var">last</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hh</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_eq"><span class="id" title="lemma">Z.eqb_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hh</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">last</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hhis</span> | <span class="id" title="var">Hin</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">clear</span> -<span class="id" title="var">Hhis</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="Checker.Domain.html#tighten_holes_monotonic"><span class="id" title="lemma">tighten_holes_monotonic</span></a> <span class="id" title="var">sign</span> <span class="id" title="var">holes'</span> (<span class="id" title="var">h</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> <a class="idref" href="Checker.Domain.html#sign_to_z"><span class="id" title="definition">sign_to_z</span></a> <span class="id" title="var">sign</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_sign</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">assert</span> (<span class="id" title="keyword">forall</span> <a id="h':154" class="idref" href="#h':154"><span class="id" title="binder"><span id="h':155" class="id">h'</span></span></a>, <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="Checker.Domain.html#h':154"><span class="id" title="variable">h'</span></a> <span class="id" title="var">holes'</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a> <span class="id" title="var">h</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">(</span></a><a class="idref" href="Checker.Domain.html#sign_to_z"><span class="id" title="definition">sign_to_z</span></a> <span class="id" title="var">sign</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">)</span></a> <a class="idref" href="Checker.Domain.html#f163442bfdfd7d398e81c78acec952b0"><span class="id" title="notation">&lt;=[</span></a><span class="id" title="var">sign</span><a class="idref" href="Checker.Domain.html#f163442bfdfd7d398e81c78acec952b0"><span class="id" title="notation">]</span></a> <a class="idref" href="Checker.Domain.html#h':154"><span class="id" title="variable">h'</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">h'</span> <span class="id" title="var">Hin'</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hhlt</span> <span class="id" title="var">h'</span> <span class="id" title="var">Hin'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_sign</span>; <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IH</span> (<span class="id" title="var">h</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">(</span></a><a class="idref" href="Checker.Domain.html#sign_to_z"><span class="id" title="definition">sign_to_z</span></a> <span class="id" title="var">sign</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#46584eddd5fdb16176a10a2843177d3a"><span class="id" title="notation">)</span></a>) <span class="id" title="var">Hsorted'</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> [<span class="id" title="var">Hhlast</span> | <span class="id" title="var">Hlastin</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#Z.eqb_neq"><span class="id" title="lemma">Z.eqb_neq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hh</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">h</span>; <span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hhlt</span> <span class="id" title="var">last</span> <span class="id" title="var">Hlastin</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">h</span> (<span class="id" title="var">h</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">holes'</span>)) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">left</span>; <span class="id" title="tactic">reflexivity</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hlast</span> <span class="id" title="var">h</span> <span class="id" title="var">H</span>); <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_sign</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="tighten_lb_tightens" class="idref" href="#tighten_lb_tightens"><span class="id" title="lemma">tighten_lb_tightens</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="dom:156" class="idref" href="#dom:156"><span class="id" title="binder">dom</span></a> <a id="dom':157" class="idref" href="#dom':157"><span class="id" title="binder">dom'</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#dom':157"><span class="id" title="variable">dom'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Checker.Domain.html#tighten_lb"><span class="id" title="definition">tighten_lb</span></a> <a class="idref" href="Checker.Domain.html#dom:156"><span class="id" title="variable">dom</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#lb_tightened"><span class="id" title="definition">lb_tightened</span></a> <a class="idref" href="Checker.Domain.html#dom':157"><span class="id" title="variable">dom'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">dom</span> <span class="id" title="var">dom'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hdom'</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">dom'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#tighten_lb"><span class="id" title="definition">tighten_lb</span></a>, <a class="idref" href="Checker.Domain.html#lb_tightened"><span class="id" title="definition">lb_tightened</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a> <span class="id" title="var">dom</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">lb</span>| |] <span class="id" title="var">eqn</span>:<span class="id" title="var">Hdlb</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;2: { <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hdlb</span>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;2: { <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hdlb</span>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Utility.html#Sets.sint.mem"><span class="id" title="definition">sint.mem</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">Hmem</span>.<br/>
&nbsp;&nbsp;2: { <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hdlb</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Utility.html#Sets.sint.mem_spec"><span class="id" title="lemma">sint.mem_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Bool.Bool.html#not_true_iff_false"><span class="id" title="lemma">not_true_iff_false</span></a>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hmem</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Utility.html#Sets.sint.elements_spec1"><span class="id" title="lemma">sint.elements_spec1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Utility.html#ListEx.InA_eq_iff_In"><span class="id" title="lemma">InA_eq_iff_In</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="Checker.Utility.html#Sets.sint.elements"><span class="id" title="definition">sint.elements</span></a> (<a class="idref" href="Checker.Domain.html#d_holes"><span class="id" title="projection">d_holes</span></a> <span class="id" title="var">dom</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">holes</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="Checker.Utility.html#Sets.sint.elements_spec2"><span class="id" title="lemma">sint.elements_spec2</span></a> (<a class="idref" href="Checker.Domain.html#d_holes"><span class="id" title="projection">d_holes</span></a> <span class="id" title="var">dom</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsort</span>; <span class="id" title="tactic">fold</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#Z.lt"><span class="id" title="axiom">Z.lt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsort</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heqholes</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsort</span>; <span class="id" title="tactic">clear</span> -<span class="id" title="var">Hsort</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="var">remember</span> (<a class="idref" href="Checker.Domain.html#tighten_with_holes"><span class="id" title="definition">tighten_with_holes</span></a> <a class="idref" href="Checker.Domain.html#plus"><span class="id" title="constructor">plus</span></a> (<a class="idref" href="Checker.Domain.html#elements_bound"><span class="id" title="definition">elements_bound</span></a> <a class="idref" href="Checker.Domain.html#plus"><span class="id" title="constructor">plus</span></a> <span class="id" title="var">lb</span> <span class="id" title="var">holes</span>) <span class="id" title="var">lb</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">lb'</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">lb</span> <a class="idref" href="Checker.Domain.html#4a02cccd7753194d250e916f81163a62"><span class="id" title="notation">+&lt;=</span></a> <span class="id" title="var">lb'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hzz'</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">subst</span> <span class="id" title="var">lb'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#tighten_holes_monotonic"><span class="id" title="lemma">tighten_holes_monotonic</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">lb'</span> <span class="id" title="var">holes</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="var">lb</span> <a class="idref" href="Checker.Domain.html#4a02cccd7753194d250e916f81163a62"><span class="id" title="notation">+&lt;=</span></a> <span class="id" title="var">lb'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hin</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">split</span>; <span class="id" title="tactic">assumption</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Domain.html#elements_bound_in_iff"><span class="id" title="lemma">elements_bound_in_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">enough</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">lb'</span> (<a class="idref" href="Checker.Domain.html#elements_bound"><span class="id" title="definition">elements_bound</span></a> <a class="idref" href="Checker.Domain.html#plus"><span class="id" title="constructor">plus</span></a> <span class="id" title="var">lb</span> <span class="id" title="var">holes</span>)) <span class="id" title="tactic">by</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">lb'</span>; <span class="id" title="tactic">clear</span> -<span class="id" title="var">Hsort</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#tighten_holes_spec"><span class="id" title="lemma">tighten_holes_spec</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Sorting.Sorted.html#Sorted_StronglySorted"><span class="id" title="lemma">Sorted_StronglySorted</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#lt_flip"><span class="id" title="definition">lt_flip</span></a>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#elements_bound_sorted"><span class="id" title="lemma">elements_bound_sorted</span></a>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hsort</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">h</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Domain.html#elements_bound_in_iff"><span class="id" title="lemma">elements_bound_in_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">Hsort</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="tighten_ub_tightens" class="idref" href="#tighten_ub_tightens"><span class="id" title="lemma">tighten_ub_tightens</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="dom:158" class="idref" href="#dom:158"><span class="id" title="binder">dom</span></a> <a id="dom':159" class="idref" href="#dom':159"><span class="id" title="binder">dom'</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#dom':159"><span class="id" title="variable">dom'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Checker.Domain.html#tighten_ub"><span class="id" title="definition">tighten_ub</span></a> <a class="idref" href="Checker.Domain.html#dom:158"><span class="id" title="variable">dom</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#ub_tightened"><span class="id" title="definition">ub_tightened</span></a> <a class="idref" href="Checker.Domain.html#dom':159"><span class="id" title="variable">dom'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">dom</span> <span class="id" title="var">dom'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hdom'</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">dom'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#tighten_ub"><span class="id" title="definition">tighten_ub</span></a>, <a class="idref" href="Checker.Domain.html#ub_tightened"><span class="id" title="definition">ub_tightened</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a> <span class="id" title="var">dom</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hdub</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;2: { <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hdub</span>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;2: { <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hdub</span>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Utility.html#Sets.sint.mem"><span class="id" title="definition">sint.mem</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">Hmem</span>.<br/>
&nbsp;&nbsp;2: { <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hdub</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Utility.html#Sets.sint.mem_spec"><span class="id" title="lemma">sint.mem_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Bool.Bool.html#not_true_iff_false"><span class="id" title="lemma">not_true_iff_false</span></a>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hmem</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Utility.html#Sets.sint.elements_spec1"><span class="id" title="lemma">sint.elements_spec1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Utility.html#ListEx.InA_eq_iff_In"><span class="id" title="lemma">InA_eq_iff_In</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="Checker.Utility.html#Sets.sint.elements_spec2"><span class="id" title="lemma">sint.elements_spec2</span></a> (<a class="idref" href="Checker.Domain.html#d_holes"><span class="id" title="projection">d_holes</span></a> <span class="id" title="var">dom</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">Hsort</span>; <span class="id" title="tactic">fold</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.ZArith.BinInt.html#Z.lt"><span class="id" title="axiom">Z.lt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsort</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Utility.html#SortedEx.Sorted_reverse"><span class="id" title="lemma">Sorted_reverse</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsort</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsort</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#in_rev"><span class="id" title="lemma">in_rev</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#rev"><span class="id" title="definition">rev</span></a> (<a class="idref" href="Checker.Utility.html#Sets.sint.elements"><span class="id" title="definition">sint.elements</span></a> (<a class="idref" href="Checker.Domain.html#d_holes"><span class="id" title="projection">d_holes</span></a> <span class="id" title="var">dom</span>))) <span class="id" title="keyword">as</span> <span class="id" title="var">holes</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> &lt;- <span class="id" title="var">Heqholes</span>; <span class="id" title="tactic">setoid_rewrite</span> &lt;- <span class="id" title="var">Heqholes</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hsort</span>; <span class="id" title="tactic">clear</span> -<span class="id" title="var">Hsort</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="var">remember</span> (<a class="idref" href="Checker.Domain.html#tighten_with_holes"><span class="id" title="definition">tighten_with_holes</span></a> <a class="idref" href="Checker.Domain.html#min"><span class="id" title="constructor">min</span></a> (<a class="idref" href="Checker.Domain.html#elements_bound"><span class="id" title="definition">elements_bound</span></a> <a class="idref" href="Checker.Domain.html#min"><span class="id" title="constructor">min</span></a> <span class="id" title="var">z</span> <span class="id" title="var">holes</span>) <span class="id" title="var">z</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">z'</span>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">z</span> <a class="idref" href="Checker.Domain.html#7e57c2a88fdd4f58ec6b6df6dd07b916"><span class="id" title="notation">-&lt;=</span></a> <span class="id" title="var">z'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hzz'</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">subst</span> <span class="id" title="var">z'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#tighten_holes_monotonic"><span class="id" title="lemma">tighten_holes_monotonic</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">z'</span> <span class="id" title="var">holes</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="var">z</span> <a class="idref" href="Checker.Domain.html#7e57c2a88fdd4f58ec6b6df6dd07b916"><span class="id" title="notation">-&lt;=</span></a> <span class="id" title="var">z'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hin</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">split</span>; <span class="id" title="tactic">assumption</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="Checker.Domain.html#elements_bound_in_iff"><span class="id" title="lemma">elements_bound_in_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">enough</span> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Lists.List.html#In"><span class="id" title="definition">In</span></a> <span class="id" title="var">z'</span> (<a class="idref" href="Checker.Domain.html#elements_bound"><span class="id" title="definition">elements_bound</span></a> <a class="idref" href="Checker.Domain.html#min"><span class="id" title="constructor">min</span></a> <span class="id" title="var">z</span> <span class="id" title="var">holes</span>)) <span class="id" title="tactic">by</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">z'</span>; <span class="id" title="tactic">clear</span> -<span class="id" title="var">Hsort</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#tighten_holes_spec"><span class="id" title="lemma">tighten_holes_spec</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Sorting.Sorted.html#Sorted_StronglySorted"><span class="id" title="lemma">Sorted_StronglySorted</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#lt_flip"><span class="id" title="definition">lt_flip</span></a>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#elements_bound_sorted"><span class="id" title="lemma">elements_bound_sorted</span></a>. <span class="id" title="tactic">exact</span> <span class="id" title="var">Hsort</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">h</span> <span class="id" title="var">Hin</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Domain.html#elements_bound_in_iff"><span class="id" title="lemma">elements_bound_in_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <span class="id" title="var">Hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">Hsort</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="tighten_tightens" class="idref" href="#tighten_tightens"><span class="id" title="lemma">tighten_tightens</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="dom:160" class="idref" href="#dom:160"><span class="id" title="binder">dom</span></a> <a id="dom':161" class="idref" href="#dom':161"><span class="id" title="binder">dom'</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#dom':161"><span class="id" title="variable">dom'</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Checker.Domain.html#tighten_dom"><span class="id" title="definition">tighten_dom</span></a> <a class="idref" href="Checker.Domain.html#dom:160"><span class="id" title="variable">dom</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#dom_tightened"><span class="id" title="definition">dom_tightened</span></a> <a class="idref" href="Checker.Domain.html#dom':161"><span class="id" title="variable">dom'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">dom</span> <span class="id" title="var">dom'</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#tighten_dom"><span class="id" title="definition">tighten_dom</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#dom_tightened"><span class="id" title="definition">dom_tightened</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hdom'</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">assert</span> (<a class="idref" href="Checker.Domain.html#lb_tightened"><span class="id" title="definition">lb_tightened</span></a> (<a class="idref" href="Checker.Domain.html#tighten_lb"><span class="id" title="definition">tighten_lb</span></a> <span class="id" title="var">dom</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#tighten_lb_tightens"><span class="id" title="lemma">tighten_lb_tightens</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">dom</span> := <span class="id" title="var">dom</span>) (<span class="id" title="var">dom'</span> := (<a class="idref" href="Checker.Domain.html#tighten_lb"><span class="id" title="definition">tighten_lb</span></a> <span class="id" title="var">dom</span>)). <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="Checker.Domain.html#tighten_lb"><span class="id" title="definition">tighten_lb</span></a> <span class="id" title="var">dom</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">dom'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">remember</span> (<a class="idref" href="Checker.Domain.html#tighten_ub"><span class="id" title="definition">tighten_ub</span></a> <span class="id" title="var">dom'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">dom''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a> <span class="id" title="var">dom''</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a> <span class="id" title="var">dom'</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="Checker.Domain.html#d_holes"><span class="id" title="projection">d_holes</span></a> <span class="id" title="var">dom''</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Checker.Domain.html#d_holes"><span class="id" title="projection">d_holes</span></a> <span class="id" title="var">dom'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">Hlb</span> <span class="id" title="var">Hholes</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">dom''</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#tighten_ub"><span class="id" title="definition">tighten_ub</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a> <span class="id" title="var">dom'</span>); <span class="id" title="tactic">try</span> <span class="id" title="tactic">destruct</span> (<a class="idref" href="Checker.Utility.html#Sets.sint.mem"><span class="id" title="definition">sint.mem</span></a> <span class="id" title="var">z</span> (<a class="idref" href="Checker.Domain.html#d_holes"><span class="id" title="projection">d_holes</span></a> <span class="id" title="var">dom'</span>)); <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#lb_tightened"><span class="id" title="definition">lb_tightened</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hlb</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hholes</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#tighten_ub_tightens"><span class="id" title="lemma">tighten_ub_tightens</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">dom</span> := (<a class="idref" href="Checker.Domain.html#tighten_lb"><span class="id" title="definition">tighten_lb</span></a> <span class="id" title="var">dom</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">Hdom'</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lb_tightened_not_ub" class="idref" href="#lb_tightened_not_ub"><span class="id" title="lemma">lb_tightened_not_ub</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="lb:162" class="idref" href="#lb:162"><span class="id" title="binder">lb</span></a> <a id="ub:163" class="idref" href="#ub:163"><span class="id" title="binder">ub</span></a> <a id="ub':164" class="idref" href="#ub':164"><span class="id" title="binder">ub'</span></a> <a id="holes:165" class="idref" href="#holes:165"><span class="id" title="binder">holes</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#lb_tightened"><span class="id" title="definition">lb_tightened</span></a> (<a class="idref" href="Checker.Domain.html#mkDom"><span class="id" title="constructor">mkDom</span></a> <a class="idref" href="Checker.Domain.html#lb:162"><span class="id" title="variable">lb</span></a> <a class="idref" href="Checker.Domain.html#ub:163"><span class="id" title="variable">ub</span></a> <a class="idref" href="Checker.Domain.html#holes:165"><span class="id" title="variable">holes</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="Checker.Domain.html#lb_tightened"><span class="id" title="definition">lb_tightened</span></a> (<a class="idref" href="Checker.Domain.html#mkDom"><span class="id" title="constructor">mkDom</span></a> <a class="idref" href="Checker.Domain.html#lb:162"><span class="id" title="variable">lb</span></a> <a class="idref" href="Checker.Domain.html#ub':164"><span class="id" title="variable">ub'</span></a> <a class="idref" href="Checker.Domain.html#holes:165"><span class="id" title="variable">holes</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">lb</span> <span class="id" title="var">ub</span> <span class="id" title="var">ub'</span> <span class="id" title="var">holes</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#lb_tightened"><span class="id" title="definition">lb_tightened</span></a>; <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="ub_tightened_not_lb" class="idref" href="#ub_tightened_not_lb"><span class="id" title="lemma">ub_tightened_not_lb</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="lb:166" class="idref" href="#lb:166"><span class="id" title="binder">lb</span></a> <a id="lb':167" class="idref" href="#lb':167"><span class="id" title="binder">lb'</span></a> <a id="ub:168" class="idref" href="#ub:168"><span class="id" title="binder">ub</span></a> <a id="holes:169" class="idref" href="#holes:169"><span class="id" title="binder">holes</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#ub_tightened"><span class="id" title="definition">ub_tightened</span></a> (<a class="idref" href="Checker.Domain.html#mkDom"><span class="id" title="constructor">mkDom</span></a> <a class="idref" href="Checker.Domain.html#lb:166"><span class="id" title="variable">lb</span></a> <a class="idref" href="Checker.Domain.html#ub:168"><span class="id" title="variable">ub</span></a> <a class="idref" href="Checker.Domain.html#holes:169"><span class="id" title="variable">holes</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">&lt;-&gt;</span></a> <a class="idref" href="Checker.Domain.html#ub_tightened"><span class="id" title="definition">ub_tightened</span></a> (<a class="idref" href="Checker.Domain.html#mkDom"><span class="id" title="constructor">mkDom</span></a> <a class="idref" href="Checker.Domain.html#lb':167"><span class="id" title="variable">lb'</span></a> <a class="idref" href="Checker.Domain.html#ub:168"><span class="id" title="variable">ub</span></a> <a class="idref" href="Checker.Domain.html#holes:169"><span class="id" title="variable">holes</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">lb</span> <span class="id" title="var">lb'</span> <span class="id" title="var">ub</span> <span class="id" title="var">holes</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#ub_tightened"><span class="id" title="definition">ub_tightened</span></a>; <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="apply_atomic_tighten_spec" class="idref" href="#apply_atomic_tighten_spec"><span class="id" title="lemma">apply_atomic_tighten_spec</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <a id="dom:170" class="idref" href="#dom:170"><span class="id" title="binder">dom</span></a> <a id="atomic:171" class="idref" href="#atomic:171"><span class="id" title="binder">atomic</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#dom_consistent"><span class="id" title="definition">dom_consistent</span></a> <a class="idref" href="Checker.Domain.html#dom:170"><span class="id" title="variable">dom</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#dom_tightened"><span class="id" title="definition">dom_tightened</span></a> <a class="idref" href="Checker.Domain.html#dom:170"><span class="id" title="variable">dom</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.Domain.html#apply_atomic_tighten"><span class="id" title="definition">apply_atomic_tighten</span></a> <a class="idref" href="Checker.Domain.html#dom:170"><span class="id" title="variable">dom</span></a> <a class="idref" href="Checker.Domain.html#atomic:171"><span class="id" title="variable">atomic</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">dom'</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#dom_tightened"><span class="id" title="definition">dom_tightened</span></a> <span class="id" title="var">dom'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#dom_consistent"><span class="id" title="definition">dom_consistent</span></a> <span class="id" title="var">dom'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Checker.Domain.html#dom_equiv"><span class="id" title="definition">dom_equiv</span></a> <span class="id" title="var">dom'</span> (<a class="idref" href="Checker.Domain.html#apply_atomic"><span class="id" title="definition">apply_atomic</span></a> <a class="idref" href="Checker.Domain.html#dom:170"><span class="id" title="variable">dom</span></a> <a class="idref" href="Checker.Domain.html#atomic:171"><span class="id" title="variable">atomic</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">~</span></a> <a class="idref" href="Checker.Domain.html#dom_consistent"><span class="id" title="definition">dom_consistent</span></a> (<a class="idref" href="Checker.Domain.html#apply_atomic"><span class="id" title="definition">apply_atomic</span></a> <a class="idref" href="Checker.Domain.html#dom:170"><span class="id" title="variable">dom</span></a> <a class="idref" href="Checker.Domain.html#atomic:171"><span class="id" title="variable">atomic</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">dom</span> <span class="id" title="var">atomic</span> <span class="id" title="var">Hconsistent</span> <span class="id" title="var">Htightened</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<a class="idref" href="Checker.Domain.html#apply_atomic_tighten_valid"><span class="id" title="lemma">apply_atomic_tighten_valid</span></a> <span class="id" title="var">dom</span> <span class="id" title="var">atomic</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Domain.html#apply_atomic_tighten"><span class="id" title="definition">apply_atomic_tighten</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">dom'</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">Htighten</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#apply_atomic_tighten"><span class="id" title="definition">apply_atomic_tighten</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Htighten</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Domain.html#dom_check_consistent"><span class="id" title="definition">dom_check_consistent</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Spec.html#ProofFacts.atm_cmp"><span class="id" title="projection">atm_cmp</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">Hcmp</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Domain.html#dom_check_consistent"><span class="id" title="definition">dom_check_consistent</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">Hcheck</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<a class="idref" href="Checker.Domain.html#dom_tightened"><span class="id" title="definition">dom_tightened</span></a> <span class="id" title="var">dom'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">clear</span> <span class="id" title="var">Hcheck</span> <span class="id" title="var">Hconsistent</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">dom</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lb</span> <span class="id" title="var">ub</span> <span class="id" title="var">holes</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">dom'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lb'</span> <span class="id" title="var">ub'</span> <span class="id" title="var">holes'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Domain.html#lb_tightened_not_ub"><span class="id" title="lemma">lb_tightened_not_ub</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">ub'</span> := <span class="id" title="var">ub</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htightened</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htightened</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<span class="id" title="var">lb'</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">lb</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="var">holes'</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">holes</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">subst</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htighten</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Htighten</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#apply_atomic"><span class="id" title="definition">apply_atomic</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcmp</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#tighten_ub"><span class="id" title="definition">tighten_ub</span></a>, <a class="idref" href="Checker.Domain.html#update_ub"><span class="id" title="definition">update_ub</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Zext.html#Zext.min"><span class="id" title="definition">Zext.min</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Utility.html#Sets.sint.mem"><span class="id" title="definition">sint.mem</span></a>; <span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htighten</span>. <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Htighten</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#tighten_ub_tightens"><span class="id" title="lemma">tighten_ub_tightens</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">dom</span> := (<a class="idref" href="Checker.Domain.html#apply_atomic"><span class="id" title="definition">apply_atomic</span></a> <span class="id" title="var">dom</span> <span class="id" title="var">atomic</span>)). <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htighten</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Htighten</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#dom_consistent_iff_checked"><span class="id" title="lemma">dom_consistent_iff_checked</span></a>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<a class="idref" href="Checker.Domain.html#dom_tightened"><span class="id" title="definition">dom_tightened</span></a> <span class="id" title="var">dom'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htighten</span>. <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Htighten</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#tighten_lb_tightens"><span class="id" title="lemma">tighten_lb_tightens</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">dom</span> := (<a class="idref" href="Checker.Domain.html#apply_atomic"><span class="id" title="definition">apply_atomic</span></a> <span class="id" title="var">dom</span> <span class="id" title="var">atomic</span>)). <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">clear</span> <span class="id" title="var">Hcheck</span> <span class="id" title="var">Hconsistent</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">dom</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lb</span> <span class="id" title="var">ub</span> <span class="id" title="var">holes</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">dom'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">lb'</span> <span class="id" title="var">ub'</span> <span class="id" title="var">holes'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Checker.Domain.html#ub_tightened_not_lb"><span class="id" title="lemma">ub_tightened_not_lb</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">lb'</span> := <span class="id" title="var">lb</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Htightened</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">Htightened</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<span class="id" title="var">ub'</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">ub</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <span class="id" title="var">holes'</span> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">holes</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">subst</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htighten</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Htighten</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#apply_atomic"><span class="id" title="definition">apply_atomic</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hcmp</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Checker.Domain.html#tighten_lb"><span class="id" title="definition">tighten_lb</span></a>, <a class="idref" href="Checker.Domain.html#update_lb"><span class="id" title="definition">update_lb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Zext.html#Zext.max"><span class="id" title="definition">Zext.max</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Checker.Utility.html#Sets.sint.mem"><span class="id" title="definition">sint.mem</span></a>; <span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htighten</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Htighten</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#dom_consistent_iff_checked"><span class="id" title="lemma">dom_consistent_iff_checked</span></a>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<a class="idref" href="Checker.Domain.html#dom_tightened"><span class="id" title="definition">dom_tightened</span></a> <span class="id" title="var">dom'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htighten</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#tighten_tightens"><span class="id" title="lemma">tighten_tightens</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">dom</span> := (<a class="idref" href="Checker.Domain.html#apply_atomic"><span class="id" title="definition">apply_atomic</span></a> <span class="id" title="var">dom</span> <span class="id" title="var">atomic</span>)). <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htighten</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Htighten</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#dom_consistent_iff_checked"><span class="id" title="lemma">dom_consistent_iff_checked</span></a>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assert</span> (<a class="idref" href="Checker.Domain.html#dom_tightened"><span class="id" title="definition">dom_tightened</span></a> <span class="id" title="var">dom'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">inversion</span> <span class="id" title="var">Htighten</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#tighten_tightens"><span class="id" title="lemma">tighten_tightens</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">dom</span> := (<a class="idref" href="Checker.Domain.html#apply_atomic"><span class="id" title="definition">apply_atomic</span></a> <span class="id" title="var">dom</span> <span class="id" title="var">atomic</span>)). <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Htighten</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Htighten</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">apply</span> <a class="idref" href="Checker.Domain.html#dom_consistent_iff_checked"><span class="id" title="lemma">dom_consistent_iff_checked</span></a>; <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">exact</span> <span class="id" title="var">Hvalid</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">Hvalid</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Checker.Domain.html#TightenComplete"><span class="id" title="section">TightenComplete</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="DomainUtil" class="idref" href="#DomainUtil"><span class="id" title="section">DomainUtil</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="lb_ub_from_dom" class="idref" href="#lb_ub_from_dom"><span class="id" title="definition">lb_ub_from_dom</span></a> (<a id="dom:172" class="idref" href="#dom:172"><span class="id" title="binder">dom</span></a> : <a class="idref" href="Checker.Domain.html#Domain"><span class="id" title="record">Domain</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">*</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Numbers.BinNums.html#Z"><span class="id" title="inductive">Z</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Checker.Domain.html#dom:172"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_lb"><span class="id" title="projection">d_lb</span></a>), <a class="idref" href="Checker.Domain.html#dom:172"><span class="id" title="variable">dom</span></a>.(<a class="idref" href="Checker.Domain.html#d_ub"><span class="id" title="projection">d_ub</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> <span class="id" title="var">lb</span>, <a class="idref" href="Checker.Zext.html#zz"><span class="id" title="constructor">zz</span></a> <span class="id" title="var">ub</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">lb</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ub</span><a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/doc/V8.20.0/stdlib//Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Checker.Domain.html#DomainUtil"><span class="id" title="section">DomainUtil</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/coq-community/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
